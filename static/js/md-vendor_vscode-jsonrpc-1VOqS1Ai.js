var f={},_={},b;function m(){if(b)return _;b=1,Object.defineProperty(_,"__esModule",{value:!0});let l;function o(){if(l===void 0)throw new Error("No runtime abstraction layer installed");return l}return function(c){function r(u){if(u===void 0)throw new Error("No runtime abstraction layer provided");l=u}c.install=r}(o||(o={})),_.default=o,_}var i={},p;function E(){if(p)return i;p=1,Object.defineProperty(i,"__esModule",{value:!0}),i.stringArray=i.array=i.func=i.error=i.number=i.string=i.boolean=void 0;function l(e){return e===!0||e===!1}i.boolean=l;function o(e){return typeof e=="string"||e instanceof String}i.string=o;function c(e){return typeof e=="number"||e instanceof Number}i.number=c;function r(e){return e instanceof Error}i.error=r;function u(e){return typeof e=="function"}i.func=u;function t(e){return Array.isArray(e)}i.array=t;function s(e){return t(e)&&e.every(n=>o(n))}return i.stringArray=s,i}var d={},k;function y(){if(k)return d;k=1,Object.defineProperty(d,"__esModule",{value:!0}),d.Emitter=d.Event=void 0;const l=m();var o;(function(u){const t={dispose(){}};u.None=function(){return t}})(o||(d.Event=o={}));class c{add(t,s=null,e){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(s),Array.isArray(e)&&e.push({dispose:()=>this.remove(t,s)})}remove(t,s=null){if(!this._callbacks)return;let e=!1;for(let n=0,a=this._callbacks.length;n<a;n++)if(this._callbacks[n]===t)if(this._contexts[n]===s){this._callbacks.splice(n,1),this._contexts.splice(n,1);return}else e=!0;if(e)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];const s=[],e=this._callbacks.slice(0),n=this._contexts.slice(0);for(let a=0,h=e.length;a<h;a++)try{s.push(e[a].apply(n[a],t))}catch(C){(0,l.default)().console.error(C)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,s,e)=>{this._callbacks||(this._callbacks=new c),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,s);const n={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,s),n.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(e)&&e.push(n),n}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}return d.Emitter=r,r._noop=function(){},d}var v;function R(){if(v)return f;v=1,Object.defineProperty(f,"__esModule",{value:!0}),f.CancellationTokenSource=f.CancellationToken=void 0;const l=m(),o=E(),c=y();var r;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:c.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:c.Event.None});function n(a){const h=a;return h&&(h===e.None||h===e.Cancelled||o.boolean(h.isCancellationRequested)&&!!h.onCancellationRequested)}e.is=n})(r||(f.CancellationToken=r={}));const u=Object.freeze(function(e,n){const a=(0,l.default)().timer.setTimeout(e.bind(n),0);return{dispose(){a.dispose()}}});class t{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?u:(this._emitter||(this._emitter=new c.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class s{get token(){return this._token||(this._token=new t),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof t&&this._token.dispose():this._token=r.None}}return f.CancellationTokenSource=s,f}var q=R(),g=y();export{q as c,g as e};
