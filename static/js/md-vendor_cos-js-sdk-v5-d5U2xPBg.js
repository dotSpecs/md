import{g as wt}from"./md-cytoscape-BS5BTURY.js";var ut={exports:{}},It=ut.exports,mt;function Ut(){return mt||(mt=1,function(Et,jt){(function(le,A){Et.exports=A()})(It,function(){return function(V){var le={};function A(N){if(le[N])return le[N].exports;var I=le[N]={i:N,l:!1,exports:{}};return V[N].call(I.exports,I,I.exports,A),I.l=!0,I.exports}return A.m=V,A.c=le,A.d=function(N,I,L){A.o(N,I)||Object.defineProperty(N,I,{enumerable:!0,get:L})},A.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})},A.t=function(N,I){if(I&1&&(N=A(N)),I&8||I&4&&typeof N=="object"&&N&&N.__esModule)return N;var L=Object.create(null);if(A.r(L),Object.defineProperty(L,"default",{enumerable:!0,value:N}),I&2&&typeof N!="string")for(var j in N)A.d(L,j,(function(M){return N[M]}).bind(null,j));return L},A.n=function(N){var I=N&&N.__esModule?function(){return N.default}:function(){return N};return A.d(I,"a",I),I},A.o=function(N,I){return Object.prototype.hasOwnProperty.call(N,I)},A.p="/dist/",A(A.s="./index.js")}({"./index.js":function(V,le,A){var N=A("./src/cos.js");V.exports=N},"./lib/base64.js":function(V,le){var A=function(N){N=N||{};var I=N.Base64,L="2.1.9",j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=function(r){for(var c={},p=0,w=r.length;p<w;p++)c[r.charAt(p)]=p;return c}(j),s=String.fromCharCode,S=function(c){if(c.length<2){var p=c.charCodeAt(0);return p<128?c:p<2048?s(192|p>>>6)+s(128|p&63):s(224|p>>>12&15)+s(128|p>>>6&63)+s(128|p&63)}else{var p=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return s(240|p>>>18&7)+s(128|p>>>12&63)+s(128|p>>>6&63)+s(128|p&63)}},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(c){return c.replace(d,S)},f=function(c){var p=[0,2,1][c.length%3],w=c.charCodeAt(0)<<16|(c.length>1?c.charCodeAt(1):0)<<8|(c.length>2?c.charCodeAt(2):0),R=[j.charAt(w>>>18),j.charAt(w>>>12&63),p>=2?"=":j.charAt(w>>>6&63),p>=1?"=":j.charAt(w&63)];return R.join("")},y=N.btoa?function(r){return N.btoa(r)}:function(r){return r.replace(/[\s\S]{1,3}/g,f)},x=function(r){return y(C(r))},b=function(c,p){return p?x(String(c)).replace(/[+\/]/g,function(w){return w=="+"?"-":"_"}).replace(/=/g,""):x(String(c))},O=function(c){return b(c,!0)},U=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),H=function(c){switch(c.length){case 4:var p=(7&c.charCodeAt(0))<<18|(63&c.charCodeAt(1))<<12|(63&c.charCodeAt(2))<<6|63&c.charCodeAt(3),w=p-65536;return s((w>>>10)+55296)+s((w&1023)+56320);case 3:return s((15&c.charCodeAt(0))<<12|(63&c.charCodeAt(1))<<6|63&c.charCodeAt(2));default:return s((31&c.charCodeAt(0))<<6|63&c.charCodeAt(1))}},q=function(c){return c.replace(U,H)},h=function(c){var p=c.length,w=p%4,R=(p>0?M[c.charAt(0)]<<18:0)|(p>1?M[c.charAt(1)]<<12:0)|(p>2?M[c.charAt(2)]<<6:0)|(p>3?M[c.charAt(3)]:0),F=[s(R>>>16),s(R>>>8&255),s(R&255)];return F.length-=[0,0,2,1][w],F.join("")},l=N.atob?function(r){return N.atob(r)}:function(r){return r.replace(/[\s\S]{1,4}/g,h)},T=function(r){return q(l(r))},i=function(c){return T(String(c).replace(/[-_]/g,function(p){return p=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},o=function(){var c=N.Base64;return N.Base64=I,c},t={VERSION:L,atob:l,btoa:y,fromBase64:i,toBase64:b,utob:C,encode:b,encodeURI:O,btou:q,decode:i,noConflict:o};return t}();V.exports=A},"./lib/crypto.js":function(V,le,A){(function(N){var I=A("./node_modules/@babel/runtime/helpers/typeof.js"),L=L||function(j,M){var s={},S=s.lib={},d=function(){},C=S.Base={extend:function(h){d.prototype=this;var l=new d;return h&&l.mixIn(h),l.hasOwnProperty("init")||(l.init=function(){l.$super.init.apply(this,arguments)}),l.init.prototype=l,l.$super=this,l},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var l in h)h.hasOwnProperty(l)&&(this[l]=h[l]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}},f=S.WordArray=C.extend({init:function(h,l){h=this.words=h||[],this.sigBytes=l!=M?l:4*h.length},toString:function(h){return(h||x).stringify(this)},concat:function(h){var l=this.words,T=h.words,i=this.sigBytes;if(h=h.sigBytes,this.clamp(),i%4)for(var o=0;o<h;o++)l[i+o>>>2]|=(T[o>>>2]>>>24-8*(o%4)&255)<<24-8*((i+o)%4);else if(65535<T.length)for(o=0;o<h;o+=4)l[i+o>>>2]=T[o>>>2];else l.push.apply(l,T);return this.sigBytes+=h,this},clamp:function(){var h=this.words,l=this.sigBytes;h[l>>>2]&=4294967295<<32-8*(l%4),h.length=j.ceil(l/4)},clone:function(){var h=C.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var l=[],T=0;T<h;T+=4)l.push(4294967296*j.random()|0);return new f.init(l,h)}}),y=s.enc={},x=y.Hex={stringify:function(h){var l=h.words;h=h.sigBytes;for(var T=[],i=0;i<h;i++){var o=l[i>>>2]>>>24-8*(i%4)&255;T.push((o>>>4).toString(16)),T.push((o&15).toString(16))}return T.join("")},parse:function(h){for(var l=h.length,T=[],i=0;i<l;i+=2)T[i>>>3]|=parseInt(h.substr(i,2),16)<<24-4*(i%8);return new f.init(T,l/2)}},b=y.Latin1={stringify:function(h){var l=h.words;h=h.sigBytes;for(var T=[],i=0;i<h;i++)T.push(String.fromCharCode(l[i>>>2]>>>24-8*(i%4)&255));return T.join("")},parse:function(h){for(var l=h.length,T=[],i=0;i<l;i++)T[i>>>2]|=(h.charCodeAt(i)&255)<<24-8*(i%4);return new f.init(T,l)}},O=y.Utf8={stringify:function(h){try{return decodeURIComponent(escape(b.stringify(h)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(h){return b.parse(unescape(encodeURIComponent(h)))}},U=S.BufferedBlockAlgorithm=C.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=O.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var l=this._data,T=l.words,i=l.sigBytes,o=this.blockSize,t=i/(4*o),t=h?j.ceil(t):j.max((t|0)-this._minBufferSize,0);if(h=t*o,i=j.min(4*h,i),h){for(var r=0;r<h;r+=o)this._doProcessBlock(T,r);r=T.splice(0,h),l.sigBytes-=i}return new f.init(r,i)},clone:function(){var h=C.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0});S.Hasher=U.extend({cfg:C.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){U.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){return h&&this._append(h),this._doFinalize()},blockSize:16,_createHelper:function(h){return function(l,T){return new h.init(T).finalize(l)}},_createHmacHelper:function(h){return function(l,T){return new H.HMAC.init(h,T).finalize(l)}}});var H=s.algo={};return s}(Math);(function(){var j=L,d=j.lib,M=d.WordArray,s=d.Hasher,S=[],d=j.algo.SHA1=s.extend({_doReset:function(){this._hash=new M.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,y){for(var x=this._hash.words,b=x[0],O=x[1],U=x[2],H=x[3],q=x[4],h=0;80>h;h++){if(16>h)S[h]=f[y+h]|0;else{var l=S[h-3]^S[h-8]^S[h-14]^S[h-16];S[h]=l<<1|l>>>31}l=(b<<5|b>>>27)+q+S[h],l=20>h?l+((O&U|~O&H)+1518500249):40>h?l+((O^U^H)+1859775393):60>h?l+((O&U|O&H|U&H)-1894007588):l+((O^U^H)-899497514),q=H,H=U,U=O<<30|O>>>2,O=b,b=l}x[0]=x[0]+b|0,x[1]=x[1]+O|0,x[2]=x[2]+U|0,x[3]=x[3]+H|0,x[4]=x[4]+q|0},_doFinalize:function(){var f=this._data,y=f.words,x=8*this._nDataBytes,b=8*f.sigBytes;return y[b>>>5]|=128<<24-b%32,y[(b+64>>>9<<4)+14]=Math.floor(x/4294967296),y[(b+64>>>9<<4)+15]=x,f.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var f=s.clone.call(this);return f._hash=this._hash.clone(),f}});j.SHA1=s._createHelper(d),j.HmacSHA1=s._createHmacHelper(d)})(),function(){var j=L,M=j.enc.Utf8;j.algo.HMAC=j.lib.Base.extend({init:function(S,d){S=this._hasher=new S.init,typeof d=="string"&&(d=M.parse(d));var C=S.blockSize,f=4*C;d.sigBytes>f&&(d=S.finalize(d)),d.clamp();for(var y=this._oKey=d.clone(),x=this._iKey=d.clone(),b=y.words,O=x.words,U=0;U<C;U++)b[U]^=1549556828,O[U]^=909522486;y.sigBytes=x.sigBytes=f,this.reset()},reset:function(){var S=this._hasher;S.reset(),S.update(this._iKey)},update:function(S){return this._hasher.update(S),this},finalize:function(S){var d=this._hasher;return S=d.finalize(S),d.reset(),d.finalize(this._oKey.clone().concat(S))}})}(),function(){var j=L,M=j.lib,s=M.WordArray,S=j.enc;S.Base64={stringify:function(C){var f=C.words,y=C.sigBytes,x=this._map;C.clamp();for(var b=[],O=0;O<y;O+=3)for(var U=f[O>>>2]>>>24-O%4*8&255,H=f[O+1>>>2]>>>24-(O+1)%4*8&255,q=f[O+2>>>2]>>>24-(O+2)%4*8&255,h=U<<16|H<<8|q,l=0;l<4&&O+l*.75<y;l++)b.push(x.charAt(h>>>6*(3-l)&63));var T=x.charAt(64);if(T)for(;b.length%4;)b.push(T);return b.join("")},parse:function(C){var f=C.length,y=this._map,x=y.charAt(64);if(x){var b=C.indexOf(x);b!=-1&&(f=b)}for(var O=[],U=0,H=0;H<f;H++)if(H%4){var q=y.indexOf(C.charAt(H-1))<<H%4*2,h=y.indexOf(C.charAt(H))>>>6-H%4*2;O[U>>>2]|=(q|h)<<24-U%4*8,U++}return s.create(O,U)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),I(N)==="object"?N.exports=L:window.CryptoJS=L}).call(this,A("./node_modules/webpack/buildin/module.js")(V))},"./lib/md5.js":function(V,le,A){(function(N){var I,L=A("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var j=(typeof window>"u"?"undefined":L(window))==="object",M=j?window:{};M.JS_MD5_NO_WINDOW&&(j=!1);var s=!j&&(typeof self>"u"?"undefined":L(self))==="object";s&&(M=self);var S=!M.JS_MD5_NO_COMMON_JS&&L(N)==="object"&&N.exports,d=A("./node_modules/webpack/buildin/amd-options.js"),C=!M.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),y=[128,32768,8388608,-2147483648],x=[0,8,16,24],b=["hex","array","digest","buffer","arrayBuffer","base64"],O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),U=[],H;if(C){var q=new ArrayBuffer(68);H=new Uint8Array(q),U=new Uint32Array(q)}(M.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"}),C&&(M.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(o){return L(o)==="object"&&o.buffer&&o.buffer.constructor===ArrayBuffer});var h=function(t){return function(r,c){return new T(!0).update(r,c)[t]()}},l=function(){var t=h("hex");t.getCtx=t.create=function(){return new T},t.update=function(p){return t.create().update(p)};for(var r=0;r<b.length;++r){var c=b[r];t[c]=h(c)}return t};function T(o){if(o)U[0]=U[16]=U[1]=U[2]=U[3]=U[4]=U[5]=U[6]=U[7]=U[8]=U[9]=U[10]=U[11]=U[12]=U[13]=U[14]=U[15]=0,this.blocks=U,this.buffer8=H;else if(C){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}T.prototype.update=function(o,t){if(!this.finalized){for(var r,c=0,p,w=o.length,R=this.blocks,F=this.buffer8;c<w;){if(this.hashed&&(this.hashed=!1,R[0]=R[16],R[16]=R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=0),C)for(p=this.start;c<w&&p<64;++c)r=o.charCodeAt(c),t||r<128?F[p++]=r:r<2048?(F[p++]=192|r>>6,F[p++]=128|r&63):r<55296||r>=57344?(F[p++]=224|r>>12,F[p++]=128|r>>6&63,F[p++]=128|r&63):(r=65536+((r&1023)<<10|o.charCodeAt(++c)&1023),F[p++]=240|r>>18,F[p++]=128|r>>12&63,F[p++]=128|r>>6&63,F[p++]=128|r&63);else for(p=this.start;c<w&&p<64;++c)r=o.charCodeAt(c),t||r<128?R[p>>2]|=r<<x[p++&3]:r<2048?(R[p>>2]|=(192|r>>6)<<x[p++&3],R[p>>2]|=(128|r&63)<<x[p++&3]):r<55296||r>=57344?(R[p>>2]|=(224|r>>12)<<x[p++&3],R[p>>2]|=(128|r>>6&63)<<x[p++&3],R[p>>2]|=(128|r&63)<<x[p++&3]):(r=65536+((r&1023)<<10|o.charCodeAt(++c)&1023),R[p>>2]|=(240|r>>18)<<x[p++&3],R[p>>2]|=(128|r>>12&63)<<x[p++&3],R[p>>2]|=(128|r>>6&63)<<x[p++&3],R[p>>2]|=(128|r&63)<<x[p++&3]);this.lastByteIndex=p,this.bytes+=p-this.start,p>=64?(this.start=p-64,this.hash(),this.hashed=!0):this.start=p}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var o=this.blocks,t=this.lastByteIndex;o[t>>2]|=y[t&3],t>=56&&(this.hashed||this.hash(),o[0]=o[16],o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),o[14]=this.bytes<<3,o[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},T.prototype.hash=function(){var o,t,r,c,p,w,R=this.blocks;this.first?(o=R[0]-680876937,o=(o<<7|o>>>25)-271733879<<0,c=(-1732584194^o&2004318071)+R[1]-117830708,c=(c<<12|c>>>20)+o<<0,r=(-271733879^c&(o^-271733879))+R[2]-1126478375,r=(r<<17|r>>>15)+c<<0,t=(o^r&(c^o))+R[3]-1316259209,t=(t<<22|t>>>10)+r<<0):(o=this.h0,t=this.h1,r=this.h2,c=this.h3,o+=(c^t&(r^c))+R[0]-680876936,o=(o<<7|o>>>25)+t<<0,c+=(r^o&(t^r))+R[1]-389564586,c=(c<<12|c>>>20)+o<<0,r+=(t^c&(o^t))+R[2]+606105819,r=(r<<17|r>>>15)+c<<0,t+=(o^r&(c^o))+R[3]-1044525330,t=(t<<22|t>>>10)+r<<0),o+=(c^t&(r^c))+R[4]-176418897,o=(o<<7|o>>>25)+t<<0,c+=(r^o&(t^r))+R[5]+1200080426,c=(c<<12|c>>>20)+o<<0,r+=(t^c&(o^t))+R[6]-1473231341,r=(r<<17|r>>>15)+c<<0,t+=(o^r&(c^o))+R[7]-45705983,t=(t<<22|t>>>10)+r<<0,o+=(c^t&(r^c))+R[8]+1770035416,o=(o<<7|o>>>25)+t<<0,c+=(r^o&(t^r))+R[9]-1958414417,c=(c<<12|c>>>20)+o<<0,r+=(t^c&(o^t))+R[10]-42063,r=(r<<17|r>>>15)+c<<0,t+=(o^r&(c^o))+R[11]-1990404162,t=(t<<22|t>>>10)+r<<0,o+=(c^t&(r^c))+R[12]+1804603682,o=(o<<7|o>>>25)+t<<0,c+=(r^o&(t^r))+R[13]-40341101,c=(c<<12|c>>>20)+o<<0,r+=(t^c&(o^t))+R[14]-1502002290,r=(r<<17|r>>>15)+c<<0,t+=(o^r&(c^o))+R[15]+1236535329,t=(t<<22|t>>>10)+r<<0,o+=(r^c&(t^r))+R[1]-165796510,o=(o<<5|o>>>27)+t<<0,c+=(t^r&(o^t))+R[6]-1069501632,c=(c<<9|c>>>23)+o<<0,r+=(o^t&(c^o))+R[11]+643717713,r=(r<<14|r>>>18)+c<<0,t+=(c^o&(r^c))+R[0]-373897302,t=(t<<20|t>>>12)+r<<0,o+=(r^c&(t^r))+R[5]-701558691,o=(o<<5|o>>>27)+t<<0,c+=(t^r&(o^t))+R[10]+38016083,c=(c<<9|c>>>23)+o<<0,r+=(o^t&(c^o))+R[15]-660478335,r=(r<<14|r>>>18)+c<<0,t+=(c^o&(r^c))+R[4]-405537848,t=(t<<20|t>>>12)+r<<0,o+=(r^c&(t^r))+R[9]+568446438,o=(o<<5|o>>>27)+t<<0,c+=(t^r&(o^t))+R[14]-1019803690,c=(c<<9|c>>>23)+o<<0,r+=(o^t&(c^o))+R[3]-187363961,r=(r<<14|r>>>18)+c<<0,t+=(c^o&(r^c))+R[8]+1163531501,t=(t<<20|t>>>12)+r<<0,o+=(r^c&(t^r))+R[13]-1444681467,o=(o<<5|o>>>27)+t<<0,c+=(t^r&(o^t))+R[2]-51403784,c=(c<<9|c>>>23)+o<<0,r+=(o^t&(c^o))+R[7]+1735328473,r=(r<<14|r>>>18)+c<<0,t+=(c^o&(r^c))+R[12]-1926607734,t=(t<<20|t>>>12)+r<<0,p=t^r,o+=(p^c)+R[5]-378558,o=(o<<4|o>>>28)+t<<0,c+=(p^o)+R[8]-2022574463,c=(c<<11|c>>>21)+o<<0,w=c^o,r+=(w^t)+R[11]+1839030562,r=(r<<16|r>>>16)+c<<0,t+=(w^r)+R[14]-35309556,t=(t<<23|t>>>9)+r<<0,p=t^r,o+=(p^c)+R[1]-1530992060,o=(o<<4|o>>>28)+t<<0,c+=(p^o)+R[4]+1272893353,c=(c<<11|c>>>21)+o<<0,w=c^o,r+=(w^t)+R[7]-155497632,r=(r<<16|r>>>16)+c<<0,t+=(w^r)+R[10]-1094730640,t=(t<<23|t>>>9)+r<<0,p=t^r,o+=(p^c)+R[13]+681279174,o=(o<<4|o>>>28)+t<<0,c+=(p^o)+R[0]-358537222,c=(c<<11|c>>>21)+o<<0,w=c^o,r+=(w^t)+R[3]-722521979,r=(r<<16|r>>>16)+c<<0,t+=(w^r)+R[6]+76029189,t=(t<<23|t>>>9)+r<<0,p=t^r,o+=(p^c)+R[9]-640364487,o=(o<<4|o>>>28)+t<<0,c+=(p^o)+R[12]-421815835,c=(c<<11|c>>>21)+o<<0,w=c^o,r+=(w^t)+R[15]+530742520,r=(r<<16|r>>>16)+c<<0,t+=(w^r)+R[2]-995338651,t=(t<<23|t>>>9)+r<<0,o+=(r^(t|~c))+R[0]-198630844,o=(o<<6|o>>>26)+t<<0,c+=(t^(o|~r))+R[7]+1126891415,c=(c<<10|c>>>22)+o<<0,r+=(o^(c|~t))+R[14]-1416354905,r=(r<<15|r>>>17)+c<<0,t+=(c^(r|~o))+R[5]-57434055,t=(t<<21|t>>>11)+r<<0,o+=(r^(t|~c))+R[12]+1700485571,o=(o<<6|o>>>26)+t<<0,c+=(t^(o|~r))+R[3]-1894986606,c=(c<<10|c>>>22)+o<<0,r+=(o^(c|~t))+R[10]-1051523,r=(r<<15|r>>>17)+c<<0,t+=(c^(r|~o))+R[1]-2054922799,t=(t<<21|t>>>11)+r<<0,o+=(r^(t|~c))+R[8]+1873313359,o=(o<<6|o>>>26)+t<<0,c+=(t^(o|~r))+R[15]-30611744,c=(c<<10|c>>>22)+o<<0,r+=(o^(c|~t))+R[6]-1560198380,r=(r<<15|r>>>17)+c<<0,t+=(c^(r|~o))+R[13]+1309151649,t=(t<<21|t>>>11)+r<<0,o+=(r^(t|~c))+R[4]-145523070,o=(o<<6|o>>>26)+t<<0,c+=(t^(o|~r))+R[11]-1120210379,c=(c<<10|c>>>22)+o<<0,r+=(o^(c|~t))+R[2]+718787259,r=(r<<15|r>>>17)+c<<0,t+=(c^(r|~o))+R[9]-343485551,t=(t<<21|t>>>11)+r<<0,this.first?(this.h0=o+1732584193<<0,this.h1=t-271733879<<0,this.h2=r-1732584194<<0,this.h3=c+271733878<<0,this.first=!1):(this.h0=this.h0+o<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+c<<0)},T.prototype.hex=function(){this.finalize();var o=this.h0,t=this.h1,r=this.h2,c=this.h3;return f[o>>4&15]+f[o&15]+f[o>>12&15]+f[o>>8&15]+f[o>>20&15]+f[o>>16&15]+f[o>>28&15]+f[o>>24&15]+f[t>>4&15]+f[t&15]+f[t>>12&15]+f[t>>8&15]+f[t>>20&15]+f[t>>16&15]+f[t>>28&15]+f[t>>24&15]+f[r>>4&15]+f[r&15]+f[r>>12&15]+f[r>>8&15]+f[r>>20&15]+f[r>>16&15]+f[r>>28&15]+f[r>>24&15]+f[c>>4&15]+f[c&15]+f[c>>12&15]+f[c>>8&15]+f[c>>20&15]+f[c>>16&15]+f[c>>28&15]+f[c>>24&15]},T.prototype.toString=T.prototype.hex,T.prototype.digest=function(o){if(o==="hex")return this.hex();this.finalize();var t=this.h0,r=this.h1,c=this.h2,p=this.h3,w=[t&255,t>>8&255,t>>16&255,t>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,p&255,p>>8&255,p>>16&255,p>>24&255];return w},T.prototype.array=T.prototype.digest,T.prototype.arrayBuffer=function(){this.finalize();var o=new ArrayBuffer(16),t=new Uint32Array(o);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,o},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.base64=function(){for(var o,t,r,c="",p=this.array(),w=0;w<15;)o=p[w++],t=p[w++],r=p[w++],c+=O[o>>>2]+O[(o<<4|t>>>4)&63]+O[(t<<2|r>>>6)&63]+O[r&63];return o=p[w],c+=O[o>>>2]+O[o<<4&63]+"==",c};var i=l();S?N.exports=i:(M.md5=i,d&&(I=(function(){return i}).call(i,A,i,N),I!==void 0&&(N.exports=I)))})()}).call(this,A("./node_modules/webpack/buildin/module.js")(V))},"./lib/request.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/typeof.js"),I=function(d){switch(N(d)){case"string":return d;case"boolean":return d?"true":"false";case"number":return isFinite(d)?d:"";default:return""}},L=function(d,C,f,y){return C=C||"&",f=f||"=",d===null&&(d=void 0),N(d)==="object"?Object.keys(d).map(function(x){var b=encodeURIComponent(I(x))+f;return Array.isArray(d[x])?d[x].map(function(O){return b+encodeURIComponent(I(O))}).join(C):b+encodeURIComponent(I(d[x]))}).filter(Boolean).join(C):""},j=function(d,C,f){var y={},x=C.getAllResponseHeaders();return x&&x.length>0&&x.trim().split(`
`).forEach(function(b){if(b){var O=b.indexOf(":"),U=b.substr(0,O).trim().toLowerCase(),H=b.substr(O+1).trim();y[U]=H}}),{error:d,statusCode:C.status,statusMessage:C.statusText,headers:y,body:f}},M=function(d,C){return!C&&C==="text"?d.responseText:d.response},s=function(d,C){var f=(d.method||"GET").toUpperCase(),y=d.url;if(d.qs){var x=L(d.qs);x&&(y+=(y.indexOf("?")===-1?"?":"&")+x)}var b=new XMLHttpRequest;if(b.open(f,y,!0),b.responseType=d.dataType||"text",d.xhrFields)for(var O in d.xhrFields)b[O]=d.xhrFields[O];var U=d.headers;if(U)for(var H in U)U.hasOwnProperty(H)&&H.toLowerCase()!=="content-length"&&H.toLowerCase()!=="user-agent"&&H.toLowerCase()!=="origin"&&H.toLowerCase()!=="host"&&b.setRequestHeader(H,U[H]);return d.onProgress&&b.upload&&(b.upload.onprogress=d.onProgress),d.onDownloadProgress&&(b.onprogress=d.onDownloadProgress),d.timeout&&(b.timeout=d.timeout),b.ontimeout=function(q){var h=new Error("timeout");C(j(h,b))},b.onload=function(){C(j(null,b,M(b,d.dataType)))},b.onerror=function(q){var h=M(b,d.dataType);if(h)C(j(null,b,h));else{var l=b.statusText;!l&&b.status===0&&(l=new Error("CORS blocked or network error")),C(j(l,b,h))}},b.send(d.body||""),b};V.exports=s},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(V,le){function A(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}V.exports=A,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function I(j,M){for(var s=0;s<M.length;s++){var S=M[s];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,N(S.key),S)}}function L(j,M,s){return M&&I(j.prototype,M),s&&I(j,s),Object.defineProperty(j,"prototype",{writable:!1}),j}V.exports=L,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function I(L,j,M){return(j=N(j))in L?Object.defineProperty(L,j,{value:M,enumerable:!0,configurable:!0,writable:!0}):L[j]=M,L}V.exports=I,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/typeof.js").default;function I(L,j){if(N(L)!="object"||!L)return L;var M=L[Symbol.toPrimitive];if(M!==void 0){var s=M.call(L,j||"default");if(N(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(L)}V.exports=I,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/typeof.js").default,I=A("./node_modules/@babel/runtime/helpers/toPrimitive.js");function L(j){var M=I(j,"string");return N(M)=="symbol"?M:M+""}V.exports=L,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(V,le){function A(N){"@babel/helpers - typeof";return V.exports=A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},V.exports.__esModule=!0,V.exports.default=V.exports,A(N)}V.exports=A,V.exports.__esModule=!0,V.exports.default=V.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(V,le,A){const N=A("./node_modules/fast-xml-parser/src/validator.js"),I=A("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),L=A("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");V.exports={XMLParser:I,XMLValidator:N,XMLBuilder:L}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(V,le){function A(N){return typeof N=="function"?N:Array.isArray(N)?I=>{for(const L of N)if(typeof L=="string"&&I===L||L instanceof RegExp&&L.test(I))return!0}:()=>!1}V.exports=A},"./node_modules/fast-xml-parser/src/util.js":function(V,le,A){const N=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",I=N+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",L="["+N+"]["+I+"]*",j=new RegExp("^"+L+"$"),M=function(S,d){const C=[];let f=d.exec(S);for(;f;){const y=[];y.startIndex=d.lastIndex-f[0].length;const x=f.length;for(let b=0;b<x;b++)y.push(f[b]);C.push(y),f=d.exec(S)}return C},s=function(S){const d=j.exec(S);return!(d===null||typeof d>"u")};le.isExist=function(S){return typeof S<"u"},le.isEmptyObject=function(S){return Object.keys(S).length===0},le.merge=function(S,d,C){if(d){const f=Object.keys(d),y=f.length;for(let x=0;x<y;x++)C==="strict"?S[f[x]]=[d[f[x]]]:S[f[x]]=d[f[x]]}},le.getValue=function(S){return le.isExist(S)?S:""},le.isName=s,le.getAllMatches=M,le.nameRegexp=L},"./node_modules/fast-xml-parser/src/validator.js":function(V,le,A){const N=A("./node_modules/fast-xml-parser/src/util.js"),I={allowBooleanAttributes:!1,unpairedTags:[]};le.validate=function(h,l){l=Object.assign({},I,l);const T=[];let i=!1,o=!1;h[0]==="\uFEFF"&&(h=h.substr(1));for(let t=0;t<h.length;t++)if(h[t]==="<"&&h[t+1]==="?"){if(t+=2,t=j(h,t),t.err)return t}else if(h[t]==="<"){let r=t;if(t++,h[t]==="!"){t=M(h,t);continue}else{let c=!1;h[t]==="/"&&(c=!0,t++);let p="";for(;t<h.length&&h[t]!==">"&&h[t]!==" "&&h[t]!=="	"&&h[t]!==`
`&&h[t]!=="\r";t++)p+=h[t];if(p=p.trim(),p[p.length-1]==="/"&&(p=p.substring(0,p.length-1),t--),!U(p)){let F;return p.trim().length===0?F="Invalid space after '<'.":F="Tag '"+p+"' is an invalid name.",b("InvalidTag",F,H(h,t))}const w=d(h,t);if(w===!1)return b("InvalidAttr","Attributes for '"+p+"' have open quote.",H(h,t));let R=w.value;if(t=w.index,R[R.length-1]==="/"){const F=t-R.length;R=R.substring(0,R.length-1);const K=f(R,l);if(K===!0)i=!0;else return b(K.err.code,K.err.msg,H(h,F+K.err.line))}else if(c)if(w.tagClosed){if(R.trim().length>0)return b("InvalidTag","Closing tag '"+p+"' can't have attributes or invalid starting.",H(h,r));if(T.length===0)return b("InvalidTag","Closing tag '"+p+"' has not been opened.",H(h,r));{const F=T.pop();if(p!==F.tagName){let K=H(h,F.tagStartPos);return b("InvalidTag","Expected closing tag '"+F.tagName+"' (opened in line "+K.line+", col "+K.col+") instead of closing tag '"+p+"'.",H(h,r))}T.length==0&&(o=!0)}}else return b("InvalidTag","Closing tag '"+p+"' doesn't have proper closing.",H(h,t));else{const F=f(R,l);if(F!==!0)return b(F.err.code,F.err.msg,H(h,t-R.length+F.err.line));if(o===!0)return b("InvalidXml","Multiple possible root nodes found.",H(h,t));l.unpairedTags.indexOf(p)!==-1||T.push({tagName:p,tagStartPos:r}),i=!0}for(t++;t<h.length;t++)if(h[t]==="<")if(h[t+1]==="!"){t++,t=M(h,t);continue}else if(h[t+1]==="?"){if(t=j(h,++t),t.err)return t}else break;else if(h[t]==="&"){const F=x(h,t);if(F==-1)return b("InvalidChar","char '&' is not expected.",H(h,t));t=F}else if(o===!0&&!L(h[t]))return b("InvalidXml","Extra text at the end",H(h,t));h[t]==="<"&&t--}}else{if(L(h[t]))continue;return b("InvalidChar","char '"+h[t]+"' is not expected.",H(h,t))}if(i){if(T.length==1)return b("InvalidTag","Unclosed tag '"+T[0].tagName+"'.",H(h,T[0].tagStartPos));if(T.length>0)return b("InvalidXml","Invalid '"+JSON.stringify(T.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return b("InvalidXml","Start tag expected.",1);return!0};function L(h){return h===" "||h==="	"||h===`
`||h==="\r"}function j(h,l){const T=l;for(;l<h.length;l++)if(h[l]=="?"||h[l]==" "){const i=h.substr(T,l-T);if(l>5&&i==="xml")return b("InvalidXml","XML declaration allowed only at the start of the document.",H(h,l));if(h[l]=="?"&&h[l+1]==">"){l++;break}else continue}return l}function M(h,l){if(h.length>l+5&&h[l+1]==="-"&&h[l+2]==="-"){for(l+=3;l<h.length;l++)if(h[l]==="-"&&h[l+1]==="-"&&h[l+2]===">"){l+=2;break}}else if(h.length>l+8&&h[l+1]==="D"&&h[l+2]==="O"&&h[l+3]==="C"&&h[l+4]==="T"&&h[l+5]==="Y"&&h[l+6]==="P"&&h[l+7]==="E"){let T=1;for(l+=8;l<h.length;l++)if(h[l]==="<")T++;else if(h[l]===">"&&(T--,T===0))break}else if(h.length>l+9&&h[l+1]==="["&&h[l+2]==="C"&&h[l+3]==="D"&&h[l+4]==="A"&&h[l+5]==="T"&&h[l+6]==="A"&&h[l+7]==="["){for(l+=8;l<h.length;l++)if(h[l]==="]"&&h[l+1]==="]"&&h[l+2]===">"){l+=2;break}}return l}const s='"',S="'";function d(h,l){let T="",i="",o=!1;for(;l<h.length;l++){if(h[l]===s||h[l]===S)i===""?i=h[l]:i!==h[l]||(i="");else if(h[l]===">"&&i===""){o=!0;break}T+=h[l]}return i!==""?!1:{value:T,index:l,tagClosed:o}}const C=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function f(h,l){const T=N.getAllMatches(h,C),i={};for(let o=0;o<T.length;o++){if(T[o][1].length===0)return b("InvalidAttr","Attribute '"+T[o][2]+"' has no space in starting.",q(T[o]));if(T[o][3]!==void 0&&T[o][4]===void 0)return b("InvalidAttr","Attribute '"+T[o][2]+"' is without value.",q(T[o]));if(T[o][3]===void 0&&!l.allowBooleanAttributes)return b("InvalidAttr","boolean attribute '"+T[o][2]+"' is not allowed.",q(T[o]));const t=T[o][2];if(!O(t))return b("InvalidAttr","Attribute '"+t+"' is an invalid name.",q(T[o]));if(!i.hasOwnProperty(t))i[t]=1;else return b("InvalidAttr","Attribute '"+t+"' is repeated.",q(T[o]))}return!0}function y(h,l){let T=/\d/;for(h[l]==="x"&&(l++,T=/[\da-fA-F]/);l<h.length;l++){if(h[l]===";")return l;if(!h[l].match(T))break}return-1}function x(h,l){if(l++,h[l]===";")return-1;if(h[l]==="#")return l++,y(h,l);let T=0;for(;l<h.length;l++,T++)if(!(h[l].match(/\w/)&&T<20)){if(h[l]===";")break;return-1}return l}function b(h,l,T){return{err:{code:h,msg:l,line:T.line||T,col:T.col}}}function O(h){return N.isName(h)}function U(h){return N.isName(h)}function H(h,l){const T=h.substring(0,l).split(/\r?\n/);return{line:T.length,col:T[T.length-1].length+1}}function q(h){return h.startIndex+h[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(V,le,A){const N=A("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),I=A("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),L={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(d,C){return C},attributeValueProcessor:function(d,C){return C},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function j(d){this.options=Object.assign({},L,d),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=I(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=S),this.processTextOrObjNode=M,this.options.format?(this.indentate=s,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}j.prototype.build=function(d){return this.options.preserveOrder?N(d,this.options):(Array.isArray(d)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(d={[this.options.arrayNodeName]:d}),this.j2x(d,0,[]).val)},j.prototype.j2x=function(d,C,f){let y="",x="";const b=f.join(".");for(let O in d)if(Object.prototype.hasOwnProperty.call(d,O))if(typeof d[O]>"u")this.isAttribute(O)&&(x+="");else if(d[O]===null)this.isAttribute(O)?x+="":O[0]==="?"?x+=this.indentate(C)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(C)+"<"+O+"/"+this.tagEndChar;else if(d[O]instanceof Date)x+=this.buildTextValNode(d[O],O,"",C);else if(typeof d[O]!="object"){const U=this.isAttribute(O);if(U&&!this.ignoreAttributesFn(U,b))y+=this.buildAttrPairStr(U,""+d[O]);else if(!U)if(O===this.options.textNodeName){let H=this.options.tagValueProcessor(O,""+d[O]);x+=this.replaceEntitiesValue(H)}else x+=this.buildTextValNode(d[O],O,"",C)}else if(Array.isArray(d[O])){const U=d[O].length;let H="",q="";for(let h=0;h<U;h++){const l=d[O][h];if(!(typeof l>"u"))if(l===null)O[0]==="?"?x+=this.indentate(C)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(C)+"<"+O+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){const T=this.j2x(l,C+1,f.concat(O));H+=T.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(q+=T.attrStr)}else H+=this.processTextOrObjNode(l,O,C,f);else if(this.options.oneListGroup){let T=this.options.tagValueProcessor(O,l);T=this.replaceEntitiesValue(T),H+=T}else H+=this.buildTextValNode(l,O,"",C)}this.options.oneListGroup&&(H=this.buildObjectNode(H,O,q,C)),x+=H}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){const U=Object.keys(d[O]),H=U.length;for(let q=0;q<H;q++)y+=this.buildAttrPairStr(U[q],""+d[O][U[q]])}else x+=this.processTextOrObjNode(d[O],O,C,f);return{attrStr:y,val:x}},j.prototype.buildAttrPairStr=function(d,C){return C=this.options.attributeValueProcessor(d,""+C),C=this.replaceEntitiesValue(C),this.options.suppressBooleanAttributes&&C==="true"?" "+d:" "+d+'="'+C+'"'};function M(d,C,f,y){const x=this.j2x(d,f+1,y.concat(C));return d[this.options.textNodeName]!==void 0&&Object.keys(d).length===1?this.buildTextValNode(d[this.options.textNodeName],C,x.attrStr,f):this.buildObjectNode(x.val,C,x.attrStr,f)}j.prototype.buildObjectNode=function(d,C,f,y){if(d==="")return C[0]==="?"?this.indentate(y)+"<"+C+f+"?"+this.tagEndChar:this.indentate(y)+"<"+C+f+this.closeTag(C)+this.tagEndChar;{let x="</"+C+this.tagEndChar,b="";return C[0]==="?"&&(b="?",x=""),(f||f==="")&&d.indexOf("<")===-1?this.indentate(y)+"<"+C+f+b+">"+d+x:this.options.commentPropName!==!1&&C===this.options.commentPropName&&b.length===0?this.indentate(y)+`<!--${d}-->`+this.newLine:this.indentate(y)+"<"+C+f+b+this.tagEndChar+d+this.indentate(y)+x}},j.prototype.closeTag=function(d){let C="";return this.options.unpairedTags.indexOf(d)!==-1?this.options.suppressUnpairedNode||(C="/"):this.options.suppressEmptyNode?C="/":C=`></${d}`,C},j.prototype.buildTextValNode=function(d,C,f,y){if(this.options.cdataPropName!==!1&&C===this.options.cdataPropName)return this.indentate(y)+`<![CDATA[${d}]]>`+this.newLine;if(this.options.commentPropName!==!1&&C===this.options.commentPropName)return this.indentate(y)+`<!--${d}-->`+this.newLine;if(C[0]==="?")return this.indentate(y)+"<"+C+f+"?"+this.tagEndChar;{let x=this.options.tagValueProcessor(C,d);return x=this.replaceEntitiesValue(x),x===""?this.indentate(y)+"<"+C+f+this.closeTag(C)+this.tagEndChar:this.indentate(y)+"<"+C+f+">"+x+"</"+C+this.tagEndChar}},j.prototype.replaceEntitiesValue=function(d){if(d&&d.length>0&&this.options.processEntities)for(let C=0;C<this.options.entities.length;C++){const f=this.options.entities[C];d=d.replace(f.regex,f.val)}return d};function s(d){return this.options.indentBy.repeat(d)}function S(d){return d.startsWith(this.options.attributeNamePrefix)&&d!==this.options.textNodeName?d.substr(this.attrPrefixLen):!1}V.exports=j},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(V,le){const A=`
`;function N(S,d){let C="";return d.format&&d.indentBy.length>0&&(C=A),I(S,d,"",C)}function I(S,d,C,f){let y="",x=!1;for(let b=0;b<S.length;b++){const O=S[b],U=L(O);if(U===void 0)continue;let H="";if(C.length===0?H=U:H=`${C}.${U}`,U===d.textNodeName){let i=O[U];M(H,d)||(i=d.tagValueProcessor(U,i),i=s(i,d)),x&&(y+=f),y+=i,x=!1;continue}else if(U===d.cdataPropName){x&&(y+=f),y+=`<![CDATA[${O[U][0][d.textNodeName]}]]>`,x=!1;continue}else if(U===d.commentPropName){y+=f+`<!--${O[U][0][d.textNodeName]}-->`,x=!0;continue}else if(U[0]==="?"){const i=j(O[":@"],d),o=U==="?xml"?"":f;let t=O[U][0][d.textNodeName];t=t.length!==0?" "+t:"",y+=o+`<${U}${t}${i}?>`,x=!0;continue}let q=f;q!==""&&(q+=d.indentBy);const h=j(O[":@"],d),l=f+`<${U}${h}`,T=I(O[U],d,H,q);d.unpairedTags.indexOf(U)!==-1?d.suppressUnpairedNode?y+=l+">":y+=l+"/>":(!T||T.length===0)&&d.suppressEmptyNode?y+=l+"/>":T&&T.endsWith(">")?y+=l+`>${T}${f}</${U}>`:(y+=l+">",T&&f!==""&&(T.includes("/>")||T.includes("</"))?y+=f+d.indentBy+T+f:y+=T,y+=`</${U}>`),x=!0}return y}function L(S){const d=Object.keys(S);for(let C=0;C<d.length;C++){const f=d[C];if(S.hasOwnProperty(f)&&f!==":@")return f}}function j(S,d){let C="";if(S&&!d.ignoreAttributes)for(let f in S){if(!S.hasOwnProperty(f))continue;let y=d.attributeValueProcessor(f,S[f]);y=s(y,d),y===!0&&d.suppressBooleanAttributes?C+=` ${f.substr(d.attributeNamePrefix.length)}`:C+=` ${f.substr(d.attributeNamePrefix.length)}="${y}"`}return C}function M(S,d){S=S.substr(0,S.length-d.textNodeName.length-1);let C=S.substr(S.lastIndexOf(".")+1);for(let f in d.stopNodes)if(d.stopNodes[f]===S||d.stopNodes[f]==="*."+C)return!0;return!1}function s(S,d){if(S&&S.length>0&&d.processEntities)for(let C=0;C<d.entities.length;C++){const f=d.entities[C];S=S.replace(f.regex,f.val)}return S}V.exports=N},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(V,le,A){const N=A("./node_modules/fast-xml-parser/src/util.js");function I(f,y){const x={};if(f[y+3]==="O"&&f[y+4]==="C"&&f[y+5]==="T"&&f[y+6]==="Y"&&f[y+7]==="P"&&f[y+8]==="E"){y=y+9;let b=1,O=!1,U=!1,H="";for(;y<f.length;y++)if(f[y]==="<"&&!U){if(O&&M(f,y))y+=7,[entityName,val,y]=L(f,y+1),val.indexOf("&")===-1&&(x[C(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(O&&s(f,y))y+=8;else if(O&&S(f,y))y+=8;else if(O&&d(f,y))y+=9;else if(j)U=!0;else throw new Error("Invalid DOCTYPE");b++,H=""}else if(f[y]===">"){if(U?f[y-1]==="-"&&f[y-2]==="-"&&(U=!1,b--):b--,b===0)break}else f[y]==="["?O=!0:H+=f[y];if(b!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:x,i:y}}function L(f,y){let x="";for(;y<f.length&&f[y]!=="'"&&f[y]!=='"';y++)x+=f[y];if(x=x.trim(),x.indexOf(" ")!==-1)throw new Error("External entites are not supported");const b=f[y++];let O="";for(;y<f.length&&f[y]!==b;y++)O+=f[y];return[x,O,y]}function j(f,y){return f[y+1]==="!"&&f[y+2]==="-"&&f[y+3]==="-"}function M(f,y){return f[y+1]==="!"&&f[y+2]==="E"&&f[y+3]==="N"&&f[y+4]==="T"&&f[y+5]==="I"&&f[y+6]==="T"&&f[y+7]==="Y"}function s(f,y){return f[y+1]==="!"&&f[y+2]==="E"&&f[y+3]==="L"&&f[y+4]==="E"&&f[y+5]==="M"&&f[y+6]==="E"&&f[y+7]==="N"&&f[y+8]==="T"}function S(f,y){return f[y+1]==="!"&&f[y+2]==="A"&&f[y+3]==="T"&&f[y+4]==="T"&&f[y+5]==="L"&&f[y+6]==="I"&&f[y+7]==="S"&&f[y+8]==="T"}function d(f,y){return f[y+1]==="!"&&f[y+2]==="N"&&f[y+3]==="O"&&f[y+4]==="T"&&f[y+5]==="A"&&f[y+6]==="T"&&f[y+7]==="I"&&f[y+8]==="O"&&f[y+9]==="N"}function C(f){if(N.isName(f))return f;throw new Error(`Invalid entity name ${f}`)}V.exports=I},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(V,le){const A={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(I,L){return L},attributeValueProcessor:function(I,L){return L},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(I,L,j){return I}},N=function(I){return Object.assign({},A,I)};le.buildOptions=N,le.defaultOptions=A},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(V,le,A){const N=A("./node_modules/fast-xml-parser/src/util.js"),I=A("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),L=A("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),j=A("./node_modules/strnum/strnum.js"),M=A("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class s{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,c)=>String.fromCharCode(Number.parseInt(c,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,c)=>String.fromCharCode(Number.parseInt(c,16))}},this.addExternalEntities=S,this.parseXml=x,this.parseTextData=d,this.resolveNameSpace=C,this.buildAttributesMap=y,this.isItStopNode=H,this.replaceEntitiesValue=O,this.readStopNodeData=T,this.saveTextToParentTag=U,this.addChild=b,this.ignoreAttributesFn=M(this.options.ignoreAttributes)}}function S(o){const t=Object.keys(o);for(let r=0;r<t.length;r++){const c=t[r];this.lastEntities[c]={regex:new RegExp("&"+c+";","g"),val:o[c]}}}function d(o,t,r,c,p,w,R){if(o!==void 0&&(this.options.trimValues&&!c&&(o=o.trim()),o.length>0)){R||(o=this.replaceEntitiesValue(o));const F=this.options.tagValueProcessor(t,o,r,p,w);return F==null?o:typeof F!=typeof o||F!==o?F:this.options.trimValues?i(o,this.options.parseTagValue,this.options.numberParseOptions):o.trim()===o?i(o,this.options.parseTagValue,this.options.numberParseOptions):o}}function C(o){if(this.options.removeNSPrefix){const t=o.split(":"),r=o.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(o=r+t[1])}return o}const f=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function y(o,t,r){if(this.options.ignoreAttributes!==!0&&typeof o=="string"){const c=N.getAllMatches(o,f),p=c.length,w={};for(let R=0;R<p;R++){const F=this.resolveNameSpace(c[R][1]);if(this.ignoreAttributesFn(F,t))continue;let K=c[R][4],J=this.options.attributeNamePrefix+F;if(F.length)if(this.options.transformAttributeName&&(J=this.options.transformAttributeName(J)),J==="__proto__"&&(J="#__proto__"),K!==void 0){this.options.trimValues&&(K=K.trim()),K=this.replaceEntitiesValue(K);const Q=this.options.attributeValueProcessor(F,K,t);Q==null?w[J]=K:typeof Q!=typeof K||Q!==K?w[J]=Q:w[J]=i(K,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(w[J]=!0)}if(!Object.keys(w).length)return;if(this.options.attributesGroupName){const R={};return R[this.options.attributesGroupName]=w,R}return w}}const x=function(o){const t=new I("!xml");let r=t,c="",p="";for(let w=0;w<o.length;w++)if(o[w]==="<")if(o[w+1]==="/"){const F=h(o,">",w,"Closing Tag is not closed.");let K=o.substring(w+2,F).trim();if(this.options.removeNSPrefix){const ee=K.indexOf(":");ee!==-1&&(K=K.substr(ee+1))}this.options.transformTagName&&(K=this.options.transformTagName(K)),r&&(c=this.saveTextToParentTag(c,r,p));const J=p.substring(p.lastIndexOf(".")+1);if(K&&this.options.unpairedTags.indexOf(K)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${K}>`);let Q=0;J&&this.options.unpairedTags.indexOf(J)!==-1?(Q=p.lastIndexOf(".",p.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Q=p.lastIndexOf("."),p=p.substring(0,Q),r=this.tagsNodeStack.pop(),c="",w=F}else if(o[w+1]==="?"){let F=l(o,w,!1,"?>");if(!F)throw new Error("Pi Tag is not closed.");if(c=this.saveTextToParentTag(c,r,p),!(this.options.ignoreDeclaration&&F.tagName==="?xml"||this.options.ignorePiTags)){const K=new I(F.tagName);K.add(this.options.textNodeName,""),F.tagName!==F.tagExp&&F.attrExpPresent&&(K[":@"]=this.buildAttributesMap(F.tagExp,p,F.tagName)),this.addChild(r,K,p)}w=F.closeIndex+1}else if(o.substr(w+1,3)==="!--"){const F=h(o,"-->",w+4,"Comment is not closed.");if(this.options.commentPropName){const K=o.substring(w+4,F-2);c=this.saveTextToParentTag(c,r,p),r.add(this.options.commentPropName,[{[this.options.textNodeName]:K}])}w=F}else if(o.substr(w+1,2)==="!D"){const F=L(o,w);this.docTypeEntities=F.entities,w=F.i}else if(o.substr(w+1,2)==="!["){const F=h(o,"]]>",w,"CDATA is not closed.")-2,K=o.substring(w+9,F);c=this.saveTextToParentTag(c,r,p);let J=this.parseTextData(K,r.tagname,p,!0,!1,!0,!0);J==null&&(J=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:K}]):r.add(this.options.textNodeName,J),w=F+2}else{let F=l(o,w,this.options.removeNSPrefix),K=F.tagName;const J=F.rawTagName;let Q=F.tagExp,ee=F.attrExpPresent,te=F.closeIndex;this.options.transformTagName&&(K=this.options.transformTagName(K)),r&&c&&r.tagname!=="!xml"&&(c=this.saveTextToParentTag(c,r,p,!1));const Ce=r;if(Ce&&this.options.unpairedTags.indexOf(Ce.tagname)!==-1&&(r=this.tagsNodeStack.pop(),p=p.substring(0,p.lastIndexOf("."))),K!==t.tagname&&(p+=p?"."+K:K),this.isItStopNode(this.options.stopNodes,p,K)){let ce="";if(Q.length>0&&Q.lastIndexOf("/")===Q.length-1)K[K.length-1]==="/"?(K=K.substr(0,K.length-1),p=p.substr(0,p.length-1),Q=K):Q=Q.substr(0,Q.length-1),w=F.closeIndex;else if(this.options.unpairedTags.indexOf(K)!==-1)w=F.closeIndex;else{const Z=this.readStopNodeData(o,J,te+1);if(!Z)throw new Error(`Unexpected end of ${J}`);w=Z.i,ce=Z.tagContent}const re=new I(K);K!==Q&&ee&&(re[":@"]=this.buildAttributesMap(Q,p,K)),ce&&(ce=this.parseTextData(ce,K,p,!0,ee,!0,!0)),p=p.substr(0,p.lastIndexOf(".")),re.add(this.options.textNodeName,ce),this.addChild(r,re,p)}else{if(Q.length>0&&Q.lastIndexOf("/")===Q.length-1){K[K.length-1]==="/"?(K=K.substr(0,K.length-1),p=p.substr(0,p.length-1),Q=K):Q=Q.substr(0,Q.length-1),this.options.transformTagName&&(K=this.options.transformTagName(K));const ce=new I(K);K!==Q&&ee&&(ce[":@"]=this.buildAttributesMap(Q,p,K)),this.addChild(r,ce,p),p=p.substr(0,p.lastIndexOf("."))}else{const ce=new I(K);this.tagsNodeStack.push(r),K!==Q&&ee&&(ce[":@"]=this.buildAttributesMap(Q,p,K)),this.addChild(r,ce,p),r=ce}c="",w=te}}else c+=o[w];return t.child};function b(o,t,r){const c=this.options.updateTag(t.tagname,r,t[":@"]);c===!1||(typeof c=="string"&&(t.tagname=c),o.addChild(t))}const O=function(o){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];o=o.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];o=o.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];o=o.replace(r.regex,r.val)}o=o.replace(this.ampEntity.regex,this.ampEntity.val)}return o};function U(o,t,r,c){return o&&(c===void 0&&(c=Object.keys(t.child).length===0),o=this.parseTextData(o,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,c),o!==void 0&&o!==""&&t.add(this.options.textNodeName,o),o=""),o}function H(o,t,r){const c="*."+r;for(const p in o){const w=o[p];if(c===w||t===w)return!0}return!1}function q(o,t,r=">"){let c,p="";for(let w=t;w<o.length;w++){let R=o[w];if(c)R===c&&(c="");else if(R==='"'||R==="'")c=R;else if(R===r[0])if(r[1]){if(o[w+1]===r[1])return{data:p,index:w}}else return{data:p,index:w};else R==="	"&&(R=" ");p+=R}}function h(o,t,r,c){const p=o.indexOf(t,r);if(p===-1)throw new Error(c);return p+t.length-1}function l(o,t,r,c=">"){const p=q(o,t+1,c);if(!p)return;let w=p.data;const R=p.index,F=w.search(/\s/);let K=w,J=!0;F!==-1&&(K=w.substring(0,F),w=w.substring(F+1).trimStart());const Q=K;if(r){const ee=K.indexOf(":");ee!==-1&&(K=K.substr(ee+1),J=K!==p.data.substr(ee+1))}return{tagName:K,tagExp:w,closeIndex:R,attrExpPresent:J,rawTagName:Q}}function T(o,t,r){const c=r;let p=1;for(;r<o.length;r++)if(o[r]==="<")if(o[r+1]==="/"){const w=h(o,">",r,`${t} is not closed`);if(o.substring(r+2,w).trim()===t&&(p--,p===0))return{tagContent:o.substring(c,r),i:w};r=w}else if(o[r+1]==="?")r=h(o,"?>",r+1,"StopNode is not closed.");else if(o.substr(r+1,3)==="!--")r=h(o,"-->",r+3,"StopNode is not closed.");else if(o.substr(r+1,2)==="![")r=h(o,"]]>",r,"StopNode is not closed.")-2;else{const w=l(o,r,">");w&&((w&&w.tagName)===t&&w.tagExp[w.tagExp.length-1]!=="/"&&p++,r=w.closeIndex)}}function i(o,t,r){if(t&&typeof o=="string"){const c=o.trim();return c==="true"?!0:c==="false"?!1:j(o,r)}else return N.isExist(o)?o:""}V.exports=s},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(V,le,A){const{buildOptions:N}=A("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),I=A("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:L}=A("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),j=A("./node_modules/fast-xml-parser/src/validator.js");class M{constructor(S){this.externalEntities={},this.options=N(S)}parse(S,d){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(d){d===!0&&(d={});const y=j.validate(S,d);if(y!==!0)throw Error(`${y.err.msg}:${y.err.line}:${y.err.col}`)}const C=new I(this.options);C.addExternalEntities(this.externalEntities);const f=C.parseXml(S);return this.options.preserveOrder||f===void 0?f:L(f,this.options)}addEntity(S,d){if(d.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(d==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[S]=d}}V.exports=M},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(V,le,A){function N(s,S){return I(s,S)}function I(s,S,d){let C;const f={};for(let y=0;y<s.length;y++){const x=s[y],b=L(x);let O="";if(d===void 0?O=b:O=d+"."+b,b===S.textNodeName)C===void 0?C=x[b]:C+=""+x[b];else{if(b===void 0)continue;if(x[b]){let U=I(x[b],S,O);const H=M(U,S);x[":@"]?j(U,x[":@"],O,S):Object.keys(U).length===1&&U[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?U=U[S.textNodeName]:Object.keys(U).length===0&&(S.alwaysCreateTextNode?U[S.textNodeName]="":U=""),f[b]!==void 0&&f.hasOwnProperty(b)?(Array.isArray(f[b])||(f[b]=[f[b]]),f[b].push(U)):S.isArray(b,O,H)?f[b]=[U]:f[b]=U}}}return typeof C=="string"?C.length>0&&(f[S.textNodeName]=C):C!==void 0&&(f[S.textNodeName]=C),f}function L(s){const S=Object.keys(s);for(let d=0;d<S.length;d++){const C=S[d];if(C!==":@")return C}}function j(s,S,d,C){if(S){const f=Object.keys(S),y=f.length;for(let x=0;x<y;x++){const b=f[x];C.isArray(b,d+"."+b,!0,!0)?s[b]=[S[b]]:s[b]=S[b]}}}function M(s,S){const{textNodeName:d}=S,C=Object.keys(s).length;return!!(C===0||C===1&&(s[d]||typeof s[d]=="boolean"||s[d]===0))}le.prettify=N},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(V,le,A){class N{constructor(L){this.tagname=L,this.child=[],this[":@"]={}}add(L,j){L==="__proto__"&&(L="#__proto__"),this.child.push({[L]:j})}addChild(L){L.tagname==="__proto__"&&(L.tagname="#__proto__"),L[":@"]&&Object.keys(L[":@"]).length>0?this.child.push({[L.tagname]:L.child,":@":L[":@"]}):this.child.push({[L.tagname]:L.child})}}V.exports=N},"./node_modules/process/browser.js":function(V,le){var A=V.exports={},N,I;function L(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?N=setTimeout:N=L}catch{N=L}try{typeof clearTimeout=="function"?I=clearTimeout:I=j}catch{I=j}})();function M(U){if(N===setTimeout)return setTimeout(U,0);if((N===L||!N)&&setTimeout)return N=setTimeout,setTimeout(U,0);try{return N(U,0)}catch{try{return N.call(null,U,0)}catch{return N.call(this,U,0)}}}function s(U){if(I===clearTimeout)return clearTimeout(U);if((I===j||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(U);try{return I(U)}catch{try{return I.call(null,U)}catch{return I.call(this,U)}}}var S=[],d=!1,C,f=-1;function y(){!d||!C||(d=!1,C.length?S=C.concat(S):f=-1,S.length&&x())}function x(){if(!d){var U=M(y);d=!0;for(var H=S.length;H;){for(C=S,S=[];++f<H;)C&&C[f].run();f=-1,H=S.length}C=null,d=!1,s(U)}}A.nextTick=function(U){var H=new Array(arguments.length-1);if(arguments.length>1)for(var q=1;q<arguments.length;q++)H[q-1]=arguments[q];S.push(new b(U,H)),S.length===1&&!d&&M(x)};function b(U,H){this.fun=U,this.array=H}b.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={};function O(){}A.on=O,A.addListener=O,A.once=O,A.off=O,A.removeListener=O,A.removeAllListeners=O,A.emit=O,A.prependListener=O,A.prependOnceListener=O,A.listeners=function(U){return[]},A.binding=function(U){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(U){throw new Error("process.chdir is not supported")},A.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(V,le){const A=/^[-+]?0x[a-fA-F0-9]+$/,N=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,I={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function L(s,S={}){if(S=Object.assign({},I,S),!s||typeof s!="string")return s;let d=s.trim();if(S.skipLike!==void 0&&S.skipLike.test(d))return s;if(s==="0")return 0;if(S.hex&&A.test(d))return M(d,16);if(d.search(/[eE]/)!==-1){const C=d.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(C){if(S.leadingZeros)d=(C[1]||"")+C[3];else if(!(C[2]==="0"&&C[3][0]==="."))return s;return S.eNotation?Number(d):s}else return s}else{const C=N.exec(d);if(C){const f=C[1],y=C[2];let x=j(C[3]);if(!S.leadingZeros&&y.length>0&&f&&d[2]!==".")return s;if(!S.leadingZeros&&y.length>0&&!f&&d[1]!==".")return s;if(S.leadingZeros&&y===s)return 0;{const b=Number(d),O=""+b;return O.search(/[eE]/)!==-1?S.eNotation?b:s:d.indexOf(".")!==-1?O==="0"&&x===""||O===x||f&&O==="-"+x?b:s:y?x===O||f+x===O?b:s:d===O||d===f+O?b:s}}else return s}}function j(s){return s&&s.indexOf(".")!==-1&&(s=s.replace(/0+$/,""),s==="."?s="0":s[0]==="."?s="0"+s:s[s.length-1]==="."&&(s=s.substr(0,s.length-1))),s}function M(s,S){if(parseInt)return parseInt(s,S);if(Number.parseInt)return Number.parseInt(s,S);if(window&&window.parseInt)return window.parseInt(s,S);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}V.exports=L},"./node_modules/webpack/buildin/amd-options.js":function(V,le){(function(A){V.exports=A}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(V,le){V.exports=function(A){return A.webpackPolyfill||(A.deprecate=function(){},A.paths=[],A.children||(A.children=[]),Object.defineProperty(A,"loaded",{enumerable:!0,get:function(){return A.l}}),Object.defineProperty(A,"id",{enumerable:!0,get:function(){return A.i}}),A.webpackPolyfill=1),A}},"./package.json":function(V){V.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.10.1","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage","postinstall":"node scripts/patch-check.js"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"29.7.0","jest-environment-jsdom":"29.7.0","patch-package":"^8.0.0","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/typeof.js"),I=A("./src/session.js"),L=A("./src/async.js"),j=A("./src/event.js").EventProxy,M=A("./src/util.js"),s=A("./src/tracker.js");function S(i,o){var t=this,r=new j,c=i.TaskId,p=i.Bucket,w=i.Region,R=i.Key,F=i.Body,K=i.ChunkSize||i.SliceSize||t.options.ChunkSize,J=i.AsyncLimit,Q=i.StorageClass,ee=i.ServerSideEncryption,te,Ce,ce=i.onHashProgress,re=i.tracker;re&&re.setParams({chunkSize:K}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传开始")}),r.on("error",function(Z){if(t._isRunningTask(c))return i.UploadData.UploadId&&I.removeUsing(i.UploadData.UploadId),Z.UploadId=i.UploadData.UploadId||"",t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传失败: ").concat(JSON.stringify(Z))}),o(Z)}),r.on("upload_complete",function(Z){var D=M.extend({UploadId:i.UploadData.UploadId||""},Z);o(null,D)}),r.on("upload_slice_complete",function(Z){var D={};M.each(i.Headers,function(Y,ae){var de=ae.toLowerCase();(de.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(de))&&(D[ae]=Y)}),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始完成分块请求")}),b.call(t,{Bucket:p,Region:w,Key:R,UploadId:Z.UploadId,SliceList:Z.SliceList,Headers:D,tracker:re},function(Y,ae){if(t._isRunningTask(c)){if(I.removeUsing(Z.UploadId),Y)return Ce(null,!0),t.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 完成分块请求失败")}),r.emit("error",Y);I.removeUploadId.call(t,Z.UploadId),Ce({loaded:te,total:te},!0),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 完成分块请求成功")}),r.emit("upload_complete",ae)}})}),r.on("get_upload_data_finish",function(Z){var D=I.getFileId(F,i.ChunkSize,p,R);D&&I.saveUploadId.call(t,D,Z.UploadId,t.options.UploadIdCacheLimit),I.setUsing(Z.UploadId),Ce(null,!0),t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始上传各个分块")}),y.call(t,{TaskId:c,Bucket:p,Region:w,Key:R,Body:F,FileSize:te,SliceSize:K,AsyncLimit:J,ServerSideEncryption:ee,UploadData:Z,Headers:i.Headers,onProgress:Ce,tracker:re},function(Y,ae){if(t._isRunningTask(c)){if(Y)return Ce(null,!0),t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传失败")}),r.emit("error",Y);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 所有分块上传完成")}),r.emit("upload_slice_complete",ae)}})}),r.on("get_file_size_finish",function(){if(Ce=M.throttleOnProgress.call(t,te,i.onProgress),i.UploadData.UploadId)t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 已经获取到 uploadId, ").concat(i.UploadData.UploadId)}),r.emit("get_upload_data_finish",i.UploadData);else{var Z=M.extend({TaskId:c,Bucket:p,Region:w,Key:R,Headers:i.Headers,StorageClass:Q,Body:F,FileSize:te,SliceSize:K,onHashProgress:ce,tracker:re},i);t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 去获取 uploadId")}),d.call(t,Z,function(D,Y){if(t._isRunningTask(c)){if(D)return r.emit("error",D);i.UploadData.UploadId=Y.UploadId,i.UploadData.PartList=Y.PartList,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 获取到 uploadId, ").concat(i.UploadData.UploadId)}),r.emit("get_upload_data_finish",i.UploadData)}})}}),te=i.ContentLength,delete i.ContentLength,!i.Headers&&(i.Headers={}),M.each(i.Headers,function(Z,D){D.toLowerCase()==="content-length"&&delete i.Headers[D]}),function(){for(var Z=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],D=1024*1024,Y=0;Y<Z.length&&(D=Z[Y]*1024*1024,!(te/D<=t.options.MaxPartNumber));Y++);i.ChunkSize=i.SliceSize=K=Math.max(K,D)}(),te===0?(i.Body="",i.ContentLength=0,i.SkipTask=!0,t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 文件大小为 0，执行简单上传")}),t.putObject(i,o)):r.emit("get_file_size_finish")}function d(i,o){var t=i.TaskId,r=i.Bucket,c=i.Region,p=i.Key,w=i.StorageClass,R=this,F={},K=i.FileSize,J=i.SliceSize,Q=Math.ceil(K/J),ee=0,te=M.throttleOnProgress.call(R,K,i.onHashProgress),Ce=function(D,Y){var ae=J*(D-1),de=Math.min(ae+J,K),ne=de-ae;F[D]?Y(null,{PartNumber:D,ETag:F[D],Size:ne}):M.fileSlice(i.Body,ae,de,!1,function(se){M.getFileMd5(se,function(he,ge){if(he)return Y(M.error(he));var pe='"'+ge+'"';F[D]=pe,ee+=ne,te({loaded:ee,total:K}),Y(null,{PartNumber:D,ETag:pe,Size:ne})})})},ce=function(D,Y){var ae=D.length;if(ae===0)return Y(null,!0);if(ae>Q)return Y(null,!1);if(ae>1){var de=Math.max(D[0].Size,D[1].Size);if(de!==J)return Y(null,!1)}var ne=function(he){if(he<ae){var ge=D[he];Ce(ge.PartNumber,function(pe,me){me&&me.ETag===ge.ETag&&me.Size===ge.Size?ne(he+1):Y(null,!1)})}else Y(null,!0)};ne(0)},re=new j;re.on("error",function(Z){if(R._isRunningTask(t))return o(Z)}),re.on("upload_id_available",function(Z){var D={},Y=[];M.each(Z.PartList,function(ne){D[ne.PartNumber]=ne});for(var ae=1;ae<=Q;ae++){var de=D[ae];de?(de.PartNumber=ae,de.Uploaded=!0):de={PartNumber:ae,ETag:null,Uploaded:!1},Y.push(de)}Z.PartList=Y,o(null,Z)}),re.on("no_available_upload_id",function(){if(R._isRunningTask(t)){var Z=M.extend({Bucket:r,Region:c,Key:p,Query:M.clone(i.Query),StorageClass:w,Body:i.Body,calledBySdk:"sliceUploadFile",tracker:i.tracker},i),D=M.clone(i.Headers);delete D["x-cos-mime-limit"],Z.Headers=D,R.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 准备初始化分块上传")}),R.multipartInit(Z,function(Y,ae){if(R._isRunningTask(t)){if(Y)return R.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 初始化分块上传失败, ").concat(JSON.stringify(Y))}),re.emit("error",Y);var de=ae.UploadId;if(!de)return o(M.error(new Error("no such upload id")));R.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 初始化分块上传成功")}),re.emit("upload_id_available",{UploadId:de,PartList:[]})}})}}),re.on("has_and_check_upload_id",function(Z){Z=Z.reverse(),L.eachLimit(Z,1,function(D,Y){if(R._isRunningTask(t)){if(I.using[D]){Y();return}f.call(R,{Bucket:r,Region:c,Key:p,UploadId:D,tracker:i.tracker},function(ae,de){if(R._isRunningTask(t)){if(ae)return I.removeUsing(D),re.emit("error",ae);var ne=de.PartList;ne.forEach(function(se){se.PartNumber*=1,se.Size*=1,se.ETag=se.ETag||""}),ce(ne,function(se,he){if(R._isRunningTask(t)){if(se)return re.emit("error",se);he?Y({UploadId:D,PartList:ne}):Y()}})}})}},function(D){R._isRunningTask(t)&&(te(null,!0),D&&D.UploadId?re.emit("upload_id_available",D):re.emit("no_available_upload_id"))})}),re.on("seek_local_avail_upload_id",function(Z){var D=I.getFileId(i.Body,i.ChunkSize,r,p),Y=I.getUploadIdList.call(R,D);if(!D||!Y){re.emit("has_and_check_upload_id",Z);return}var ae=function(ne){if(ne>=Y.length){re.emit("has_and_check_upload_id",Z);return}var se=Y[ne];if(!M.isInArray(Z,se)){I.removeUploadId.call(R,se),ae(ne+1);return}if(I.using[se]){ae(ne+1);return}f.call(R,{Bucket:r,Region:c,Key:p,UploadId:se,tracker:i.tracker},function(he,ge){R._isRunningTask(t)&&(he?(I.removeUploadId.call(R,se),ae(ne+1)):re.emit("upload_id_available",{UploadId:se,PartList:ge.PartList}))})};ae(0)}),re.on("get_remote_upload_id_list",function(){C.call(R,{Bucket:r,Region:c,Key:p,tracker:i.tracker},function(Z,D){if(R._isRunningTask(t)){if(Z)return re.emit("error",Z);var Y=M.filter(D.UploadList,function(ne){return ne.Key===p&&(!w||ne.StorageClass.toUpperCase()===w.toUpperCase())}).reverse().map(function(ne){return ne.UploadId||ne.UploadID});if(Y.length)re.emit("seek_local_avail_upload_id",Y);else{var ae=I.getFileId(i.Body,i.ChunkSize,r,p),de;ae&&(de=I.getUploadIdList.call(R,ae))&&M.each(de,function(ne){I.removeUploadId.call(R,ne)}),re.emit("no_available_upload_id")}}})}),re.emit("get_remote_upload_id_list")}function C(i,o){var t=this,r=[],c={Bucket:i.Bucket,Region:i.Region,Prefix:i.Key,calledBySdk:i.calledBySdk||"sliceUploadFile",tracker:i.tracker},p=function(){t.multipartList(c,function(R,F){if(R)return o(R);r.push.apply(r,F.Upload||[]),F.IsTruncated==="true"?(c.KeyMarker=F.NextKeyMarker,c.UploadIdMarker=F.NextUploadIdMarker,p()):o(null,{UploadList:r})})};p()}function f(i,o){var t=this,r=[],c={Bucket:i.Bucket,Region:i.Region,Key:i.Key,UploadId:i.UploadId,calledBySdk:"sliceUploadFile",tracker:i.tracker},p=function(){t.multipartListPart(c,function(R,F){if(R)return o(R);r.push.apply(r,F.Part||[]),F.IsTruncated==="true"?(c.PartNumberMarker=F.NextPartNumberMarker,p()):o(null,{PartList:r})})};p()}function y(i,o){var t=this,r=i.TaskId,c=i.Bucket,p=i.Region,w=i.Key,R=i.UploadData,F=i.FileSize,K=i.SliceSize,J=Math.min(i.AsyncLimit||t.options.ChunkParallelLimit||1,256),Q=i.Body,ee=Math.ceil(F/K),te=0,Ce=i.ServerSideEncryption,ce=i.Headers,re=M.filter(R.PartList,function(D){return D.Uploaded&&(te+=D.PartNumber>=ee&&F%K||K),!D.Uploaded}),Z=i.onProgress;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始并发上传各个分块")}),L.eachLimit(re,J,function(D,Y){if(t._isRunningTask(r)){var ae=D.PartNumber,de=Math.min(F,D.PartNumber*K)-(D.PartNumber-1)*K,ne=0;t.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(ae,"开始上传")}),x.call(t,{TaskId:r,Bucket:c,Region:p,Key:w,SliceSize:K,FileSize:F,PartNumber:ae,ServerSideEncryption:Ce,Body:Q,UploadData:R,Headers:ce,onProgress:function(he){te+=he.loaded-ne,ne=he.loaded,Z({loaded:te,total:F})},tracker:i.tracker},function(se,he){t._isRunningTask(r)&&(!se&&!he.ETag&&(se='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )',t.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(ae,"上传请求成功，但是未获取到 eTag")})),se?(te-=ne,t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(ae,"上传失败")})):(te+=de-ne,D.ETag=he.ETag),t.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(ae,"上传成功")}),Z({loaded:te,total:F}),Y(se||null,he))})}},function(D){if(t._isRunningTask(r)){if(D)return o(D);o(null,{UploadId:R.UploadId,SliceList:R.PartList})}})}function x(i,o){var t=this,r=i.TaskId,c=i.Bucket,p=i.Region,w=i.Key,R=i.FileSize,F=i.Body,K=i.PartNumber*1,J=i.SliceSize,Q=i.ServerSideEncryption,ee=i.UploadData,te=i.Headers||{},Ce=t.options.ChunkRetryTimes+1,ce=J*(K-1),re=J,Z=ce+J;Z>R&&(Z=R,re=Z-ce);var D=["x-cos-traffic-limit","x-cos-mime-limit"],Y={};M.each(te,function(de,ne){D.indexOf(ne)>-1&&(Y[ne]=de)});var ae=ee.PartList[K-1];L.retry(Ce,function(de){t._isRunningTask(r)&&M.fileSlice(F,ce,Z,!0,function(ne){t.multipartUpload({TaskId:r,Bucket:c,Region:p,Key:w,ContentLength:re,PartNumber:K,UploadId:ee.UploadId,ServerSideEncryption:Q,Body:ne,Headers:Y,onProgress:i.onProgress,calledBySdk:"sliceUploadFile",tracker:i.tracker},function(se,he){if(t._isRunningTask(r))return se?de(se):(ae.Uploaded=!0,de(null,he))})})},function(de,ne){if(t._isRunningTask(r))return o(de,ne)})}function b(i,o){var t=i.Bucket,r=i.Region,c=i.Key,p=i.UploadId,w=i.SliceList,R=this,F=this.options.ChunkRetryTimes+1,K=i.Headers,J=w.map(function(Q){return{PartNumber:Q.PartNumber,ETag:Q.ETag}});L.retry(F,function(Q){R.multipartComplete({Bucket:t,Region:r,Key:c,UploadId:p,Parts:J,Headers:K,calledBySdk:"sliceUploadFile",tracker:i.tracker},Q)},function(Q,ee){o(Q,ee)})}function O(i,o){var t=i.Bucket,r=i.Region,c=i.Key,p=i.UploadId,w=i.Level||"task",R=i.AsyncLimit,F=this,K=new j;if(K.on("error",function(J){return o(J)}),K.on("get_abort_array",function(J){U.call(F,{Bucket:t,Region:r,Key:c,Headers:i.Headers,AsyncLimit:R,AbortArray:J},o)}),w==="bucket")C.call(F,{Bucket:t,Region:r,calledBySdk:"abortUploadTask"},function(J,Q){if(J)return o(J);K.emit("get_abort_array",Q.UploadList||[])});else if(w==="file"){if(!c)return o(M.error(new Error("abort_upload_task_no_key")));C.call(F,{Bucket:t,Region:r,Key:c,calledBySdk:"abortUploadTask"},function(J,Q){if(J)return o(J);K.emit("get_abort_array",Q.UploadList||[])})}else if(w==="task"){if(!p)return o(M.error(new Error("abort_upload_task_no_id")));if(!c)return o(M.error(new Error("abort_upload_task_no_key")));K.emit("get_abort_array",[{Key:c,UploadId:p}])}else return o(M.error(new Error("abort_unknown_level")))}function U(i,o){var t=i.Bucket,r=i.Region,c=i.Key,p=i.AbortArray,w=i.AsyncLimit||1,R=this,F=0,K=new Array(p.length);L.eachLimit(p,w,function(J,Q){var ee=F;if(c&&c!==J.Key){K[ee]={error:{KeyNotMatch:!0}},Q(null);return}var te=J.UploadId||J.UploadID;R.multipartAbort({Bucket:t,Region:r,Key:J.Key,Headers:i.Headers,UploadId:te},function(Ce){var ce={Bucket:t,Region:r,Key:J.Key,UploadId:te};K[ee]={error:Ce,task:ce},Q(null)}),F++},function(J){if(J)return o(J);for(var Q=[],ee=[],te=0,Ce=K.length;te<Ce;te++){var ce=K[te];ce.task&&(ce.error?ee.push(ce.task):Q.push(ce.task))}return o(null,{successList:Q,errorList:ee})})}function H(i,o){var t=this,r=i.SliceSize===void 0?t.options.SliceSize:i.SliceSize,c=[],p=i.Body,w=p.size||p.length||0,R={TaskId:""};if(t.options.EnableReporter){var F=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),K=w>r?"sliceUploadFile":"putObject";i.tracker=new s({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:i.Bucket,region:i.Region,apiName:"uploadFile",realApi:K,fileKey:i.Key,fileSize:w,accelerate:F,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}M.each(i,function(ce,re){N(ce)!=="object"&&typeof ce!="function"&&(R[re]=ce)});var J=i.onTaskReady,Q=function(re){R.TaskId=re,J&&J(re)};i.onTaskReady=Q;var ee=w>r?"sliceUploadFile":"putObject",te=i.onFileFinish,Ce=function(re,Z){i.tracker&&i.tracker.report(re,Z),te&&te(re,Z,R),o&&o(re,Z)};c.push({api:ee,params:i,callback:Ce}),t._addTasks(c)}function q(i,o){var t=this,r=i.SliceSize===void 0?t.options.SliceSize:i.SliceSize,c=0,p=0,w=M.throttleOnProgress.call(t,p,i.onProgress),R=i.files.length,F=i.onFileFinish,K=Array(R),J=function(te,Ce,ce){w(null,!0),F&&F(te,Ce,ce),K[ce.Index]={options:ce,error:te,data:Ce},--R<=0&&o&&o(null,{files:K})},Q=[];M.each(i.files,function(ee,te){(function(){var Ce=ee.Body,ce=Ce.size||Ce.length||0,re={Index:te,TaskId:""};if(!t.options.UseRawKey&&ee.Key&&ee.Key.substr(0,1)==="/"&&(ee.Key=ee.Key.substr(1)),c+=ce,t.options.EnableReporter){var Z=t.options.UseAccelerate||typeof t.options.Domain=="string"&&t.options.Domain.includes("accelerate."),D=ce>r?"sliceUploadFile":"putObject";ee.tracker=new s({Beacon:t.options.BeaconReporter,clsReporter:t.options.ClsReporter,bucket:ee.Bucket,region:ee.Region,apiName:"uploadFiles",realApi:D,fileKey:ee.Key,fileSize:ce,accelerate:Z,deepTracker:t.options.DeepTracker,customId:t.options.CustomId,delay:t.options.TrackerDelay})}M.each(ee,function(me,ke){N(me)!=="object"&&typeof me!="function"&&(re[ke]=me)});var Y=ee.onTaskReady,ae=function(ke){re.TaskId=ke,Y&&Y(ke)};ee.onTaskReady=ae;var de=0,ne=ee.onProgress,se=function(ke){p=p-de+ke.loaded,de=ke.loaded,ne&&ne(ke),w({loaded:p,total:c})};ee.onProgress=se;var he=ce>r?"sliceUploadFile":"putObject",ge=ee.onFileFinish,pe=function(ke,Oe){ee.tracker&&ee.tracker.report(ke,Oe),ge&&ge(ke,Oe),J&&J(ke,Oe,re)};Q.push({api:he,params:ee,callback:pe})})()}),t._addTasks(Q)}function h(i,o){var t=new j,r=this,c=i.Bucket,p=i.Region,w=i.Key,R=i.CopySource,F=M.getSourceParams.call(this,R);if(!F){o(M.error(new Error("CopySource format error")));return}var K=F.Bucket,J=F.Region,Q=decodeURIComponent(F.Key),ee=i.CopySliceSize===void 0?r.options.CopySliceSize:i.CopySliceSize;ee=Math.max(0,ee);var te=i.CopyChunkSize||this.options.CopyChunkSize,Ce=this.options.CopyChunkParallelLimit,ce=this.options.ChunkRetryTimes+1,re=0,Z=0,D,Y,ae={},de={},ne={};t.on("copy_slice_complete",function(se){M.each(i.Headers,function(ge,pe){pe.toLowerCase().indexOf("x-cos-meta-")});var he=M.map(se.PartList,function(ge){return{PartNumber:ge.PartNumber,ETag:ge.ETag}});L.retry(ce,function(ge){r.multipartComplete({Bucket:c,Region:p,Key:w,UploadId:se.UploadId,Parts:he,tracker:i.tracker,calledBySdk:"sliceCopyFile"},ge)},function(ge,pe){if(I.removeUsing(se.UploadId),ge)return Y(null,!0),o(ge);I.removeUploadId(se.UploadId),Y({loaded:D,total:D},!0),o(null,pe)})}),t.on("get_copy_data_finish",function(se){var he=I.getCopyFileId(R,ae,te,c,w);he&&I.saveUploadId(he,se.UploadId,r.options.UploadIdCacheLimit),I.setUsing(se.UploadId);var ge=M.filter(se.PartList,function(pe){return pe.Uploaded&&(Z+=pe.PartNumber>=re&&D%te||te),!pe.Uploaded});L.eachLimit(ge,Ce,function(pe,me){var ke=pe.PartNumber,Oe=pe.CopySourceRange,qe=pe.end-pe.start;L.retry(ce,function(Fe){l.call(r,{Bucket:c,Region:p,Key:w,CopySource:R,UploadId:se.UploadId,PartNumber:ke,CopySourceRange:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},Fe)},function(Fe,De){if(Fe)return me(Fe);Z+=qe,Y({loaded:Z,total:D}),pe.ETag=De.ETag,me(Fe||null,De)})},function(pe){if(pe)return I.removeUsing(se.UploadId),Y(null,!0),o(pe);t.emit("copy_slice_complete",se)})}),t.on("get_chunk_size_finish",function(){var se=function(){r.multipartInit({Bucket:c,Region:p,Key:w,Headers:ne,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(ke,Oe){if(ke)return o(ke);i.UploadId=Oe.UploadId,t.emit("get_copy_data_finish",{UploadId:i.UploadId,PartList:i.PartList})})},he=I.getCopyFileId(R,ae,te,c,w),ge=I.getUploadIdList(he);if(!he||!ge)return se();var pe=function(ke){if(ke>=ge.length)return se();var Oe=ge[ke];if(I.using[Oe])return pe(ke+1);f.call(r,{Bucket:c,Region:p,Key:w,UploadId:Oe,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(qe,Fe){if(qe)I.removeUploadId(Oe),pe(ke+1);else{if(I.using[Oe])return pe(ke+1);var De={},Je=0;M.each(Fe.PartList,function(Ke){var We=parseInt(Ke.Size),nt=Je+We-1;De[Ke.PartNumber+"|"+Je+"|"+nt]=Ke.ETag,Je+=We}),M.each(i.PartList,function(Ke){var We=De[Ke.PartNumber+"|"+Ke.start+"|"+Ke.end];We&&(Ke.ETag=We,Ke.Uploaded=!0)}),t.emit("get_copy_data_finish",{UploadId:Oe,PartList:i.PartList})}})};pe(0)}),t.on("get_file_size_finish",function(){if(function(){for(var he=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ge=1024*1024,pe=0;pe<he.length&&(ge=he[pe]*1024*1024,!(D/ge<=r.options.MaxPartNumber));pe++);i.ChunkSize=te=Math.max(te,ge),re=Math.ceil(D/te);for(var me=[],ke=1;ke<=re;ke++){var Oe=(ke-1)*te,qe=ke*te<D?ke*te-1:D-1,Fe={PartNumber:ke,start:Oe,end:qe,CopySourceRange:"bytes="+Oe+"-"+qe};me.push(Fe)}i.PartList=me}(),i.Headers["x-cos-metadata-directive"]==="Replaced"?ne=i.Headers:ne=de,ne["x-cos-storage-class"]=i.Headers["x-cos-storage-class"]||de["x-cos-storage-class"],ne=M.clearKey(ne),de["x-cos-storage-class"]==="ARCHIVE"||de["x-cos-storage-class"]==="DEEP_ARCHIVE"){var se=de["x-cos-restore"];if(!se||se==='ongoing-request="true"'){o(M.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete ne["x-cos-copy-source"],delete ne["x-cos-metadata-directive"],delete ne["x-cos-copy-source-If-Modified-Since"],delete ne["x-cos-copy-source-If-Unmodified-Since"],delete ne["x-cos-copy-source-If-Match"],delete ne["x-cos-copy-source-If-None-Match"],t.emit("get_chunk_size_finish")}),r.headObject({Bucket:K,Region:J,Key:Q,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(se,he){if(se){se.statusCode&&se.statusCode===404?o(M.error(se,{ErrorStatus:Q+" Not Exist"})):o(se);return}if(D=i.FileSize=he.headers["content-length"],D===void 0||!D){o(M.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(i.tracker&&i.tracker.setParams({httpSize:D}),Y=M.throttleOnProgress.call(r,D,i.onProgress),D<=ee)i.Headers["x-cos-metadata-directive"]||(i.Headers["x-cos-metadata-directive"]="Copy"),r.putObjectCopy(Object.assign(i,{calledBySdk:"sliceCopyFile"}),function(pe,me){if(pe)return Y(null,!0),o(pe);Y({loaded:D,total:D},!0),o(pe,me)});else{var ge=he.headers;ae=ge,de={"Cache-Control":ge["cache-control"],"Content-Disposition":ge["content-disposition"],"Content-Encoding":ge["content-encoding"],"Content-Type":ge["content-type"],Expires:ge.expires,"x-cos-storage-class":ge["x-cos-storage-class"]},M.each(ge,function(pe,me){var ke="x-cos-meta-";me.indexOf(ke)===0&&me.length>ke.length&&(de[me]=pe)}),t.emit("get_file_size_finish")}})}function l(i,o){var t=i.TaskId,r=i.Bucket,c=i.Region,p=i.Key,w=i.CopySource,R=i.UploadId,F=i.PartNumber*1,K=i.CopySourceRange,J=this.options.ChunkRetryTimes+1,Q=this;L.retry(J,function(ee){Q.uploadPartCopy({TaskId:t,Bucket:r,Region:c,Key:p,CopySource:w,UploadId:R,PartNumber:F,CopySourceRange:K,tracker:i.tracker,calledBySdk:i.calledBySdk},function(te,Ce){ee(te||null,Ce)})},function(ee,te){return o(ee,te)})}var T={sliceUploadFile:S,abortUploadTask:O,uploadFile:H,uploadFiles:q,sliceCopyFile:h};V.exports.init=function(i,o){o.transferToTaskMethod(T,"sliceUploadFile"),M.each(T,function(t,r){i.prototype[r]=M.apiWrapper(r,t)})}},"./src/async.js":function(V,le){var A=function(j,M,s,S){if(S=S||function(){},!j.length||M<=0)return S();var d=0,C=0,f=0;(function y(){if(d>=j.length)return S();for(;f<M&&C<j.length;)C+=1,f+=1,s(j[C-1],function(x){x?(S(x),S=function(){}):(d+=1,f-=1,d>=j.length?S():y())})})()},N=function(j,M,s){var S=function(C){M(function(f,y){f&&C<j?S(C+1):s(f,y)})};j<1?s():S(1)},I={eachLimit:A,retry:N};V.exports=I},"./src/base.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/defineProperty.js"),I=A("./node_modules/@babel/runtime/helpers/typeof.js");function L(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);a&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(e,v).enumerable})),n.push.apply(n,u)}return n}function j(e){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?L(Object(n),!0).forEach(function(u){N(e,u,n[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(n,u))})}return e}var M=A("./lib/request.js"),s=A("./src/util.js");function S(e,a){var n=this.options.Protocol||(s.isBrowser&&(typeof location>"u"?"undefined":I(location))==="object"&&location.protocol==="http:"?"http:":"https:"),u=this.options.ServiceDomain,v=e.AppId||this.options.appId,g=e.Region;u?(u=u.replace(/\{\{AppId\}\}/gi,v||"").replace(/\{\{Region\}\}/gi,g||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(u)||(u=n+"//"+u),u.slice(-1)==="/"&&(u=u.slice(0,-1))):g?u=n+"//cos."+g+".myqcloud.com":u=n+"//service.cos.myqcloud.com";var k="",m=g?"cos."+g+".myqcloud.com":"service.cos.myqcloud.com",_=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");m===_&&(k=m),X.call(this,{Action:"name/cos:GetService",url:u,method:"GET",headers:e.Headers,SignHost:k,tracker:e.tracker},function(ue,ie){if(ue)return a(ue);var Se=ie&&ie.ListAllMyBucketsResult&&ie.ListAllMyBucketsResult.Buckets&&ie.ListAllMyBucketsResult.Buckets.Bucket||[];Se=s.isArray(Se)?Se:[Se];var W=ie&&ie.ListAllMyBucketsResult&&ie.ListAllMyBucketsResult.Owner||{};a(null,{Buckets:Se,Owner:W,statusCode:ie.statusCode,headers:ie.headers})})}function d(e,a){var n=this,u="";if(e.BucketAZConfig){var v={BucketAZConfig:e.BucketAZConfig};u=s.json2xml({CreateBucketConfiguration:v})}X.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:u,tracker:e.tracker},function(g,k){if(g)return a(g);var m=He({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});a(null,{Location:m,statusCode:k.statusCode,headers:k.headers})})}function C(e,a){X.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},a)}function f(e,a){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListBucketResult||{},k=g.Contents||[],m=g.CommonPrefixes||[];k=s.isArray(k)?k:[k],m=s.isArray(m)?m:[m];var _=s.clone(g);s.extend(_,{Contents:k,CommonPrefixes:m,statusCode:v.statusCode,headers:v.headers}),a(null,_)})}function y(e,a){X.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function x(e,a){var n=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),n["Content-Type"]="application/xml",n["Content-MD5"]=s.b64(s.md5(u))}s.each(n,function(k,m){m.indexOf("x-cos-grant-")===0&&(n[m]=Ge(n[m]))}),X.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:u,tracker:e.tracker},function(k,m){if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function b(e,a){X.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(n,u){if(n)return a(n);var v=u.AccessControlPolicy||{},g=v.Owner||{},k=v.AccessControlList.Grant||[];k=s.isArray(k)?k:[k];var m=xe(v);u.headers&&u.headers["x-cos-acl"]&&(m.ACL=u.headers["x-cos-acl"]),m=s.extend(m,{Owner:g,Grants:k,statusCode:u.statusCode,headers:u.headers}),a(null,m)})}function O(e,a){var n=e.CORSConfiguration||{},u=n.CORSRules||e.CORSRules||[];u=s.clone(s.isArray(u)?u:[u]),s.each(u,function(m){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(_){var ue=_+"s",ie=m[ue]||m[_]||[];delete m[ue],m[_]=s.isArray(ie)?ie:[ie]})});var v={CORSRule:u};e.ResponseVary&&(v.ResponseVary=e.ResponseVary);var g=s.json2xml({CORSConfiguration:v}),k=e.Headers;k["Content-Type"]="application/xml",k["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"cors",headers:k,tracker:e.tracker},function(m,_){if(m)return a(m);a(null,{statusCode:_.statusCode,headers:_.headers})})}function U(e,a){X.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error&&n.error.Code==="NoSuchCORSConfiguration"){var v={CORSRules:[],statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=u.CORSConfiguration||{},k=g.CORSRules||g.CORSRule||[];k=s.clone(s.isArray(k)?k:[k]);var m=g.ResponseVary;s.each(k,function(_){s.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(ue){var ie=ue+"s",Se=_[ie]||_[ue]||[];delete _[ue],_[ie]=s.isArray(Se)?Se:[Se]})}),a(null,{CORSRules:k,ResponseVary:m,statusCode:u.statusCode,headers:u.headers})})}function H(e,a){X.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode||n.statusCode,headers:u.headers})})}function q(e,a){X.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},a)}function h(e,a){var n=e.Policy;try{typeof n=="string"&&(n=JSON.parse(n))}catch{}if(!n||typeof n=="string")return a(s.error(new Error("Policy format error")));var u=JSON.stringify(n);n.version||(n.version="2.0");var v=e.Headers;v["Content-Type"]="application/json",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:u,headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function l(e,a){X.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(n,u){if(n)return n.statusCode&&n.statusCode===403?a(s.error(n,{ErrorStatus:"Access Denied"})):n.statusCode&&n.statusCode===405?a(s.error(n,{ErrorStatus:"Method Not Allowed"})):n.statusCode&&n.statusCode===404?a(s.error(n,{ErrorStatus:"Policy Not Found"})):a(n);var v={};try{v=JSON.parse(u.body)}catch{}a(null,{Policy:v,statusCode:u.statusCode,headers:u.headers})})}function T(e,a){X.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode||n.statusCode,headers:u.headers})})}function i(e,a){var n=e.Tagging||{},u=n.TagSet||n.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"tagging",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function o(e,a){X.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function t(e,a){X.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function r(e,a){var n=e.LifecycleConfiguration||{},u=n.Rules||e.Rules||[];u=s.clone(u);var v=s.json2xml({LifecycleConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"lifecycle",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function c(e,a){X.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error&&n.error.Code==="NoSuchLifecycleConfiguration"){var v={Rules:[],statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=[];try{g=u.LifecycleConfiguration.Rule||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Rules:g,statusCode:u.statusCode,headers:u.headers})})}function p(e,a){X.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function w(e,a){if(!e.VersioningConfiguration){a(s.error(new Error("missing param VersioningConfiguration")));return}var n=e.VersioningConfiguration||{},u=s.json2xml({VersioningConfiguration:n}),v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"versioning",headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function R(e,a){X.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(n,u){n||!u.VersioningConfiguration&&(u.VersioningConfiguration={}),a(n,u)})}function F(e,a){var n=s.clone(e.ReplicationConfiguration),u=s.json2xml({ReplicationConfiguration:n});u=u.replace(/<(\/?)Rules>/gi,"<$1Rule>"),u=u.replace(/<(\/?)Tags>/gi,"<$1Tag>");var v=e.Headers;v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"replication",headers:v,tracker:e.tracker},function(g,k){if(g&&g.statusCode===204)return a(null,{statusCode:g.statusCode});if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function K(e,a){X.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="ReplicationConfigurationnotFoundError")){var v={ReplicationConfiguration:{Rules:[]},statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}!u.ReplicationConfiguration&&(u.ReplicationConfiguration={}),u.ReplicationConfiguration.Rule&&(u.ReplicationConfiguration.Rules=s.makeArray(u.ReplicationConfiguration.Rule),delete u.ReplicationConfiguration.Rule),a(n,u)})}function J(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function Q(e,a){if(!e.WebsiteConfiguration){a(s.error(new Error("missing param WebsiteConfiguration")));return}var n=s.clone(e.WebsiteConfiguration||{}),u=n.RoutingRules||n.RoutingRule||[];u=s.isArray(u)?u:[u],delete n.RoutingRule,delete n.RoutingRules,u.length&&(n.RoutingRules={RoutingRule:u});var v=s.json2xml({WebsiteConfiguration:n}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"website",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function ee(e,a){X.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error.Code==="NoSuchWebsiteConfiguration"){var v={WebsiteConfiguration:{},statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=u.WebsiteConfiguration||{};if(g.RoutingRules){var k=s.clone(g.RoutingRules.RoutingRule||[]);k=s.makeArray(k),g.RoutingRules=k}a(null,{WebsiteConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function te(e,a){X.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function Ce(e,a){if(!e.RefererConfiguration){a(s.error(new Error("missing param RefererConfiguration")));return}var n=s.clone(e.RefererConfiguration||{}),u=n.DomainList||{},v=u.Domains||u.Domain||[];v=s.isArray(v)?v:[v],v.length&&(n.DomainList={Domain:v});var g=s.json2xml({RefererConfiguration:n}),k=e.Headers;k["Content-Type"]="application/xml",k["Content-MD5"]=s.b64(s.md5(g)),X.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:g,action:"referer",headers:k,tracker:e.tracker},function(m,_){if(m&&m.statusCode===204)return a(null,{statusCode:m.statusCode});if(m)return a(m);a(null,{statusCode:_.statusCode,headers:_.headers})})}function ce(e,a){X.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error.Code==="NoSuchRefererConfiguration"){var v={WebsiteConfiguration:{},statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=u.RefererConfiguration||{};if(g.DomainList){var k=s.makeArray(g.DomainList.Domain||[]);g.DomainList={Domains:k}}a(null,{RefererConfiguration:g,statusCode:u.statusCode,headers:u.headers})})}function re(e,a){var n=e.DomainConfiguration||{},u=n.DomainRule||e.DomainRule||[];u=s.clone(u);var v=s.json2xml({DomainConfiguration:{DomainRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"domain",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function Z(e,a){X.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(n,u){if(n)return a(n);var v=[];try{v=u.DomainConfiguration.DomainRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{DomainRule:v,statusCode:u.statusCode,headers:u.headers})})}function D(e,a){X.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function Y(e,a){var n=e.OriginConfiguration||{},u=n.OriginRule||e.OriginRule||[];u=s.clone(u);var v=s.json2xml({OriginConfiguration:{OriginRule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"origin",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function ae(e,a){X.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(n,u){if(n)return a(n);var v=[];try{v=u.OriginConfiguration.OriginRule||[]}catch{}v=s.clone(s.isArray(v)?v:[v]),a(null,{OriginRule:v,statusCode:u.statusCode,headers:u.headers})})}function de(e,a){X.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function ne(e,a){var n=s.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=s.b64(s.md5(n)),X.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:n,action:"logging",headers:u,tracker:e.tracker},function(v,g){if(v&&v.statusCode===204)return a(null,{statusCode:v.statusCode});if(v)return a(v);a(null,{statusCode:g.statusCode,headers:g.headers})})}function se(e,a){X.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(n,u){if(n)return a(n);a(null,{BucketLoggingStatus:u.BucketLoggingStatus,statusCode:u.statusCode,headers:u.headers})})}function he(e,a,n){var u=s.clone(a.InventoryConfiguration);if(u.OptionalFields){var v=u.OptionalFields||[];u.OptionalFields={Field:v}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var g=u.Destination.COSBucketDestination.Encryption;Object.keys(g).indexOf("SSECOS")>-1&&(g["SSE-COS"]=g.SSECOS,delete g.SSECOS)}var k=s.json2xml({InventoryConfiguration:u}),m=a.Headers;m["Content-Type"]="application/xml",m["Content-MD5"]=s.b64(s.md5(k));var _=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";X.call(this,{Action:_,method:e,Bucket:a.Bucket,Region:a.Region,body:k,action:"inventory",qs:{id:a.Id},headers:m,tracker:a.tracker},function(ue,ie){if(ue&&ue.statusCode===204)return n(null,{statusCode:ue.statusCode});if(ue)return n(ue);n(null,{statusCode:ie.statusCode,headers:ie.headers})})}function ge(e,a){return he.call(this,"PUT",e,a)}function pe(e,a){return he.call(this,"POST",e,a)}function me(e,a){X.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(n,u){if(n)return a(n);var v=u.InventoryConfiguration;if(v&&v.OptionalFields&&v.OptionalFields.Field){var g=v.OptionalFields.Field;s.isArray(g)||(g=[g]),v.OptionalFields=g}if(v.Destination&&v.Destination.COSBucketDestination&&v.Destination.COSBucketDestination.Encryption){var k=v.Destination.COSBucketDestination.Encryption;Object.keys(k).indexOf("SSE-COS")>-1&&(k.SSECOS=k["SSE-COS"],delete k["SSE-COS"])}a(null,{InventoryConfiguration:v,statusCode:u.statusCode,headers:u.headers})})}function ke(e,a){X.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(n,u){if(n)return a(n);var v=u.ListInventoryConfigurationResult,g=v.InventoryConfiguration||[];g=s.isArray(g)?g:[g],delete v.InventoryConfiguration,s.each(g,function(k){if(k&&k.OptionalFields&&k.OptionalFields.Field){var m=k.OptionalFields.Field;s.isArray(m)||(m=[m]),k.OptionalFields=m}if(k.Destination&&k.Destination.COSBucketDestination&&k.Destination.COSBucketDestination.Encryption){var _=k.Destination.COSBucketDestination.Encryption;Object.keys(_).indexOf("SSE-COS")>-1&&(_.SSECOS=_["SSE-COS"],delete _["SSE-COS"])}}),v.InventoryConfigurations=g,s.extend(v,{statusCode:u.statusCode,headers:u.headers}),a(null,v)})}function Oe(e,a){X.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function qe(e,a){if(!e.AccelerateConfiguration){a(s.error(new Error("missing param AccelerateConfiguration")));return}var n={AccelerateConfiguration:e.AccelerateConfiguration||{}},u=s.json2xml(n),v={};v["Content-Type"]="application/xml",v["Content-MD5"]=s.b64(s.md5(u)),X.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"accelerate",headers:v,tracker:e.tracker},function(g,k){if(g)return a(g);a(null,{statusCode:k.statusCode,headers:k.headers})})}function Fe(e,a){X.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(n,u){n||!u.AccelerateConfiguration&&(u.AccelerateConfiguration={}),a(n,u)})}function De(e,a){var n=e.ServerSideEncryptionConfiguration||{},u=n.Rule||n.Rules||[],v=s.json2xml({ServerSideEncryptionConfiguration:{Rule:u}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:v,action:"encryption",headers:g,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function Je(e,a){X.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.code==="NoSuchEncryptionConfiguration"){var v={EncryptionConfiguration:{Rules:[]},statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=s.makeArray(u.EncryptionConfiguration&&u.EncryptionConfiguration.Rule||[]);u.EncryptionConfiguration={Rules:g},a(n,u)})}function Ke(e,a){X.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function We(e,a){X.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(n,u){if(n){var v=n.statusCode;return e.Headers["If-Modified-Since"]&&v&&v===304?a(null,{NotModified:!0,statusCode:v}):a(n)}u.ETag=s.attr(u.headers,"etag",""),a(null,u)})}function nt(e,a){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,X.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.ListVersionsResult||{},k=g.DeleteMarker||[];k=s.isArray(k)?k:[k];var m=g.Version||[];m=s.isArray(m)?m:[m];var _=s.clone(g);delete _.DeleteMarker,delete _.Version,s.extend(_,{DeleteMarkers:k,Versions:m,statusCode:v.statusCode,headers:v.headers}),a(null,_)})}function ct(e,a){var n=this;if(n.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject开始")}),this.options.ObjectKeySimplifyCheck){var u=s.simplifyPath(e.Key);if(u==="/"){a(s.error(new Error("The Getobject Key is illegal")));return}}var v=e.Query||{},g=e.QueryString||"",k=s.throttleOnProgress.call(this,0,e.onProgress),m=e.tracker;m&&m.setParams({signStartTime:new Date().getTime()}),v["response-content-type"]=e.ResponseContentType,v["response-content-language"]=e.ResponseContentLanguage,v["response-expires"]=e.ResponseExpires,v["response-cache-control"]=e.ResponseCacheControl,v["response-content-disposition"]=e.ResponseContentDisposition,v["response-content-encoding"]=e.ResponseContentEncoding,X.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:v,qsStr:g,rawBody:!0,onDownloadProgress:k,tracker:m},function(_,ue){if(k(null,!0),_){var ie=_.statusCode;return e.Headers["If-Modified-Since"]&&ie&&ie===304?a(null,{NotModified:!0}):a(_)}a(null,{Body:ue.body,ETag:s.attr(ue.headers,"etag",""),statusCode:ue.statusCode,headers:ue.headers}),n.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject结束")})})}function at(e,a){var n=this,u=e.ContentLength,v=s.throttleOnProgress.call(n,u,e.onProgress);n.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject开始")});var g=e.Headers;!g["Cache-Control"]&&!g["cache-control"]&&(g["Cache-Control"]=""),!g["Content-Type"]&&!g["content-type"]&&(g["Content-Type"]=e.Body&&e.Body.type||"");var k=e.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5,m=e.tracker;k&&m&&m.setParams({md5StartTime:new Date().getTime()}),k&&n.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] 开始计算 md5")}),s.getBodyMd5(k,e.Body,function(_){_&&(n.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] md5: ").concat(_,"，md5Base64=").concat(s.b64(_))}),m&&m.setParams({md5EndTime:new Date().getTime()}),n.options.UploadCheckContentMd5&&(g["Content-MD5"]=s.b64(_)),(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(g["x-cos-meta-md5"]=_)),e.ContentLength!==void 0&&(g["Content-Length"]=e.ContentLength),v(null,!0),X.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:v,tracker:m},function(ue,ie){if(ue)return n.logger.error({cate:"ERROR",tag:"upload",msg:"上传失败，错误信息：".concat(JSON.stringify(ue))}),v(null,!0),a(ue);v({loaded:u,total:u},!0);var Se=He({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?"accelerate":e.Region,object:e.Key});Se=Se.substr(Se.indexOf("://")+3),ie.Location=Se,ie.ETag=s.attr(ie.headers,"etag",""),n.logger.info({cate:"RESULT",tag:"upload",msg:"上传成功，Location=".concat(Se)}),n.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject结束")}),a(null,ie)})},e.onHashProgress)}function lt(e,a){X.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(n,u){if(n){var v=n.statusCode;return v&&v===404?a(null,{BucketNotFound:!0,statusCode:v}):a(n)}a(null,{statusCode:u.statusCode,headers:u.headers})})}function dt(e,a){var n={};e.VersionId&&(n.versionId=e.VersionId),X.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,action:"acl",tracker:e.tracker},function(u,v){if(u)return a(u);var g=v.AccessControlPolicy||{},k=g.Owner||{},m=g.AccessControlList&&g.AccessControlList.Grant||[];m=s.isArray(m)?m:[m];var _=xe(g);delete _.GrantWrite,v.headers&&v.headers["x-cos-acl"]&&(_.ACL=v.headers["x-cos-acl"]),_=s.extend(_,{Owner:k,Grants:m,statusCode:v.statusCode,headers:v.headers}),a(null,_)})}function ft(e,a){var n=e.Headers,u="";if(e.AccessControlPolicy){var v=s.clone(e.AccessControlPolicy||{}),g=v.Grants||v.Grant;g=s.isArray(g)?g:[g],delete v.Grant,delete v.Grants,v.AccessControlList={Grant:g},u=s.json2xml({AccessControlPolicy:v}),n["Content-Type"]="application/xml",n["Content-MD5"]=s.b64(s.md5(u))}s.each(n,function(k,m){m.indexOf("x-cos-grant-")===0&&(n[m]=Ge(n[m]))}),X.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:u,tracker:e.tracker},function(k,m){if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function ht(e,a){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,X.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n,tracker:e.tracker},function(u,v){if(u)return u.statusCode&&u.statusCode===403?a(null,{OptionsForbidden:!0,statusCode:u.statusCode}):a(u);var g=v.headers||{};a(null,{AccessControlAllowOrigin:g["access-control-allow-origin"],AccessControlAllowMethods:g["access-control-allow-methods"],AccessControlAllowHeaders:g["access-control-allow-headers"],AccessControlExposeHeaders:g["access-control-expose-headers"],AccessControlMaxAge:g["access-control-max-age"],statusCode:v.statusCode,headers:v.headers})})}function gt(e,a){var n=this,u=e.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]="");var v=e.CopySource||"",g=s.getSourceParams.call(this,v);if(!g){a(s.error(new Error("CopySource format error")));return}var k=g.Bucket,m=g.Region,_=decodeURIComponent(g.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:k,region:m,prefix:_},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(ue,ie){if(ue)return a(ue);var Se=s.clone(ie.CopyObjectResult||{}),W=He({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});s.extend(Se,{Location:W,statusCode:ie.statusCode,headers:ie.headers}),a(null,Se)})}function je(e,a){var n=e.CopySource||"",u=s.getSourceParams.call(this,n);if(!u){a(s.error(new Error("CopySource format error")));return}var v=u.Bucket,g=u.Region,k=decodeURIComponent(u.Key);X.call(this,{Scope:[{action:"name/cos:GetObject",bucket:v,region:g,prefix:k},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(m,_){if(m)return a(m);var ue=s.clone(_.CopyPartResult||{});s.extend(ue,{statusCode:_.statusCode,headers:_.headers}),a(null,ue)})}function z(e,a){var n=e.Objects||[],u=e.Quiet;n=s.isArray(n)?n:[n];var v=s.json2xml({Delete:{Object:n,Quiet:u||!1}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v));var k=s.map(n,function(m){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:m.Key}});X.call(this,{Scope:k,method:"POST",Bucket:e.Bucket,Region:e.Region,body:v,action:"delete",headers:g,tracker:e.tracker},function(m,_){if(m)return a(m);var ue=_.DeleteResult||{},ie=ue.Deleted||[],Se=ue.Error||[];ie=s.isArray(ie)?ie:[ie],Se=s.isArray(Se)?Se:[Se];var W=s.clone(ue);s.extend(W,{Error:Se,Deleted:ie,statusCode:_.statusCode,headers:_.headers}),a(null,W)})}function B(e,a){var n=e.Headers;if(!e.RestoreRequest){a(s.error(new Error("missing param RestoreRequest")));return}var u=e.RestoreRequest||{},v=s.json2xml({RestoreRequest:u});n["Content-Type"]="application/xml",n["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:v,action:"restore",headers:n,tracker:e.tracker},a)}function E(e,a){var n=e.Tagging||{},u=n.TagSet||n.Tags||e.Tags||[];u=s.clone(s.isArray(u)?u:[u]);var v=s.json2xml({Tagging:{TagSet:{Tag:u}}}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:v,action:"tagging",headers:g,VersionId:e.VersionId,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);a(null,{statusCode:m.statusCode,headers:m.headers})})}function P(e,a){X.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(n,u){if(n){if(n.statusCode===404&&n.error&&(n.error==="Not Found"||n.error.Code==="NoSuchTagSet")){var v={Tags:[],statusCode:n.statusCode};n.headers&&(v.headers=n.headers),a(null,v)}else a(n);return}var g=[];try{g=u.Tagging.TagSet.Tag||[]}catch{}g=s.clone(s.isArray(g)?g:[g]),a(null,{Tags:g,statusCode:u.statusCode,headers:u.headers})})}function G(e,a){X.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(n,u){if(n&&n.statusCode===204)return a(null,{statusCode:n.statusCode});if(n)return a(n);a(null,{statusCode:u.statusCode,headers:u.headers})})}function $(e,a){var n=e.SelectType;if(!n)return a(s.error(new Error("missing param SelectType")));var u=e.SelectRequest||{},v=s.json2xml({SelectRequest:u}),g=e.Headers;g["Content-Type"]="application/xml",g["Content-MD5"]=s.b64(s.md5(v)),X.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:v,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(k,m){if(k&&k.statusCode===204)return a(null,{statusCode:k.statusCode});if(k)return a(k);var _=s.parseSelectPayload(m.body);a(null,{statusCode:m.statusCode,headers:m.headers,Body:_.body,Payload:_.payload})})}function oe(e,a){var n=this,u=e.Headers,v=e.tracker;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=e.Body&&e.Body.type||"");var g=e.Body&&(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5);g&&v&&v.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(g,e.Body,function(k){k&&(e.Headers["x-cos-meta-md5"]=k),g&&v&&v.setParams({md5EndTime:new Date().getTime()}),X.call(n,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:v},function(m,_){if(m)return v&&v.parent&&v.parent.setParams({errorNode:"multipartInit"}),a(m);if(_=s.clone(_||{}),_&&_.InitiateMultipartUploadResult)return a(null,s.extend(_.InitiateMultipartUploadResult,{statusCode:_.statusCode,headers:_.headers}));a(null,_)})},e.onHashProgress)}function fe(e,a){var n=this;s.getFileSize("multipartUpload",e,function(){var u=e.tracker,v=n.options.UploadCheckContentMd5;v&&u&&u.setParams({md5StartTime:new Date().getTime()}),s.getBodyMd5(v,e.Body,function(g){g&&(e.Headers["Content-MD5"]=s.b64(g)),v&&u&&u.setParams({md5EndTime:new Date().getTime()}),u&&u.setParams({partNumber:e.PartNumber}),X.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:u},function(k,m){if(k)return u&&u.parent&&u.parent.setParams({errorNode:"multipartUpload"}),a(k);a(null,{ETag:s.attr(m.headers,"etag",""),statusCode:m.statusCode,headers:m.headers})})})})}function ye(e,a){for(var n=this,u=e.UploadId,v=e.Parts,g=e.tracker,k=0,m=v.length;k<m;k++)v[k].ETag&&v[k].ETag.indexOf('"')===0||(v[k].ETag='"'+v[k].ETag+'"');var _=s.json2xml({CompleteMultipartUpload:{Part:v}});_=_.replace(/\n\s*/g,"");var ue=e.Headers;ue["Content-Type"]="application/xml",ue["Content-MD5"]=s.b64(s.md5(_)),X.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:u},body:_,headers:ue,tracker:g},function(ie,Se){if(ie)return g&&g.parent&&g.parent.setParams({errorNode:"multipartComplete"}),a(ie);var W=He({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?"accelerate":e.Region,object:e.Key,isLocation:!0}),Re=Se.CompleteMultipartUploadResult||{};if(Re.ProcessResults&&(Re.UploadResult={OriginalInfo:{Key:Re.Key,Location:W,ETag:Re.ETag,ImageInfo:Re.ImageInfo},ProcessResults:Re.ProcessResults},delete Re.ImageInfo,delete Re.ProcessResults),Re.CallbackResult){var we=Re.CallbackResult;if(we.Status==="200"&&we.CallbackBody)try{Re.CallbackBody=JSON.parse(s.decodeBase64(we.CallbackBody))}catch{Re.CallbackBody={}}else Re.CallbackError=we.Error||{};delete Re.CallbackResult}if(Re.ReturnBodyResult){var Ne=Re.ReturnBodyResult;if(Ne.Status==="200"&&Ne.ReturnBody)try{Re.ReturnBody=JSON.parse(s.decodeBase64(Ne.ReturnBody))}catch{Re.ReturnBody={}}else Re.ReturnError={Code:Ne.Code,Message:Ne.Message,Status:Ne.Status};delete Re.ReturnBodyResult}var Le=s.extend(Re,{Location:W,statusCode:Se.statusCode,headers:Se.headers});a(null,Le)})}function Be(e,a){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=s.clearKey(n);var u=e.tracker;u&&u.setParams({signStartTime:new Date().getTime()}),X.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads",tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartList"}),a(v);if(g&&g.ListMultipartUploadsResult){var k=g.ListMultipartUploadsResult.Upload||[];k=s.isArray(k)?k:[k],g.ListMultipartUploadsResult.Upload=k}var m=s.clone(g.ListMultipartUploadsResult||{});s.extend(m,{statusCode:g.statusCode,headers:g.headers}),a(null,m)})}function Ae(e,a){var n={},u=e.tracker;n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,X.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,tracker:u},function(v,g){if(v)return u&&u.parent&&u.parent.setParams({errorNode:"multipartListPart"}),a(v);var k=g.ListPartsResult||{},m=k.Part||[];m=s.isArray(m)?m:[m],k.Part=m;var _=s.clone(k);s.extend(_,{statusCode:g.statusCode,headers:g.headers}),a(null,_)})}function Ie(e,a){var n={};n.uploadId=e.UploadId,X.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,{statusCode:v.statusCode,headers:v.headers})})}function Pe(e,a){X.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(n,u){if(n)return a(n);u&&u.body&&(u.Body=u.body,delete u.body),a(n,u)})}function _e(e,a){var n=e.Headers;!n["Cache-Control"]&&!n["cache-control"]&&(n["Cache-Control"]=""),!n["Content-Type"]&&!n["content-type"]&&(n["Content-Type"]=e.Body&&e.Body.type||""),X.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(u,v){if(u)return a(u);a(null,v)})}function Xe(e){var a=this;return s.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:a.options.UseRawKey,SystemClockOffset:a.options.SystemClockOffset})}function ze(e,a){var n=this,u=e.UseAccelerate===void 0?n.options.UseAccelerate:e.UseAccelerate,v=He({ForcePathStyle:n.options.ForcePathStyle,protocol:e.Protocol||n.options.Protocol,domain:e.Domain||n.options.Domain,bucket:e.Bucket,region:u?"accelerate":e.Region,object:e.Key}),g="";e.Query&&(g+=s.obj2str(e.Query)),e.QueryString&&(g+=(g?"&":"")+e.QueryString);var k=v;if(e.Sign!==void 0&&!e.Sign)return g&&(k+="?"+g),a(null,{Url:k}),k;var m=et.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:v}),_=ot.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:m,ForceSignHost:e.ForceSignHost===!1?!1:n.options.ForceSignHost},function(ue,ie){if(a){if(ue){a(ue);return}var Se=function(we){var Ne=we.match(/q-url-param-list.*?(?=&)/g)[0],Le="q-url-param-list="+encodeURIComponent(Ne.replace(/q-url-param-list=/,"")).toLowerCase(),Me=new RegExp(Ne,"g"),$e=we.replace(Me,Le);return $e},W=v;W+="?"+(ie.Authorization.indexOf("q-signature")>-1?Se(ie.Authorization):"sign="+encodeURIComponent(ie.Authorization)),ie.SecurityToken&&(W+="&x-cos-security-token="+ie.SecurityToken),ie.ClientIP&&(W+="&clientIP="+ie.ClientIP),ie.ClientUA&&(W+="&clientUA="+ie.ClientUA),ie.Token&&(W+="&token="+ie.Token),g&&(W+="&"+g),setTimeout(function(){a(null,{Url:W})})}});return _?(k+="?"+_.Authorization+(_.SecurityToken?"&x-cos-security-token="+_.SecurityToken:""),g&&(k+="&"+g)):g&&(k+="?"+g),k}function xe(e){var a={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},u=e&&e.AccessControlList||{},v=u.Grant;v&&(v=s.isArray(v)?v:[v]);var g={READ:0,WRITE:0,FULL_CONTROL:0};return v&&v.length&&s.each(v,function(k){var m=k.Grantee.URI&&k.Grantee.URI.endsWith("/groups/global/AllUsers");k.Grantee.ID==="qcs::cam::anyone:anyone"||m?g[k.Permission]=1:k.Grantee.ID!==e.Owner.ID&&a[n[k.Permission]].push('id="'+k.Grantee.ID+'"')}),g.FULL_CONTROL||g.WRITE&&g.READ?a.ACL="public-read-write":g.READ?a.ACL="public-read":a.ACL="private",s.each(n,function(k){a[k]=Ge(a[k].join(","))}),a}function Ge(e){var a=e.split(","),n={},u,v;for(u=0;u<a.length;)v=a[u].trim(),n[v]?a.splice(u,1):(n[v]=!0,a[u]=v,u++);return a.join(",")}function He(e){var a=e.region||"",n=e.bucket||"",u=n.substr(0,n.lastIndexOf("-")),v=n.substr(n.lastIndexOf("-")+1),g=e.domain,k=e.object;typeof g=="function"&&(g=g({Bucket:n,Region:a})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var m=e.protocol||(s.isBrowser&&(typeof location>"u"?"undefined":I(location))==="object"&&location.protocol==="http:"?"http:":"https:");g||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(a)>-1?g="{Region}.myqcloud.com":g="cos.{Region}.myqcloud.com",e.ForcePathStyle||(g="{Bucket}."+g)),g=g.replace(/\{\{AppId\}\}/gi,v).replace(/\{\{Bucket\}\}/gi,u).replace(/\{\{Region\}\}/gi,a).replace(/\{\{.*?\}\}/gi,""),g=g.replace(/\{AppId\}/gi,v).replace(/\{BucketName\}/gi,u).replace(/\{Bucket\}/gi,n).replace(/\{Region\}/gi,a).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(g)||(g=m+"//"+g),g.slice(-1)==="/"&&(g=g.slice(0,-1));var _=g;return e.ForcePathStyle&&(_+="/"+n),_+="/",k&&(_+=s.camSafeUrlEncode(k).replace(/%2F/g,"/")),e.isLocation&&(_=_.replace(/^https?:\/\//,"")),_}var et=function(a){var n=a.Url||a.Bucket&&a.Region;if(!n)return"";var u=a.UseAccelerate===void 0?this.options.UseAccelerate:a.UseAccelerate,v=a.Url||He({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:a.Bucket,region:u?"accelerate":a.Region}),g=v.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return g};function ot(e,a){var n=s.clone(e.Headers),u="";s.each(n,function(be,ve){(be===""||["content-type","cache-control","expires"].indexOf(ve.toLowerCase())>-1)&&delete n[ve],ve.toLowerCase()==="host"&&(u=be)});var v=e.ForceSignHost!==!1;!u&&e.SignHost&&v&&(n.Host=e.SignHost);var g=!1,k=function(ve,Ee){g||(g=!0,Ee&&Ee.XCosSecurityToken&&!Ee.SecurityToken&&(Ee=s.clone(Ee),Ee.SecurityToken=Ee.XCosSecurityToken,delete Ee.XCosSecurityToken),a&&a(ve,Ee))},m=this,_=e.Bucket||"",ue=e.Region||"",ie=e.Key||"";m.options.ForcePathStyle&&_&&(ie=_+"/"+ie);var Se="/"+ie,W={},Re=e.Scope;if(!Re){var we=e.Action||"",Ne=e.ResourceKey||e.Key||"";Re=e.Scope||[{action:we,bucket:_,region:ue,prefix:Ne}]}var Le=s.md5(JSON.stringify(Re));m._StsCache=m._StsCache||[],function(){var be,ve;for(be=m._StsCache.length-1;be>=0;be--){ve=m._StsCache[be];var Ee=Math.round(s.getSkewTime(m.options.SystemClockOffset)/1e3)+30;if(ve.StartTime&&Ee<ve.StartTime||Ee>=ve.ExpiredTime){m._StsCache.splice(be,1);continue}if(!ve.ScopeLimit||ve.ScopeLimit&&ve.ScopeKey===Le){W=ve;break}}}();var Me=function(){var ve="";W.StartTime&&e.Expires?ve=W.StartTime+";"+(W.StartTime+e.Expires*1):W.StartTime&&W.ExpiredTime&&(ve=W.StartTime+";"+W.ExpiredTime);var Ee=s.getAuth({SecretId:W.TmpSecretId,SecretKey:W.TmpSecretKey,Method:e.Method,Pathname:Se,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:m.options.UseRawKey,SystemClockOffset:m.options.SystemClockOffset,KeyTime:ve,ForceSignHost:v}),Te={Authorization:Ee,SecurityToken:W.SecurityToken||W.XCosSecurityToken||"",Token:W.Token||"",ClientIP:W.ClientIP||"",ClientUA:W.ClientUA||"",SignFrom:"client"};k(null,Te)},$e=function(ve){if(ve.Authorization){var Ee=!1,Te=ve.Authorization;if(Te)if(Te.indexOf(" ")>-1)Ee=!1;else if(Te.indexOf("q-sign-algorithm=")>-1&&Te.indexOf("q-ak=")>-1&&Te.indexOf("q-sign-time=")>-1&&Te.indexOf("q-key-time=")>-1&&Te.indexOf("q-url-param-list=")>-1)Ee=!0;else try{Te=atob(Te),Te.indexOf("a=")>-1&&Te.indexOf("k=")>-1&&Te.indexOf("t=")>-1&&Te.indexOf("r=")>-1&&Te.indexOf("b=")>-1&&(Ee=!0)}catch{}if(!Ee)return s.error(new Error("getAuthorization callback params format error"))}else{if(!ve.TmpSecretId)return s.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!ve.TmpSecretKey)return s.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!ve.SecurityToken&&!ve.XCosSecurityToken)return s.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!ve.ExpiredTime)return s.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(ve.ExpiredTime&&ve.ExpiredTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(ve.StartTime&&ve.StartTime.toString().length!==10)return s.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(W.ExpiredTime&&W.ExpiredTime-s.getSkewTime(m.options.SystemClockOffset)/1e3>60)Me();else if(m.options.getAuthorization)m.options.getAuthorization.call(m,{Bucket:_,Region:ue,Method:e.Method,Key:ie,Pathname:Se,Query:e.Query,Headers:n,Scope:Re,SystemClockOffset:m.options.SystemClockOffset,ForceSignHost:v},function(be){typeof be=="string"&&(be={Authorization:be});var ve=$e(be);if(ve)return k(ve);be.Authorization?k(null,be):(W=be||{},W.Scope=Re,W.ScopeKey=Le,m._StsCache.push(W),Me())});else if(m.options.getSTS)m.options.getSTS.call(m,{Bucket:_,Region:ue},function(be){W=be||{},W.Scope=Re,W.ScopeKey=Le,W.TmpSecretId||(W.TmpSecretId=W.SecretId),W.TmpSecretKey||(W.TmpSecretKey=W.SecretKey);var ve=$e(W);if(ve)return k(ve);m._StsCache.push(W),Me()});else return function(){var be="";if(m.options.StartTime&&e.Expires){if(m.options.StartTime.toString().length!==10)return k(s.error(new Error('params "StartTime" should be 10 digits')));be=m.options.StartTime+";"+(m.options.StartTime+e.Expires*1)}else if(m.options.StartTime&&m.options.ExpiredTime){if(m.options.StartTime.toString().length!==10)return k(s.error(new Error('params "StartTime" should be 10 digits')));if(m.options.ExpiredTime.toString().length!==10)return k(s.error(new Error('params "ExpiredTime" should be 10 digits')));be=m.options.StartTime+";"+m.options.ExpiredTime*1}var ve=s.getAuth({SecretId:e.SecretId||m.options.SecretId,SecretKey:e.SecretKey||m.options.SecretKey,Method:e.Method,Pathname:Se,Query:e.Query,Headers:n,Expires:e.Expires,KeyTime:be,UseRawKey:m.options.UseRawKey,SystemClockOffset:m.options.SystemClockOffset,ForceSignHost:v}),Ee={Authorization:ve,SecurityToken:m.options.SecurityToken||m.options.XCosSecurityToken,SignFrom:"client"};return k(null,Ee),Ee}();return""}function vt(e){var a=this,n=!1,u=!1,v=!1,g=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var k=e.error.Code,m=e.error.Message;(k==="RequestTimeTooSkewed"||k==="AccessDenied"&&m==="Request has expired")&&(u=!0)}catch{}if(e)if(u&&g){var _=Date.parse(g);this.options.CorrectClockSkew&&Math.abs(s.getSkewTime(this.options.SystemClockOffset)-_)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=_-Date.now(),n=!0)}else Math.floor(e.statusCode/100)===5?(n=!0,v=!1):(e.message==="timeout"||e.message==="CORS blocked or network error")&&(n=!0,v=a.options.AutoSwitchHost);return{canRetry:n,networkError:v}}function pt(e){var a=e.requestUrl,n=e.clientCalcSign,u=e.networkError;if(!this.options.AutoSwitchHost||!a||!n||!u)return!1;var v=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,g=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,k=v.test(a)&&!g.test(a);return k}function X(e,a){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=s.clearKey(e.qs),e.headers&&(e.headers=s.clearKey(e.headers)),e.qs&&(e.qs=s.clearKey(e.qs));var u=s.clone(e.qs);e.action&&(u[e.action]="");var v=e.url||e.Url,g=e.SignHost||et.call(this,{Bucket:e.Bucket,Region:e.Region,Url:v}),k=e.tracker,m=function(ue){var ie=n.options.SystemClockOffset;k&&k.setParams({signStartTime:new Date().getTime(),httpRetryTimes:ue-1}),e.SwitchHost&&(g=g.replace(/myqcloud.com/,"tencentcos.cn"));var Se=j(j({},e),{},{Query:u,SignHost:g,ForceSignHost:n.options.ForceSignHost});delete Se.tracker,n.logger.debug({cate:"PROCESS",tag:"base",msg:"开始计算签名, opt=".concat(JSON.stringify(Se))}),ot.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:u,Headers:e.headers,SignHost:g,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:n.options.ForceSignHost,SwitchHost:e.SwitchHost},function(W,Re){if(W){n.logger.error({cate:"PROCESS",tag:"base",msg:"签名获取失败, err=".concat(JSON.stringify(W.message))}),a(W);return}k&&k.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=Re,n.logger.debug({cate:"PROCESS",tag:"base",msg:"签名获取成功"}),n.logger.info({cate:"PROCESS",tag:"base",msg:"准备发起请求"}),yt.call(n,e,function(we,Ne){k&&k.setParams({httpEndTime:new Date().getTime()});var Le=!1,Me=!1;if(we){var $e=vt.call(n,we);Le=$e.canRetry||ie!==n.options.SystemClockOffset,Me=$e.networkError,n.logger.error({cate:"PROCESS",tag:"network",msg:"请求失败, err=".concat(JSON.stringify(we),", canRetry=").concat(Le,", networkError=").concat(Me,", tryTimes=").concat(ue)})}if(we&&ue<4&&Le){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var be=pt.call(n,{requestUrl:(we==null?void 0:we.url)||"",clientCalcSign:Re.SignFrom==="client",networkError:Me});e.SwitchHost=be,e.headers["x-cos-sdk-retry"]=!0,n.logger.info({cate:"PROCESS",tag:"base",msg:"重试请求, 重试第".concat(ue,"次")}),m(ue+1)}else n.logger.info({cate:"PROCESS",tag:"base",msg:"请求完成"}),a(we,Ne)})})};m(1)}function yt(e,a){var n=this,u=e.TaskId;if(!(u&&!n._isRunningTask(u))){var v=e.Bucket,g=e.Region,k=e.Key,m=e.method||"GET",_=e.Url||e.url,ue=e.body,ie=e.rawBody;n.options.UseAccelerate&&(g="accelerate"),_=_||He({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:v,region:g,object:k}),e.SwitchHost&&(_=_.replace(/myqcloud.com/,"tencentcos.cn"));var Se=k?_:"";e.action&&(_=_+"?"+(s.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(_.indexOf("?")>-1?_=_+"&"+e.qsStr:_=_+"?"+e.qsStr);var W={method:m,url:_,headers:e.headers,qs:e.qs,body:ue},Re="x-cos-security-token";if(s.isCIHost(_)&&(Re="x-ci-security-token"),W.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(W.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(W.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(W.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(W.headers[Re]=e.AuthData.SecurityToken),e.Action&&(W.action=e.Action),W.key=e.Key||e.ResourceKey,W.headers&&(W.headers=s.clearKey(W.headers)),W=s.clearKey(W),e.onProgress&&typeof e.onProgress=="function"){var we=ue&&(ue.size||ue.length)||0;W.onProgress=function(Te){if(!(u&&!n._isRunningTask(u))){var Ve=Te?Te.loaded:0;e.onProgress({loaded:Ve,total:we})}}}e.onDownloadProgress&&(W.onDownloadProgress=e.onDownloadProgress),e.DataType&&(W.dataType=e.DataType),this.options.Timeout&&(W.timeout=this.options.Timeout),n.options.ForcePathStyle&&(W.pathStyle=n.options.ForcePathStyle);var Ne=s.uuid();n.logger.info({cate:"PROCESS",tag:"network",msg:"[Request] ".concat(Ne,", requestOpt=").concat(JSON.stringify(W))}),n.emit("before-send",W);var Le=W.url.includes("accelerate."),Me=W.qs?Object.keys(W.qs).map(function(Te){return"".concat(Te,"=").concat(W.qs[Te])}).join("&"):"",$e=Me?W.url+"?"+Me:W.url;if(e.tracker){var be;e.tracker.setParams({url:$e,httpMethod:W.method,accelerate:Le,httpSize:((be=W.body)===null||be===void 0?void 0:be.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:Se,accelerate:Le})}var ve=(n.options.Request||M)(W,function(Te){if(!(Te&&Te.error==="abort")){var Ve={options:W,error:Te&&Te.error,statusCode:Te&&Te.statusCode||0,statusMessage:Te&&Te.statusMessage||"",headers:Te&&Te.headers||{},body:Te&&Te.body};n.emit("after-receive",Ve);var Ct=Ve.error,rt=Ve.body,Qe={statusCode:Ve.statusCode,statusMessage:Ve.statusMessage,headers:Ve.headers},Pt=Ct?"[error]":"[success]";n.logger.info({cate:"PROCESS",tag:"network",msg:"[Response] ".concat(Ne,", ").concat(Pt,", response=").concat(JSON.stringify(Qe))});var Rt,Ze=function(Ye,Ue){if(u&&n.off("inner-kill-task",Ee),!Rt){Rt=!0;var tt={};if(Qe&&Qe.statusCode&&(tt.statusCode=Qe.statusCode),Qe&&Qe.headers&&(tt.headers=Qe.headers),Ye)W.url&&(tt.url=W.url),W.method&&(tt.method=W.method),Ye=s.extend(Ye||{},tt),a(Ye,null);else{if(e.Action==="name/cos:PutObject"){var kt={};for(var bt in e.headers){var Ot=bt.toLowerCase();kt[Ot]=e.headers[bt]}kt["x-cos-callback"]?Ue.Error?(Ue.CallbackError=s.clone(Ue.Error),delete Ue.Error):Ue.CallbackBody=s.clone(Ue):kt["x-cos-return-body"]&&(Ue.Error?(Ue.ReturnError=s.clone(Ue.Error),delete Ue.Error):Ue.ReturnBody=s.clone(Ue))}Ue=s.extend(Ue||{},tt),a(null,Ue)}ve=null}};if(Ct)return Ze(s.error(Ct));var it=Qe.statusCode,xt=Math.floor(it/100)===2;if(ie){if(xt)return Ze(null,{body:rt});if(rt instanceof Blob){s.readAsBinaryString(rt,function(Bt){var Ye=s.parseResBody(Bt),Ue=Ye.Error||Ye;return Ze(s.error(new Error(Ue.Message||"response body error"),{code:Ue.Code,error:Ue}))});return}}var St=s.parseResBody(rt),st=St.Error||St;xt?Ze(null,St):st?Ze(s.error(new Error(st.Message),{code:st.Code,error:st})):it?Ze(s.error(new Error(Qe.statusMessage),{code:""+it})):it&&Ze(s.error(new Error("statusCode error")))}}),Ee=function(Ve){Ve.TaskId===u&&(ve&&ve.abort&&ve.abort(),n.off("inner-kill-task",Ee))};u&&n.on("inner-kill-task",Ee)}}var Tt={getService:S,putBucket:d,headBucket:C,getBucket:f,deleteBucket:y,putBucketAcl:x,getBucketAcl:b,putBucketCors:O,getBucketCors:U,deleteBucketCors:H,getBucketLocation:q,getBucketPolicy:l,putBucketPolicy:h,deleteBucketPolicy:T,putBucketTagging:i,getBucketTagging:o,deleteBucketTagging:t,putBucketLifecycle:r,getBucketLifecycle:c,deleteBucketLifecycle:p,putBucketVersioning:w,getBucketVersioning:R,putBucketReplication:F,getBucketReplication:K,deleteBucketReplication:J,putBucketWebsite:Q,getBucketWebsite:ee,deleteBucketWebsite:te,putBucketReferer:Ce,getBucketReferer:ce,putBucketDomain:re,getBucketDomain:Z,deleteBucketDomain:D,putBucketOrigin:Y,getBucketOrigin:ae,deleteBucketOrigin:de,putBucketLogging:ne,getBucketLogging:se,putBucketInventory:ge,postBucketInventory:pe,getBucketInventory:me,listBucketInventory:ke,deleteBucketInventory:Oe,putBucketAccelerate:qe,getBucketAccelerate:Fe,putBucketEncryption:De,getBucketEncryption:Je,deleteBucketEncryption:Ke,getObject:ct,headObject:We,listObjectVersions:nt,putObject:at,deleteObject:lt,getObjectAcl:dt,putObjectAcl:ft,optionsObject:ht,putObjectCopy:gt,deleteMultipleObject:z,restoreObject:B,putObjectTagging:E,getObjectTagging:P,deleteObjectTagging:G,selectObjectContent:$,appendObject:_e,uploadPartCopy:je,multipartInit:oe,multipartUpload:fe,multipartComplete:ye,multipartList:Be,multipartListPart:Ae,multipartAbort:Ie,request:Pe,getObjectUrl:ze,getAuth:Xe};function At(e,a,n){s.each(["Cors","Acl"],function(u){if(e.slice(-u.length)===u){var v=e.slice(0,-u.length)+u.toUpperCase(),g=s.apiWrapper(e,a),k=!1;n[v]=function(){!k&&console.warn("warning: cos."+v+" has been deprecated. Please Use cos."+e+" instead."),k=!0,g.apply(this,arguments)}}})}V.exports.init=function(e,a){a.transferToTaskMethod(Tt,"putObject"),s.each(Tt,function(n,u){e.prototype[u]=s.apiWrapper(u,n),At(u,n,e.prototype)})}},"./src/cos.js":function(V,le,A){var N=A("./src/util.js"),I=A("./src/event.js"),L=A("./src/task.js"),j=A("./src/base.js"),M=A("./src/advance.js"),s=A("./src/logger.js"),S=A("./package.json"),d={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null,EnableLog:!1,EnableLogcat:!1,LogLevel:"VERBOSE",ClsLogger:null,LogExtras:{}},C=function(y){var x,b,O=this;if(this.options=N.extend(N.clone(d),y||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),N.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");I.init(this),L.init(this),this.logger=new s({enableLog:this.options.EnableLog,enableLogcat:this.options.EnableLogcat,level:(x=this.options.LogLevel)!==null&&x!==void 0?x:"VERBOSE",clsLogger:this.options.ClsLogger,logExtras:(b=this.options.LogExtras)!==null&&b!==void 0?b:{}}),this.options.EnableLog&&(I.init(this.logger),this.logger.on("log-message",function(U){O.emit("log-message",U)}))};j.init(C,L),M.init(C,L),C.util={md5:N.md5,xml2json:N.xml2json,json2xml:N.json2xml,encodeBase64:N.encodeBase64},C.getAuthorization=N.getAuth,C.version=S.version,V.exports=C},"./src/event.js":function(V,le){var A=function(L){var j={},M=function(S){return!j[S]&&(j[S]=[]),j[S]};L.on=function(s,S){s==="task-list-update"&&console.warn('warning: Event "'+s+'" has been deprecated. Please use "list-update" instead.'),M(s).push(S)},L.off=function(s,S){for(var d=M(s),C=d.length-1;C>=0;C--)S===d[C]&&d.splice(C,1)},L.emit=function(s,S){for(var d=M(s).map(function(f){return f}),C=0;C<d.length;C++)d[C](S)}},N=function(){A(this)};V.exports.init=A,V.exports.EventProxy=N},"./src/logger.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/classCallCheck.js"),I=A("./node_modules/@babel/runtime/helpers/createClass.js"),L=A("./node_modules/@babel/runtime/helpers/defineProperty.js"),j=A("./package.json"),M=j.version,s=["VERBOSE","DEBUG","INFO","WARN","ERROR"],S=function(){function d(C){var f;N(this,d),L(this,"level","VERBOSE"),L(this,"clsLogger",null),L(this,"logExtras",{}),this.enableLog=(f=C.enableLog)!==null&&f!==void 0?f:!1,this.level=C.level||"VERBOSE",s.includes(this.level)||(this.level="VERBOSE"),this.enableLogcat=C.enableLogcat,this.clsLogger=C.clsLogger,this.logExtras=C.logExtras}return I(d,[{key:"info",value:function(){if(["VERBOSE","INFO"].includes(this.level)){for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];this.log.apply(this,["info"].concat(y))}}},{key:"debug",value:function(){if(["VERBOSE","DEBUG"].includes(this.level)){for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];this.log.apply(this,["debug"].concat(y))}}},{key:"warn",value:function(){if(["VERBOSE","WARN"].includes(this.level)){for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];this.log.apply(this,["warn"].concat(y))}}},{key:"error",value:function(){if(["VERBOSE","ERROR"].includes(this.level)){for(var f=arguments.length,y=new Array(f),x=0;x<f;x++)y[x]=arguments[x];this.log.apply(this,["error"].concat(y))}}},{key:"log",value:function(){if(this.enableLog){var f=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],x=y.cate,b=x===void 0?"base":x,O=y.tag,U=O===void 0?"base":O,H=y.msg,q={version:"cos-js-sdk-v5-".concat(M),timestamp:new Date().toISOString(),cate:"[".concat(b.toUpperCase(),"]"),tag:"[".concat(U.toUpperCase(),"]"),msg:H,extras:this.logExtras};this.enableLogcat&&console[f]("[".concat(q.version,"] ").concat(q.timestamp," ").concat(q.cate," ").concat(q.tag," ").concat(q.msg," ").concat(q.extras?JSON.stringify(q.extras):"")),this.clsLogger&&this.clsLogger.log(q,!1),this.emit("log-message",q)}}}])}();V.exports=S},"./src/session.js":function(V,le,A){var N=A("./src/util.js"),I="cos_sdk_upload_cache",L=30*24*3600,j,M,s=function(){try{var x=JSON.parse(localStorage.getItem(I))}catch{}x||(x=[]),j=x},S=function(){try{j.length?localStorage.setItem(I,JSON.stringify(j)):localStorage.removeItem(I)}catch{}},d=function(){if(!j){s.call(this);for(var x=!1,b=Math.round(Date.now()/1e3),O=j.length-1;O>=0;O--){var U=j[O][2];(!U||U+L<b)&&(j.splice(O,1),x=!0)}x&&S()}},C=function(){M||(M=setTimeout(function(){S(),M=null},400))},f={using:{},setUsing:function(x){f.using[x]=!0},removeUsing:function(x){delete f.using[x]},getFileId:function(x,b,O,U){return x.name&&x.size&&x.lastModifiedDate&&b?N.md5([x.name,x.size,x.lastModifiedDate,b,O,U].join("::")):null},getCopyFileId:function(x,b,O,U,H){var q=b["content-length"],h=b.etag||"",l=b["last-modified"];return x&&O?N.md5([x,q,h,l,O,U,H].join("::")):null},getUploadIdList:function(x){if(!x)return null;d.call(this);for(var b=[],O=0;O<j.length;O++)j[O][0]===x&&b.push(j[O][1]);return b.length?b:null},saveUploadId:function(x,b,O){if(d.call(this),!!x){for(var U=j.length-1;U>=0;U--){var H=j[U];H[0]===x&&H[1]===b&&j.splice(U,1)}j.unshift([x,b,Math.round(Date.now()/1e3)]),j.length>O&&j.splice(O),C()}},removeUploadId:function(x){d.call(this),delete f.using[x];for(var b=j.length-1;b>=0;b--)j[b][1]===x&&j.splice(b,1);C()}};V.exports=f},"./src/task.js":function(V,le,A){var N=A("./src/session.js"),I=A("./src/util.js"),L={},j=function(S,d){L[d]=S[d],S[d]=function(C,f){C.SkipTask?L[d].call(this,C,f):this._addTask(d,C,f)}},M=function(S){var d=[],C={},f=0,y=0,x=function(l){var T={id:l.id,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath,state:l.state,loaded:l.loaded,size:l.size,speed:l.speed,percent:l.percent,hashPercent:l.hashPercent,error:l.error};return l.FilePath&&(T.FilePath=l.FilePath),l._custom&&(T._custom=l._custom),T},b=function(){var h,l=function(){h=0,S.emit("task-list-update",{list:I.map(d,x)}),S.emit("list-update",{list:I.map(d,x)})};return function(){h||(h=setTimeout(l))}}(),O=function(){if(!(d.length<=S.options.UploadQueueSize)){for(var l=0;l<y&&l<d.length&&d.length>S.options.UploadQueueSize;){var T=d[l].state==="waiting"||d[l].state==="checking"||d[l].state==="uploading";!d[l]||!T?(C[d[l].id]&&delete C[d[l].id],d.splice(l,1),y--):l++}b()}},U=function(){if(!(f>=S.options.FileParallelLimit)){for(;d[y]&&d[y].state!=="waiting";)y++;if(!(y>=d.length)){var l=d[y];y++,f++,l.state="checking",l.params.onTaskStart&&l.params.onTaskStart(x(l)),!l.params.UploadData&&(l.params.UploadData={});var T=I.formatParams(l.api,l.params);L[l.api].call(S,T,function(i,o){S._isRunningTask(l.id)&&((l.state==="checking"||l.state==="uploading")&&(l.state=i?"error":"success",i&&(l.error=i),f--,b(),U(),l.callback&&l.callback(i,o),l.state==="success"&&(l.params&&(delete l.params.UploadData,delete l.params.Body,delete l.params),delete l.callback)),O())}),b(),setTimeout(U)}}},H=function(l,T){var i=C[l];if(i){var o=i&&i.state==="waiting",t=i&&(i.state==="checking"||i.state==="uploading");if(T==="canceled"&&i.state!=="canceled"||T==="paused"&&o||T==="paused"&&t){i.state=T,S.emit("inner-kill-task",{TaskId:l,toState:T});try{var r=i&&i.params&&i.params.UploadData.UploadId}catch{}T==="canceled"&&r&&N.removeUsing(r),b(),t&&(f--,U()),T==="canceled"&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}O()}};S._addTasks=function(h){I.each(h,function(l){S._addTask(l.api,l.params,l.callback,!0)}),b()};var q=!0;S._addTask=function(h,l,T,i){l=I.formatParams(h,l);var o=I.uuid();l.TaskId=o,l.onTaskReady&&l.onTaskReady(o),l.TaskReady&&(l.TaskReady(o),q&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),q=!1);var t={params:l,callback:T,api:h,index:d.length,id:o,Bucket:l.Bucket,Region:l.Region,Key:l.Key,FilePath:l.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:l._custom},r=l.onHashProgress;l.onHashProgress=function(p){S._isRunningTask(t.id)&&(t.hashPercent=p.percent,r&&r(p),b())};var c=l.onProgress;return l.onProgress=function(p){S._isRunningTask(t.id)&&(t.state==="checking"&&(t.state="uploading"),t.loaded=p.loaded,t.speed=p.speed,t.percent=p.percent,c&&c(p),b())},I.getFileSize(h,l,function(p,w){if(p)return T(I.error(p));C[o]=t,d.push(t),t.size=w,!i&&b(),U(),O()}),o},S._isRunningTask=function(h){var l=C[h];return!!(l&&(l.state==="checking"||l.state==="uploading"))},S.getTaskList=function(){return I.map(d,x)},S.cancelTask=function(h){H(h,"canceled")},S.pauseTask=function(h){H(h,"paused")},S.restartTask=function(h){var l=C[h];l&&(l.state==="paused"||l.state==="error")&&(l.state="waiting",b(),y=Math.min(y,l.index),U())},S.isUploadRunning=function(){return f||y<d.length}};V.exports.transferToTaskMethod=j,V.exports.init=M},"./src/tracker.js":function(V,le,A){var N=A("./node_modules/@babel/runtime/helpers/classCallCheck.js"),I=A("./node_modules/@babel/runtime/helpers/createClass.js"),L=A("./node_modules/@babel/runtime/helpers/typeof.js"),j=A("./package.json"),M=null,s=function(T,i){if(!M){if(typeof T!="function")throw new Error("Beacon not found");M=new T({appkey:"0WEB05PY6MHRGK0U",versionCode:j.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:i,sessionDuration:60*1e3})}return M},S=function(T){return!T||T<0?0:(T/1e3).toFixed(3)},d={getUid:function(){var T=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return T()+T()+"-"+T()+"-"+T()+"-"+T()+"-"+T()+T()+T()},getNetType:function(){if((typeof navigator>"u"?"undefined":L(navigator))==="object"){var T=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(T==null?void 0:T.type)||(T==null?void 0:T.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":L(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":L(navigator))!=="object")return"unknown os";var T=navigator.userAgent.toLowerCase(),i=/macintosh|mac os x/i.test(navigator.userAgent);return T.indexOf("win32")>=0||T.indexOf("wow32")>=0?"win32":T.indexOf("win64")>=0||T.indexOf("wow64")>=0?"win64":i?"mac":"unknown os"},isMobile:function(){var T=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":L(navigator))==="object"&&navigator.userAgent.match(T))},isAndroid:function(){var T=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":L(navigator))==="object"&&navigator.userAgent.match(T))},isIOS:function(){var T=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":L(navigator))==="object"&&navigator.userAgent.match(T))},isOtherMobile:function(){return C&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":L(navigator))!=="object")return"unknown device";var T=navigator.userAgent;return T}},C=d.isMobile(),f=d.isAndroid()?"android":d.isIOS?"ios":"other_mobile",y=d.getOsType(),x=C?f:y,b=d.getUA(),O=d.getProtocol(),U=function(T){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(T)?"UploadTask":T==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(T)?"CopyTask":T};function H(l){return l.replace(/([A-Z])/g,"_$1").toLowerCase()}function q(l){var T={},i=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],o=[].concat(i,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),t=l.requestResult==="Success"?i:o;for(var r in l)if(t.includes(r)){var c=H(r);T[c]=l[r]}return T.request_name=l.realApi?U(l.realApi):l.requestName,T}var h=function(){function l(T){N(this,l);var i=T.parent,o=T.traceId,t=T.bucket,r=T.region,c=T.apiName,p=T.realApi,w=T.httpMethod,R=T.fileKey,F=T.fileSize,K=T.accelerate,J=T.customId,Q=T.delay,ee=T.deepTracker,te=T.Beacon,Ce=T.clsReporter,ce=t&&t.substr(t.lastIndexOf("-")+1)||"";this.parent=i,this.deepTracker=ee,this.delay=Q,Ce&&!this.clsReporter&&(this.clsReporter=Ce),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:j.version,osName:x,networkType:"",requestName:c||"",requestResult:"",realApi:p,bucket:t,region:r,accelerate:K,httpMethod:w,url:"",host:"",httpDomain:"",requestPath:R||"",userAgent:b,networkProtocol:O,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:F||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:o||d.getUid(),appid:ce,partNumber:0,httpRetryTimes:0,customId:J||"",partTime:0},te&&(this.beacon=s(te,Q))}return I(l,[{key:"formatResult",value:function(i,o){var t,r,c,p,w,R,F=new Date().getTime(),K=d.getNetType(),J=i?(i==null?void 0:i.code)||(i==null||(t=i.error)===null||t===void 0?void 0:t.code)||(i==null||(r=i.error)===null||r===void 0?void 0:r.Code):"",Q=i?(i==null?void 0:i.message)||(i==null||(c=i.error)===null||c===void 0?void 0:c.message)||(i==null||(p=i.error)===null||p===void 0?void 0:p.Message):"",ee=Q,te=i?(i==null?void 0:i.resource)||(i==null||(w=i.error)===null||w===void 0?void 0:w.resource)||(i==null||(R=i.error)===null||R===void 0?void 0:R.Resource):"",Ce=i?i==null?void 0:i.statusCode:o.statusCode,ce=i?(i==null?void 0:i.headers)&&(i==null?void 0:i.headers["x-cos-request-id"]):(o==null?void 0:o.headers)&&(o==null?void 0:o.headers["x-cos-request-id"]),re=i?ce?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=o?o.headers&&o.headers["content-length"]:0);var Z=this.params.realApi==="sliceUploadFile",D=this.params.realApi==="sliceCopyFile";if(Z||D){var Y=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:Y<0?0:Y.toFixed(3)})}else{var ae=F-this.params.startTime,de=this.params.httpEndTime-this.params.httpStartTime,ne=this.params.httpSize/1024/(de/1e3),se=this.params.md5EndTime-this.params.md5StartTime,he=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",S(de)),this.parent.addParamValue("httpFullTime",S(ae)),this.parent.addParamValue("httpMd5",S(se)),this.parent.addParamValue("httpSign",S(he)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",S(de))),Object.assign(this.params,{httpFullTime:S(ae),httpMd5:S(se),httpSign:S(he),httpTookTime:S(de),httpSpeed:ne<0?0:ne.toFixed(3)})}if(Object.assign(this.params,{networkType:K,requestResult:i?"Failure":"Success",errorType:re,errorCode:J,errorHttpCode:Ce,errorName:ee,errorMessage:Q,errorServiceName:te,errorRequestId:ce}),i&&(!J||!Q)&&(this.params.fullError=i?JSON.stringify(i):""),this.params.url){try{var ge=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=ge[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(i,o){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(i,o);var t=q(this.params);this.beacon&&this.sendEventsToBeacon(t),this.clsReporter&&this.sendEventsToCLS(t)}}},{key:"setParams",value:function(i){Object.assign(this.params,i)}},{key:"addParamValue",value:function(i,o){this.params[i]=(+this.params[i]+ +o).toFixed(3)}},{key:"sendEventsToBeacon",value:function(i){var o=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(o&&!this.deepTracker)){var t="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(t,i):this.beacon&&this.beacon.onUserAction(t,i)}}},{key:"sendEventsToCLS",value:function(i){var o=this.delay===0;this.clsReporter.log(i,o)}},{key:"generateSubTracker",value:function(i){return Object.assign(i,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new l(i)}}])}();V.exports=h},"./src/util.js":function(V,le,A){(function(N){var I=A("./node_modules/@babel/runtime/helpers/typeof.js");function L(z,B){var E=typeof Symbol<"u"&&z[Symbol.iterator]||z["@@iterator"];if(!E){if(Array.isArray(z)||(E=j(z))||B){E&&(z=E);var P=0,G=function(){};return{s:G,n:function(){return P>=z.length?{done:!0}:{done:!1,value:z[P++]}},e:function(Be){throw Be},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $,oe=!0,fe=!1;return{s:function(){E=E.call(z)},n:function(){var Be=E.next();return oe=Be.done,Be},e:function(Be){fe=!0,$=Be},f:function(){try{oe||E.return==null||E.return()}finally{if(fe)throw $}}}}function j(z,B){if(z){if(typeof z=="string")return M(z,B);var E={}.toString.call(z).slice(8,-1);return E==="Object"&&z.constructor&&(E=z.constructor.name),E==="Map"||E==="Set"?Array.from(z):E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E)?M(z,B):void 0}}function M(z,B){(B==null||B>z.length)&&(B=z.length);for(var E=0,P=Array(B);E<B;E++)P[E]=z[E];return P}var s=A("./lib/md5.js"),S=A("./lib/crypto.js"),d=A("./node_modules/fast-xml-parser/src/fxp.js"),C=d.XMLParser,f=d.XMLBuilder,y=new C({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1,trimValues:!1}),x=new f,b=A("./lib/base64.js"),O=A("./src/tracker.js"),U="#text",H=function(B){if(ae(B))for(var E in B){var P=B[E];typeof P=="string"?E===U&&delete B[E]:Array.isArray(P)?P.forEach(function(G){H(G)}):ae(P)&&H(P)}},q=function(B){var E=y.parse(B);return H(E),E},h=function(B){var E=x.build(B);return E};function l(z){return encodeURIComponent(z).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function T(z,B){var E=[];for(var P in z)z.hasOwnProperty(P)&&E.push(B?l(P).toLowerCase():P);return E.sort(function(G,$){return G=G.toLowerCase(),$=$.toLowerCase(),G===$?0:G>$?1:-1})}var i=function(B,E){var P,G,$,oe=[],fe=T(B);for(P=0;P<fe.length;P++)G=fe[P],$=B[G]===void 0||B[G]===null?"":""+B[G],G=E?l(G).toLowerCase():l(G),$=l($)||"",oe.push(G+"="+$);return oe.join("&")},o=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],t=function(B){var E={};for(var P in B){var G=P.toLowerCase();(G.indexOf("x-cos-")>-1||G.indexOf("x-ci-")>-1||o.indexOf(G)>-1)&&(E[P]=B[P])}return E},r=function(B){B=B||{};var E=B.SecretId,P=B.SecretKey,G=B.KeyTime,$=(B.method||B.Method||"get").toLowerCase(),oe=re(B.Query||B.params||{}),fe=t(re(B.Headers||B.headers||{})),ye=B.Key||"",Be;B.UseRawKey?Be=B.Pathname||B.pathname||"/"+ye:(Be=B.Pathname||B.pathname||ye,Be.indexOf("/")!==0&&(Be="/"+Be));var Ae=B.ForceSignHost!==!1;if(!fe.Host&&!fe.host&&B.Bucket&&B.Region&&Ae&&(fe.Host=B.Bucket+".cos."+B.Region+".myqcloud.com"),!E)throw new Error("missing param SecretId");if(!P)throw new Error("missing param SecretKey");var Ie=Math.round(Je(B.SystemClockOffset)/1e3)-1,Pe=Ie,_e=B.Expires||B.expires;_e===void 0?Pe+=900:Pe+=_e*1||0;var Xe="sha1",ze=E,xe=G||Ie+";"+Pe,Ge=G||Ie+";"+Pe,He=T(fe,!0).join(";").toLowerCase(),et=T(oe,!0).join(";").toLowerCase(),ot=S.HmacSHA1(Ge,P).toString(),vt=[$,Be,je.obj2str(oe,!0),je.obj2str(fe,!0),""].join(`
`),pt=["sha1",xe,S.SHA1(vt).toString(),""].join(`
`),X=S.HmacSHA1(pt,ot).toString(),yt=["q-sign-algorithm="+Xe,"q-ak="+ze,"q-sign-time="+xe,"q-key-time="+Ge,"q-header-list="+He,"q-url-param-list="+et,"q-signature="+X].join("&");return yt},c=function(B,E,P){var G=E/8,$=B.slice(P,P+G);return new Uint8Array($).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[E]($)[0]},p=function(B,E,P,G){var $=B.slice(E,P),oe="";return new Uint8Array($).forEach(function(fe){oe+=String.fromCharCode(fe)}),G&&(oe=decodeURIComponent(escape(oe))),oe},w=function(B){for(var E={},P=p(B),G={records:[]};B.byteLength;){var $=c(B,32,0),oe=c(B,32,4),fe=$-oe-16,ye=0,Be;for(B=B.slice(12);ye<oe;){var Ae=c(B,8,ye),Ie=p(B,ye+1,ye+1+Ae),Pe=c(B,16,ye+Ae+2),_e=p(B,ye+Ae+4,ye+Ae+4+Pe);E[Ie]=_e,ye+=Ae+4+Pe}if(E[":event-type"]==="Records")Be=p(B,ye,ye+fe,!0),G.records.push(Be);else if(E[":event-type"]==="Stats")Be=p(B,ye,ye+fe,!0),G.stats=je.xml2json(Be).Stats;else if(E[":event-type"]==="error"){var Xe=E[":error-code"],ze=E[":error-message"],xe=new Error(ze);xe.message=ze,xe.name=xe.code=Xe,G.error=xe}B=B.slice(ye+fe+4)}return{payload:G.records.join(""),body:P}},R=function(B){var E=this.options.CopySourceParser;if(E)return E(B);var P=B.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return P?{Bucket:P[1],Region:P[3],Key:P[7]}:null},F=function(){},K=function(B){var E={};for(var P in B)B.hasOwnProperty(P)&&B[P]!==void 0&&B[P]!==null&&(E[P]=B[P]);return E},J=function(B,E){var P,G=new FileReader;FileReader.prototype.readAsBinaryString?(P=FileReader.prototype.readAsBinaryString,G.onload=function(){E(this.result)}):FileReader.prototype.readAsArrayBuffer?P=function(oe){var fe="",ye=new FileReader;ye.onload=function(Be){for(var Ae=new Uint8Array(ye.result),Ie=Ae.byteLength,Pe=0;Pe<Ie;Pe++)fe+=String.fromCharCode(Ae[Pe]);E(fe)},ye.readAsArrayBuffer(oe)}:console.error("FileReader not support readAsBinaryString"),P.call(G,B)},Q=function(){var z=function(P,G){P=P.split("."),G=G.split(".");for(var $=0;$<G.length;$++)if(P[$]!==G[$])return parseInt(P[$])>parseInt(G[$])?1:-1;return 0},B=function(P){if(!P)return!1;var G=(P.match(/Chrome\/([.\d]+)/)||[])[1],$=(P.match(/QBCore\/([.\d]+)/)||[])[1],oe=(P.match(/QQBrowser\/([.\d]+)/)||[])[1],fe=G&&z(G,"53.0.2785.116")<0&&$&&z($,"3.53.991.400")<0&&oe&&z(oe,"9.0.2524.400")<=0||!1;return fe};return B(typeof navigator<"u"&&navigator.userAgent)}(),ee=function(B,E,P,G,$){var oe;if(B.slice?oe=B.slice(E,P):B.mozSlice?oe=B.mozSlice(E,P):B.webkitSlice&&(oe=B.webkitSlice(E,P)),G&&Q){var fe=new FileReader;fe.onload=function(ye){oe=null,$(new Blob([fe.result]))},fe.readAsArrayBuffer(oe)}else $(oe)},te=function(B,E,P,G){P=P||F,B?typeof E=="string"?P(je.md5(E,!0)):Blob&&E instanceof Blob?je.getFileMd5(E,function($,oe){P(oe)},G):P():P()},Ce=1024*1024,ce=function(B,E,P){var G=B.size,$=0,oe=s.getCtx(),fe=function(Be){if(Be>=G){var Ae=oe.digest("hex");E(null,Ae);return}var Ie=Math.min(G,Be+Ce);je.fileSlice(B,Be,Ie,!1,function(Pe){J(Pe,function(_e){Pe=null,oe=oe.update(_e,!0),$+=_e.length,_e=null,P&&P({loaded:$,total:G,percent:Math.round($/G*1e4)/1e4}),fe(Be+Ce)})})};fe(0)};function re(z){return he(z,function(B){return I(B)==="object"&&B!==null?re(B):B})}function Z(z,B,E){return z&&B in z?z[B]:E}function D(z,B){return se(B,function(E,P){z[P]=B[P]}),z}function Y(z){return z instanceof Array}function ae(z){return Object.prototype.toString.call(z)==="[object Object]"}function de(z,B){for(var E=!1,P=0;P<z.length;P++)if(B===z[P]){E=!0;break}return E}function ne(z){return Y(z)?z:[z]}function se(z,B){for(var E in z)z.hasOwnProperty(E)&&B(z[E],E)}function he(z,B){var E=Y(z)?[]:{};for(var P in z)z.hasOwnProperty(P)&&(E[P]=B(z[P],P));return E}function ge(z,B){var E=Y(z),P=E?[]:{};for(var G in z)z.hasOwnProperty(G)&&B(z[G],G)&&(E?P.push(z[G]):P[G]=z[G]);return P}var pe=function(B){var E,P,G,$="";for(E=0,P=B.length/2;E<P;E++)G=parseInt(B[E*2]+B[E*2+1],16),$+=String.fromCharCode(G);return btoa($)},me=function(){var B=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return B()+B()+"-"+B()+"-"+B()+"-"+B()+"-"+B()+B()+B()},ke=function(B,E){var P=E.Bucket,G=E.Region,$=E.Key,oe=this.options.Domain,fe=!oe||typeof oe=="string"&&oe.indexOf("{Bucket}")>-1,ye=!oe||typeof oe=="string"&&oe.indexOf("{Region}")>-1;if(B.indexOf("Bucket")>-1||B==="deleteMultipleObject"||B==="multipartList"||B==="listObjectVersions"){if(fe&&!P)return"Bucket";if(ye&&!G)return"Region"}else if(B.indexOf("Object")>-1||B.indexOf("multipart")>-1||B==="sliceUploadFile"||B==="abortUploadTask"||B==="uploadFile"){if(fe&&!P)return"Bucket";if(ye&&!G)return"Region";if(!$)return"Key"}return!1},Oe=function(B,E){if(E=D({},E),B!=="getAuth"&&B!=="getV4Auth"&&B!=="getObjectUrl"){var P=E.Headers||{};if(E&&I(E)==="object"){(function(){for(var $ in E)E.hasOwnProperty($)&&$.indexOf("x-cos-")>-1&&(P[$]=E[$])})();var G={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};je.each(G,function($,oe){E[$]!==void 0&&(P[oe]=E[$])}),E.Headers=K(P)}}return E},qe=function(B,E){return function(P,G){var $=this;typeof P=="function"&&(G=P,P={}),P=Oe(B,P);var oe;if($.options.EnableReporter)if(P.calledBySdk==="sliceUploadFile"||P.calledBySdk==="sliceCopyFile")oe=P.tracker&&P.tracker.generateSubTracker({apiName:B});else if(["uploadFile","uploadFiles"].includes(B))oe=null;else{var fe=0;P.Body&&(fe=typeof P.Body=="string"?P.Body.length:P.Body.size||P.Body.byteLength||0);var ye=$.options.UseAccelerate||typeof $.options.Domain=="string"&&$.options.Domain.includes("accelerate.");oe=new O({Beacon:$.options.BeaconReporter,clsReporter:$.options.ClsReporter,bucket:P.Bucket,region:P.Region,apiName:B,realApi:B,accelerate:ye,fileKey:P.Key,fileSize:fe,deepTracker:$.options.DeepTracker,customId:$.options.CustomId,delay:$.options.TrackerDelay})}P.tracker=oe;var Be=function(xe){return xe&&xe.headers&&(xe.headers["x-ci-request-id"]&&(xe.RequestId=xe.headers["x-ci-request-id"]),xe.headers["x-cos-request-id"]&&(xe.RequestId=xe.headers["x-cos-request-id"]),xe.headers["x-cos-version-id"]&&(xe.VersionId=xe.headers["x-cos-version-id"]),xe.headers["x-cos-delete-marker"]&&(xe.DeleteMarker=xe.headers["x-cos-delete-marker"])),xe},Ae=function(xe,Ge){oe&&oe.report(xe,Ge),G&&G(Be(xe),Be(Ge))},Ie=function(){if(B!=="getService"&&B!=="abortUploadTask"){var xe=ke.call($,B,P);if(xe)return"missing param "+xe;if(P.Region){if($.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(P.Region))return"Region format error."}else{if(P.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(P.Region))return"Region format error."}!$.options.CompatibilityMode&&P.Region.indexOf("-")===-1&&P.Region!=="yfb"&&P.Region!=="default"&&P.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(P.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(P.Bucket))if(P.AppId)P.Bucket=P.Bucket+"-"+P.AppId;else if($.options.AppId)P.Bucket=P.Bucket+"-"+$.options.AppId;else return'Bucket should format as "test-1250000000".';P.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete P.AppId)}!$.options.UseRawKey&&P.Key&&P.Key.substr(0,1)==="/"&&(P.Key=P.Key.substr(1))}},Pe=Ie(),_e=["getAuth","getObjectUrl"].includes(B);if(typeof Promise=="function"&&!_e&&!G)return new Promise(function(ze,xe){if(G=function(He,et){He?xe(He):ze(et)},Pe)return Ae(je.error(new Error(Pe)));E.call($,P,Ae)});if(Pe)return Ae(je.error(new Error(Pe)));var Xe=E.call($,P,Ae);if(_e)return Xe}},Fe=function(B,E){var P=this,G=0,$=0,oe=Date.now(),fe,ye;function Be(){if(ye=0,E&&typeof E=="function"){fe=Date.now();var Ae=Math.max(0,Math.round(($-G)/((fe-oe)/1e3)*100)/100)||0,Ie;$===0&&B===0?Ie=1:Ie=Math.floor($/B*100)/100||0,oe=fe,G=$;try{E({loaded:$,total:B,speed:Ae,percent:Ie})}catch{}}}return function(Ae,Ie){if(Ae&&($=Ae.loaded,B=Ae.total),Ie)clearTimeout(ye),Be();else{if(ye)return;ye=setTimeout(Be,P.options.ProgressInterval)}}},De=function(B,E,P){var G;if(typeof E.Body=="string"?E.Body=new Blob([E.Body],{type:"text/plain"}):E.Body instanceof ArrayBuffer&&(E.Body=new Blob([E.Body])),E.Body&&(E.Body instanceof Blob||E.Body.toString()==="[object File]"||E.Body.toString()==="[object Blob]"))G=E.Body.size;else{P(je.error(new Error("params body format error, Only allow File|Blob|String.")));return}E.ContentLength=G,P(null,G)},Je=function(B){return Date.now()+(B||0)},Ke=function(B,E){var P=B;return B.message=B.message||null,typeof E=="string"?(B.error=E,B.message=E):I(E)==="object"&&E!==null&&(D(B,E),(E.code||E.name)&&(B.code=E.code||E.name),E.message&&(B.message=E.message),E.stack&&(B.stack=E.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(B,"name",{writable:!0,enumerable:!1}),Object.defineProperty(B,"message",{enumerable:!0})),B.name=E&&E.name||B.name||B.code||"Error",B.code||(B.code=B.name),B.error||(B.error=re(P)),B},We=function(){return(typeof globalThis>"u"?"undefined":I(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},nt=function(){return(typeof window>"u"?"undefined":I(window))!=="object"&&(typeof N>"u"?"undefined":I(N))==="object"&&!0&&!We()},ct=function(B){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(B)},at=function(){if((typeof navigator>"u"?"undefined":I(navigator))!=="object")return!1;var z=navigator.userAgent,B=!!z.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return B}(),lt=function(){return(typeof navigator>"u"?"undefined":I(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),dt=function(B,E){var P=b.encode(B);return E&&(P=P.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),P},ft=function(B){return B?b.decode(B):""},ht=function(B){var E=B.split("/"),P=[],G=L(E),$;try{for(G.s();!($=G.n()).done;){var oe=$.value;oe===".."?P.length&&P.pop():oe.length&&oe!=="."&&P.push(oe)}}catch(fe){G.e(fe)}finally{G.f()}return"/"+P.join("/")},gt=function(B){var E;if(B&&typeof B=="string"){var P=B.trim(),G=P.indexOf("<")===0,$=P.indexOf("{")===0;if(G)E=je.xml2json(B)||{};else if($)try{var oe=B.replace(/\n/g," "),fe=JSON.parse(oe);Object.prototype.toString.call(fe)==="[object Object]"?E=fe:E=B}catch{E=B}else E=B}else E=B||{};return E},je={noop:F,formatParams:Oe,apiWrapper:qe,xml2json:q,json2xml:h,md5:s,clearKey:K,fileSlice:ee,getBodyMd5:te,getFileMd5:ce,b64:pe,extend:D,isArray:Y,isInArray:de,makeArray:ne,each:se,map:he,filter:ge,clone:re,attr:Z,uuid:me,camSafeUrlEncode:l,throttleOnProgress:Fe,getFileSize:De,getSkewTime:Je,error:Ke,obj2str:i,getAuth:r,parseSelectPayload:w,getSourceParams:R,isBrowser:!0,isNode:nt,isCIHost:ct,isIOS_QQ:at&&lt,encodeBase64:dt,decodeBase64:ft,simplifyPath:ht,readAsBinaryString:J,parseResBody:gt};V.exports=je}).call(this,A("./node_modules/process/browser.js"))}})})}(ut)),ut.exports}var Nt=Ut();const Mt=wt(Nt);export{Mt as C};
