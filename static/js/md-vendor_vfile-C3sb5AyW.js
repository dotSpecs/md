import{V as w}from"./md-vendor_vfile-message-D9XLH_Vh.js";const f={basename:y,dirname:p,extname:b,join:A,sep:"/"};function y(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');h(t);let i=0,s=-1,n=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;n--;)if(t.codePointAt(n)===47){if(o){i=n+1;break}}else s<0&&(o=!0,s=n+1);return s<0?"":t.slice(i,s)}if(e===t)return"";let r=-1,l=e.length-1;for(;n--;)if(t.codePointAt(n)===47){if(o){i=n+1;break}}else r<0&&(o=!0,r=n+1),l>-1&&(t.codePointAt(n)===e.codePointAt(l--)?l<0&&(s=n):(l=-1,s=r));return i===s?s=r:s<0&&(s=t.length),t.slice(i,s)}function p(t){if(h(t),t.length===0)return".";let e=-1,i=t.length,s;for(;--i;)if(t.codePointAt(i)===47){if(s){e=i;break}}else s||(s=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function b(t){h(t);let e=t.length,i=-1,s=0,n=-1,o=0,r;for(;e--;){const l=t.codePointAt(e);if(l===47){if(r){s=e+1;break}continue}i<0&&(r=!0,i=e+1),l===46?n<0?n=e:o!==1&&(o=1):n>-1&&(o=-1)}return n<0||i<0||o===0||o===1&&n===i-1&&n===s+1?"":t.slice(n,i)}function A(...t){let e=-1,i;for(;++e<t.length;)h(t[e]),t[e]&&(i=i===void 0?t[e]:i+"/"+t[e]);return i===void 0?".":E(i)}function E(t){h(t);const e=t.codePointAt(0)===47;let i=P(t,!e);return i.length===0&&!e&&(i="."),i.length>0&&t.codePointAt(t.length-1)===47&&(i+="/"),e?"/"+i:i}function P(t,e){let i="",s=0,n=-1,o=0,r=-1,l,c;for(;++r<=t.length;){if(r<t.length)l=t.codePointAt(r);else{if(l===47)break;l=47}if(l===47){if(!(n===r-1||o===1))if(n!==r-1&&o===2){if(i.length<2||s!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(c=i.lastIndexOf("/"),c!==i.length-1){c<0?(i="",s=0):(i=i.slice(0,c),s=i.length-1-i.lastIndexOf("/")),n=r,o=0;continue}}else if(i.length>0){i="",s=0,n=r,o=0;continue}}e&&(i=i.length>0?i+"/..":"..",s=2)}else i.length>0?i+="/"+t.slice(n+1,r):i=t.slice(n+1,r),s=r-n-1;n=r,o=0}else l===46&&o>-1?o++:o=-1}return i}function h(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const R={cwd:x};function x(){return"/"}function g(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function L(t){if(typeof t=="string")t=new URL(t);else if(!g(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return I(t)}function I(t){if(t.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const e=t.pathname;let i=-1;for(;++i<e.length;)if(e.codePointAt(i)===37&&e.codePointAt(i+1)===50){const s=e.codePointAt(i+2);if(s===70||s===102){const n=new TypeError("File URL path must not include encoded / characters");throw n.code="ERR_INVALID_FILE_URL_PATH",n}}return decodeURIComponent(e)}const d=["history","path","basename","stem","extname","dirname"];class T{constructor(e){let i;e?g(e)?i={path:e}:typeof e=="string"||S(e)?i={value:e}:i=e:i={},this.cwd="cwd"in i?"":R.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<d.length;){const o=d[s];o in i&&i[o]!==void 0&&i[o]!==null&&(this[o]=o==="history"?[...i[o]]:i[o])}let n;for(n in i)d.includes(n)||(this[n]=i[n])}get basename(){return typeof this.path=="string"?f.basename(this.path):void 0}set basename(e){u(e,"basename"),a(e,"basename"),this.path=f.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?f.dirname(this.path):void 0}set dirname(e){m(this.basename,"dirname"),this.path=f.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?f.extname(this.path):void 0}set extname(e){if(a(e,"extname"),m(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=f.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){g(e)&&(e=L(e)),u(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?f.basename(this.path,this.extname):void 0}set stem(e){u(e,"stem"),a(e,"stem"),this.path=f.join(this.dirname||"",e+(this.extname||""))}fail(e,i,s){const n=this.message(e,i,s);throw n.fatal=!0,n}info(e,i,s){const n=this.message(e,i,s);return n.fatal=void 0,n}message(e,i,s){const n=new w(e,i,s);return this.path&&(n.name=this.path+":"+n.name,n.file=this.path),n.fatal=!1,this.messages.push(n),n}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function a(t,e){if(t&&t.includes(f.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+f.sep+"`")}function u(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function m(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function S(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}export{T as V};
