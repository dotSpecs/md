var ei=Object.defineProperty;var ti=(e,t,s)=>t in e?ei(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var v=(e,t,s)=>ti(e,typeof t!="symbol"?t+"":t,s);import{H as he,a as Qn,n as Ie,S as zt,m as si,d as ni,i as ri,c as Jn,g as ii,b as ai,t as oi,e as ci,f as di,h as Ze,N as er,j as ui,k as Zt,s as li,l as pi,o as hi,p as mi,q as tr,E as gi,r as Si,u as fi,v as Ei,w as me,x as Z,y as be,z as sr,A as wi,B as nr,C as yi,D as ue,F as He,G as bi,I as Ri,J as Ai,K as rr,L as Ci,M as ir,O as ar,P as or,Q as ki,R as xi,T as _i,U as vi,V as Pi,W as Ii,X as Oi,Y as Di,Z as Ni,_ as Ti,$ as Mi,a0 as Ui,a1 as Hi,a2 as Bi,a3 as Li,a4 as zi,a5 as Fi,a6 as $i,a7 as Ki,a8 as ji,a9 as Wi,aa as qi,ab as Vi,ac as Gi,ad as Zi,ae as Xi,af as Yi,ag as Qi,ah as Ji,ai as ea,aj as ta,ak as sa,al as na,am as ra,an as ia,ao as aa}from"./md-vendor_npm_smithy-Cp4n0ObP.js";import"./md-vendor_vite-plugin-node-polyfills-D0A3AXVj.js";import{f as oa}from"./md-vendor_fast-xml-parser-Ai0AX5WU.js";import{A as ca,a as da,S as ua,b as la}from"./md-vendor_npm_aws-crypto-CcT2yfcI.js";import{B as pa}from"./md-vendor_bowser-Rsyu5S1p.js";function ha(e){return t=>async s=>{var a,u;const{request:n}=s;return he.isInstance(n)&&n.body&&e.runtime==="node"&&((u=(a=e.requestHandler)==null?void 0:a.constructor)==null?void 0:u.name)!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...s,request:n})}}const ma={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},ga=e=>({applyToStack:t=>{t.add(ha(e),ma)}}),Oe={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Sa=Oe.WHEN_SUPPORTED,dt={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},fa=Oe.WHEN_SUPPORTED;var B;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.CRC64NVME="CRC64NVME",e.SHA1="SHA1",e.SHA256="SHA256"})(B||(B={}));var ys;(function(e){e.HEADER="header",e.TRAILER="trailer"})(ys||(ys={}));const Ft=B.CRC32;var bs;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(bs||(bs={}));function Ea(e,t,s){return e.$source||(e.$source={}),e.$source[t]=s,e}function q(e,t,s){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=s}const Rs=e=>{var t,s;return Qn.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((s=e.headers)==null?void 0:s.Date):void 0},Xt=e=>new Date(Date.now()+e),wa=(e,t)=>Math.abs(Xt(t).getTime()-e)>=3e5,As=(e,t)=>{const s=Date.parse(e);return wa(s,t)?s-Date.now():t},Be=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},cr=async e=>{var S,R,C;const t=Be("context",e.context),s=Be("config",e.config),n=(C=(R=(S=t.endpointV2)==null?void 0:S.properties)==null?void 0:R.authSchemes)==null?void 0:C[0],u=await Be("signer",s.signer)(n),p=e==null?void 0:e.signingRegion,d=e==null?void 0:e.signingRegionSet,m=e==null?void 0:e.signingName;return{config:s,signer:u,signingRegion:p,signingRegionSet:d,signingName:m}};class dr{async sign(t,s,n){var C;if(!he.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const a=await cr(n),{config:u,signer:p}=a;let{signingRegion:d,signingName:m}=a;const S=n.context;if(((C=S==null?void 0:S.authSchemes)==null?void 0:C.length)??!1){const[A,k]=S.authSchemes;(A==null?void 0:A.name)==="sigv4a"&&(k==null?void 0:k.name)==="sigv4"&&(d=(k==null?void 0:k.signingRegion)??d,m=(k==null?void 0:k.signingName)??m)}return await p.sign(t,{signingDate:Xt(u.systemClockOffset),signingRegion:d,signingService:m})}errorHandler(t){return s=>{const n=s.ServerTime??Rs(s.$response);if(n){const a=Be("config",t.config),u=a.systemClockOffset;a.systemClockOffset=As(n,a.systemClockOffset),a.systemClockOffset!==u&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(t,s){const n=Rs(t);if(n){const a=Be("config",s.config);a.systemClockOffset=As(n,a.systemClockOffset)}}}class ya extends dr{async sign(t,s,n){var A;if(!he.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:a,signer:u,signingRegion:p,signingRegionSet:d,signingName:m}=await cr(n),R=(await((A=a.sigv4aSigningRegionSet)==null?void 0:A.call(a))??d??[p]).join(",");return await u.sign(t,{signingDate:Xt(a.systemClockOffset),signingRegion:R,signingService:m})}}const ba=e=>(e.sigv4aSigningRegionSet=Ie(e.sigv4aSigningRegionSet),e),Ra=e=>{let t=e.credentials,s=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(S){S&&S!==t&&S!==n&&(s=!0),t=S;const R=Aa(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),C=Ca(e,R);s&&!C.attributed?(n=async A=>C(A).then(k=>Ea(k,"CREDENTIALS_CODE","e")),n.memoized=C.memoized,n.configBound=C.configBound,n.attributed=!0):n=C},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;const{signingEscapePath:a=!0,systemClockOffset:u=e.systemClockOffset||0,sha256:p}=e;let d;return e.signer?d=Ie(e.signer):e.regionInfoProvider?d=()=>Ie(e.region)().then(async S=>[await e.regionInfoProvider(S,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},S]).then(([S,R])=>{const{signingRegion:C,signingService:A}=S;e.signingRegion=e.signingRegion||C||R,e.signingName=e.signingName||A||e.serviceId;const k={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:p,uriEscapePath:a},z=e.signerConstructor||zt;return new z(k)}):d=async S=>{S=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Ie(e.region)(),properties:{}},S);const R=S.signingRegion,C=S.signingName;e.signingRegion=e.signingRegion||R,e.signingName=e.signingName||C||e.serviceId;const A={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:p,uriEscapePath:a},k=e.signerConstructor||zt;return new k(A)},Object.assign(e,{systemClockOffset:u,signingEscapePath:a,signer:d})};function Aa(e,{credentials:t,credentialDefaultProvider:s}){let n;return t?t!=null&&t.memoized?n=t:n=si(t,ri,ni):s?n=Ie(s(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function Ca(e,t){if(t.configBound)return t;const s=async n=>t({...n,callerClientConfig:e});return s.memoized=t.memoized,s.configBound=!0,s}const ka=(e,t)=>Jn(e,t).then(s=>t.utf8Encoder(s)),ur=(e,t)=>ka(e,t).then(s=>{if(s.length){const n=new oa.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(m,S)=>S.trim()===""&&S.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let a;try{a=n.parse(s,!0)}catch(m){throw m&&typeof m=="object"&&Object.defineProperty(m,"$responseBodyText",{value:s}),m}const u="#text",p=Object.keys(a)[0],d=a[p];return d[u]&&(d[p]=d[u],delete d[u]),ii(d)}return{}}),xa=async(e,t)=>{const s=await ur(e,t);return s.Error&&(s.Error.message=s.Error.message??s.Error.Message),s},_a=(e,t)=>{var s;if(((s=t==null?void 0:t.Error)==null?void 0:s.Code)!==void 0)return t.Error.Code;if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"},$t=[B.CRC32,B.CRC32C,B.CRC64NVME,B.SHA1,B.SHA256],va=[B.SHA256,B.SHA1,B.CRC32,B.CRC32C,B.CRC64NVME],Pa=(e,{requestChecksumRequired:t,requestAlgorithmMember:s,requestChecksumCalculation:n})=>{if(!s)return n===Oe.WHEN_SUPPORTED||t?Ft:void 0;if(!e[s])return;const a=e[s];if(!$t.includes(a))throw new Error(`The checksum algorithm "${a}" is not supported by the client. Select one of ${$t}.`);return a},Yt=e=>e===B.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,Ia=(e,t)=>{const s=e.toLowerCase();for(const n of Object.keys(t))if(s===n.toLowerCase())return!0;return!1},Oa=(e,t)=>{const s=e.toLowerCase();for(const n of Object.keys(t))if(n.toLowerCase().startsWith(s))return!0;return!1},lr=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!ai(e),Da=()=>ca,pr=(e,t)=>{switch(e){case B.MD5:return t.md5;case B.CRC32:return Da();case B.CRC32C:return da;case B.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case B.SHA1:return t.sha1;case B.SHA256:return t.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}},hr=(e,t)=>{const s=new e;return s.update(oi(t||"")),s.digest()},Na={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Ta=(e,t)=>(s,n)=>async a=>{if(!he.isInstance(a.request)||Oa("x-amz-checksum-",a.request.headers))return s(a);const{request:u,input:p}=a,{body:d,headers:m}=u,{base64Encoder:S,streamHasher:R}=e,{requestChecksumRequired:C,requestAlgorithmMember:A}=t,k=await e.requestChecksumCalculation(),z=A==null?void 0:A.name,T=A==null?void 0:A.httpHeader;z&&!p[z]&&(k===Oe.WHEN_SUPPORTED||C)&&(p[z]=Ft,T&&(m[T]=Ft));const ae=Pa(p,{requestChecksumRequired:C,requestAlgorithmMember:A==null?void 0:A.name,requestChecksumCalculation:k});let ce=d,ge=m;if(ae){switch(ae){case B.CRC32:q(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case B.CRC32C:q(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case B.CRC64NVME:q(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case B.SHA1:q(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case B.SHA256:q(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const Fe=Yt(ae),ws=pr(ae,e);if(lr(d)){const{getAwsChunkedEncodingStream:ct,bodyLengthChecker:Jr}=e;ce=ct(typeof e.requestStreamBufferSize=="number"&&e.requestStreamBufferSize>=8*1024?ci(d,e.requestStreamBufferSize,n.logger):d,{base64Encoder:S,bodyLengthChecker:Jr,checksumLocationName:Fe,checksumAlgorithmFn:ws,streamHasher:R}),ge={...m,"content-encoding":m["content-encoding"]?`${m["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":m["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Fe},delete ge["content-length"]}else if(!Ia(Fe,m)){const ct=await hr(ws,d);ge={...m,[Fe]:S(ct)}}}return await s({...a,request:{...u,headers:ge,body:ce}})},Ma={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},Ua=(e,t)=>(s,n)=>async a=>{const u=a.input,{requestValidationModeMember:p}=t,d=await e.requestChecksumCalculation(),m=await e.responseChecksumValidation();switch(d){case Oe.WHEN_REQUIRED:q(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Oe.WHEN_SUPPORTED:q(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(m){case dt.WHEN_REQUIRED:q(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case dt.WHEN_SUPPORTED:q(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return p&&!u[p]&&m===dt.WHEN_SUPPORTED&&(u[p]="ENABLED"),s(a)},mr=(e=[])=>{const t=[];for(const s of va)!e.includes(s)||!$t.includes(s)||t.push(s);return t},Ha=e=>{const t=e.lastIndexOf("-");if(t!==-1){const s=e.slice(t+1);if(!s.startsWith("0")){const n=parseInt(s,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},Ba=async(e,{checksumAlgorithmFn:t,base64Encoder:s})=>s(await hr(t,e)),La=async(e,{config:t,responseAlgorithms:s,logger:n})=>{const a=mr(s),{body:u,headers:p}=e;for(const d of a){const m=Yt(d),S=p[m];if(S){let R;try{R=pr(d,t)}catch(k){if(d===B.CRC64NVME){n==null||n.warn(`Skipping ${B.CRC64NVME} checksum validation: ${k.message}`);continue}throw k}const{base64Encoder:C}=t;if(lr(u)){e.body=di({expectedChecksum:S,checksumSourceLocation:m,checksum:new R,source:u,base64Encoder:C});return}const A=await Ba(u,{checksumAlgorithmFn:R,base64Encoder:C});if(A===S)break;throw new Error(`Checksum mismatch: expected "${A}" but received "${S}" in response header "${m}".`)}}},za={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Fa=(e,t)=>(s,n)=>async a=>{if(!he.isInstance(a.request))return s(a);const u=a.input,p=await s(a),d=p.response,{requestValidationModeMember:m,responseAlgorithms:S}=t;if(m&&u[m]==="ENABLED"){const{clientName:R,commandName:C}=n;if(R==="S3Client"&&C==="GetObjectCommand"&&mr(S).every(k=>{const z=Yt(k),T=d.headers[z];return!T||Ha(T)}))return p;await La(d,{config:e,responseAlgorithms:S,logger:n.logger})}return p},$a=(e,t)=>({applyToStack:s=>{s.add(Ta(e,t),Na),s.addRelativeTo(Ua(e,t),Ma),s.addRelativeTo(Fa(e,t),za)}}),Ka=e=>{const{requestChecksumCalculation:t,responseChecksumValidation:s,requestStreamBufferSize:n}=e;return Object.assign(e,{requestChecksumCalculation:Ze(t??Sa),responseChecksumValidation:Ze(s??fa),requestStreamBufferSize:Number(n??0)})};const ja=e=>t=>async s=>{if(!he.isInstance(s.request))return t(s);const{request:n}=s,{handlerProtocol:a=""}=e.requestHandler.metadata||{};if(a.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let u=n.hostname;n.port!=null&&(u+=`:${n.port}`),n.headers.host=u}return t(s)},Wa={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},qa=e=>({applyToStack:t=>{t.add(ja(e),Wa)}}),Va=()=>(e,t)=>async s=>{var n,a;try{const u=await e(s),{clientName:p,commandName:d,logger:m,dynamoDbDocumentClientOptions:S={}}=t,{overrideInputFilterSensitiveLog:R,overrideOutputFilterSensitiveLog:C}=S,A=R??t.inputFilterSensitiveLog,k=C??t.outputFilterSensitiveLog,{$metadata:z,...T}=u.output;return(n=m==null?void 0:m.info)==null||n.call(m,{clientName:p,commandName:d,input:A(s.input),output:k(T),metadata:z}),u}catch(u){const{clientName:p,commandName:d,logger:m,dynamoDbDocumentClientOptions:S={}}=t,{overrideInputFilterSensitiveLog:R}=S,C=R??t.inputFilterSensitiveLog;throw(a=m==null?void 0:m.error)==null||a.call(m,{clientName:p,commandName:d,input:C(s.input),error:u,metadata:u.$metadata}),u}},Ga={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Za=e=>({applyToStack:t=>{t.add(Va(),Ga)}});var Cs={};const ut="X-Amzn-Trace-Id",Xa="AWS_LAMBDA_FUNCTION_NAME",Ya="_X_AMZN_TRACE_ID",Qa=e=>t=>async s=>{const{request:n}=s;if(!he.isInstance(n)||e.runtime!=="node")return t(s);const a=Object.keys(n.headers??{}).find(m=>m.toLowerCase()===ut.toLowerCase())??ut;if(n.headers.hasOwnProperty(a))return t(s);const u=Cs[Xa],p=Cs[Ya],d=m=>typeof m=="string"&&m.length>0;return d(u)&&d(p)&&(n.headers[ut]=p),t({...s,request:n})},Ja={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},eo=e=>({applyToStack:t=>{t.add(Qa(e),Ja)}}),to="content-length",so="x-amz-decoded-content-length";function no(){return(e,t)=>async s=>{var a;const{request:n}=s;if(he.isInstance(n)&&!(to in n.headers)&&!(so in n.headers)){const u="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((a=t==null?void 0:t.logger)==null?void 0:a.warn)=="function"&&!(t.logger instanceof er)?t.logger.warn(u):console.warn(u)}return e({...s})}}const ro={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},io=e=>({applyToStack:t=>{t.add(no(),ro)}}),ao=e=>(t,s)=>async n=>{const a=await e.region(),u=e.region;let p=()=>{};s.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>s.__s3RegionRedirect}),p=()=>Object.defineProperty(e,"region",{writable:!0,value:u}));try{const d=await t(n);if(s.__s3RegionRedirect){p();const m=await e.region();if(a!==m)throw new Error("Region was not restored following S3 region redirect.")}return d}catch(d){throw p(),d}},oo={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function co(e){return(t,s)=>async n=>{var a,u,p;try{return await t(n)}catch(d){if(e.followRegionRedirects&&(((a=d==null?void 0:d.$metadata)==null?void 0:a.httpStatusCode)===301||((u=d==null?void 0:d.$metadata)==null?void 0:u.httpStatusCode)===400&&(d==null?void 0:d.name)==="IllegalLocationConstraintException")){try{const m=d.$response.headers["x-amz-bucket-region"];(p=s.logger)==null||p.debug(`Redirecting from ${await e.region()} to ${m}`),s.__s3RegionRedirect=m}catch(m){throw new Error("Region redirect failed: "+m)}return t(n)}throw d}}}const uo={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},lo=e=>({applyToStack:t=>{t.add(co(e),uo),t.addRelativeTo(ao(e),oo)}}),et=class et{constructor(t={}){v(this,"data");v(this,"lastPurgeTime",Date.now());this.data=t}get(t){const s=this.data[t];if(s)return s}set(t,s){return this.data[t]=s,s}delete(t){delete this.data[t]}async purgeExpired(){const t=Date.now();if(!(this.lastPurgeTime+et.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(const s in this.data){const n=this.data[s];if(!n.isRefreshing){const a=await n.identity;a.expiration&&a.expiration.getTime()<t&&delete this.data[s]}}}};v(et,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let Kt=et;class lt{constructor(t,s=!1,n=Date.now()){v(this,"_identity");v(this,"isRefreshing");v(this,"accessed");this._identity=t,this.isRefreshing=s,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}const tt=class tt{constructor(t,s=new Kt){v(this,"createSessionFn");v(this,"cache");this.createSessionFn=t,this.cache=s}async getS3ExpressIdentity(t,s){const n=s.Bucket,{cache:a}=this,u=a.get(n);return u?u.identity.then(p=>{var S,R;return(((S=p.expiration)==null?void 0:S.getTime())??0)<Date.now()?a.set(n,new lt(this.getIdentity(n))).identity:((((R=p.expiration)==null?void 0:R.getTime())??0)<Date.now()+tt.REFRESH_WINDOW_MS&&!u.isRefreshing&&(u.isRefreshing=!0,this.getIdentity(n).then(C=>{a.set(n,new lt(Promise.resolve(C)))})),p)}):a.set(n,new lt(this.getIdentity(n))).identity}async getIdentity(t){var a,u;await this.cache.purgeExpired().catch(p=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+p)});const s=await this.createSessionFn(t);if(!((a=s.Credentials)!=null&&a.AccessKeyId)||!((u=s.Credentials)!=null&&u.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretAccessKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration?new Date(s.Credentials.Expiration):void 0}}};v(tt,"REFRESH_WINDOW_MS",6e4);let jt=tt;const po="Directory",ho="S3Express",mo="sigv4-s3express",Wt="X-Amz-S3session-Token",qt=Wt.toLowerCase();class go extends zt{async signWithCredentials(t,s,n){const a=ks(s);t.headers[qt]=s.sessionToken;const u=this;return xs(u,a),u.signRequest(t,n??{})}async presignWithCredentials(t,s,n){const a=ks(s);return delete t.headers[qt],t.headers[Wt]=s.sessionToken,t.query=t.query??{},t.query[Wt]=s.sessionToken,xs(this,a),this.presign(t,n)}}function ks(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function xs(e,t){const s=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,a=()=>(clearTimeout(s),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=a}const So=e=>(t,s)=>async n=>{var a,u,p,d,m;if(s.endpointV2){const S=s.endpointV2,R=((p=(u=(a=S.properties)==null?void 0:a.authSchemes)==null?void 0:u[0])==null?void 0:p.name)===mo;if((((d=S.properties)==null?void 0:d.backend)===ho||((m=S.properties)==null?void 0:m.bucketType)===po)&&(q(s,"S3_EXPRESS_BUCKET","J"),s.isS3ExpressBucket=!0),R){const A=n.input.Bucket;if(A){const k=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:A});s.s3ExpressIdentity=k,he.isInstance(n.request)&&k.sessionToken&&(n.request.headers[qt]=k.sessionToken)}}}return t(n)},fo={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Eo=e=>({applyToStack:t=>{t.add(So(e),fo)}}),wo=async(e,t,s,n)=>{const a=await n.signWithCredentials(s,e,{});if(a.headers["X-Amz-Security-Token"]||a.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return a},yo=e=>t=>{throw t},bo=(e,t)=>{},Ro=e=>(t,s)=>async n=>{if(!he.isInstance(n.request))return t(n);const u=Zt(s).selectedHttpAuthScheme;if(!u)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:p={}},identity:d,signer:m}=u;let S;s.s3ExpressIdentity?S=await wo(s.s3ExpressIdentity,p,n.request,await e.signer()):S=await m.sign(n.request,d,p);const R=await t({...n,request:S}).catch((m.errorHandler||yo)(p));return(m.successHandler||bo)(R.response,p),R},Ao=e=>({applyToStack:t=>{t.addRelativeTo(Ro(e),ui)}}),Co=(e,{session:t})=>{const[s,n]=t,{forcePathStyle:a,useAccelerateEndpoint:u,disableMultiregionAccessPoints:p,followRegionRedirects:d,s3ExpressIdentityProvider:m,bucketEndpoint:S}=e;return Object.assign(e,{forcePathStyle:a??!1,useAccelerateEndpoint:u??!1,disableMultiregionAccessPoints:p??!1,followRegionRedirects:d??!1,s3ExpressIdentityProvider:m??new jt(async R=>s().send(new n({Bucket:R}))),bucketEndpoint:S??!1})},ko={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},xo=3e3,_o=e=>(t,s)=>async n=>{const a=await t(n),{response:u}=a;if(!Qn.isInstance(u))return a;const{statusCode:p,body:d}=u;if(p<200||p>=300||!(typeof(d==null?void 0:d.stream)=="function"||typeof(d==null?void 0:d.pipe)=="function"||typeof(d==null?void 0:d.tee)=="function"))return a;let S=d,R=d;d&&typeof d=="object"&&!(d instanceof Uint8Array)&&([S,R]=await li(d)),u.body=R;const C=await vo(S,{streamCollector:async k=>pi(k,xo)});typeof(S==null?void 0:S.destroy)=="function"&&S.destroy();const A=e.utf8Encoder(C.subarray(C.length-16));if(C.length===0&&ko[s.commandName]){const k=new Error("S3 aborted request");throw k.name="InternalError",k}return A&&A.endsWith("</Error>")&&(u.statusCode=400),a},vo=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),Po={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},gr=e=>({applyToStack:t=>{t.addRelativeTo(_o(e),Po)}}),Io=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function Oo(e){return(t,s)=>async n=>{var a,u,p,d;if(e.bucketEndpoint){const m=s.endpointV2;if(m){const S=n.input.Bucket;if(typeof S=="string")try{const R=new URL(S);s.endpointV2={...m,url:R}}catch(R){const C=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${S} could not be parsed as URL.`;throw((u=(a=s.logger)==null?void 0:a.constructor)==null?void 0:u.name)==="NoOpLogger"?console.warn(C):(d=(p=s.logger)==null?void 0:p.warn)==null||d.call(p,C),R}}}return t(n)}}const Do={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function No({bucketEndpoint:e}){return t=>async s=>{const{input:{Bucket:n}}=s;if(!e&&typeof n=="string"&&!Io(n)&&n.indexOf("/")>=0){const a=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw a.name="InvalidBucketName",a}return t({...s})}}const To={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Mo=e=>({applyToStack:t=>{t.add(No(e),To),t.addRelativeTo(Oo(e),Do)}}),Uo=void 0;function Ho(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function Bo(e){const t=Ie(e.userAgentAppId??Uo),{customUserAgent:s}=e;return Object.assign(e,{customUserAgent:typeof s=="string"?[[s]]:s,userAgentAppId:async()=>{var a,u;const n=await t();if(!Ho(n)){const p=((u=(a=e.logger)==null?void 0:a.constructor)==null?void 0:u.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?p==null||p.warn("userAgentAppId must be a string or undefined."):n.length>50&&(p==null||p.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return n}})}const Sr=(e,t=!1)=>{if(t){for(const s of e.split("."))if(!Sr(s))return!1;return!0}return!(!hi(e)||e.length<3||e.length>63||e!==e.toLowerCase()||mi(e))},_s=":",Lo="/",zo=e=>{const t=e.split(_s);if(t.length<6)return null;const[s,n,a,u,p,...d]=t;if(s!=="arn"||n===""||a===""||d.join(_s)==="")return null;const m=d.map(S=>S.split(Lo)).flat();return{partition:n,service:a,region:u,accountId:p,resourceId:m}},Fo=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],$o={partitions:Fo};let Ko=$o;const jo=e=>{const{partitions:t}=Ko;for(const n of t){const{regions:a,outputs:u}=n;for(const[p,d]of Object.entries(a))if(p===e)return{...u,...d}}for(const n of t){const{regionRegex:a,outputs:u}=n;if(new RegExp(a).test(e))return{...u}}const s=t.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},fr={isVirtualHostableS3Bucket:Sr,parseArn:zo,partition:jo};tr.aws=fr;const Wo=/\d{12}\.ddb/;async function qo(e,t,s){var u,p,d,m,S,R,C;const n=s.request;if(((u=n==null?void 0:n.headers)==null?void 0:u["smithy-protocol"])==="rpc-v2-cbor"&&q(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){const A=await t.retryStrategy();typeof A.acquireInitialRetryToken=="function"?(d=(p=A.constructor)==null?void 0:p.name)!=null&&d.includes("Adaptive")?q(e,"RETRY_MODE_ADAPTIVE","F"):q(e,"RETRY_MODE_STANDARD","E"):q(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){const A=e.endpointV2;switch(String((m=A==null?void 0:A.url)==null?void 0:m.hostname).match(Wo)&&q(e,"ACCOUNT_ID_ENDPOINT","O"),await((S=t.accountIdEndpointMode)==null?void 0:S.call(t))){case"disabled":q(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":q(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":q(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const a=(C=(R=e.__smithy_context)==null?void 0:R.selectedHttpAuthScheme)==null?void 0:C.identity;if(a!=null&&a.$source){const A=a;A.accountId&&q(e,"RESOLVED_ACCOUNT_ID","T");for(const[k,z]of Object.entries(A.$source??{}))q(e,k,z)}}const vs="user-agent",pt="x-amz-user-agent",Ps=" ",ht="/",Vo=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Go=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Is="-",Zo=1024;function Xo(e){let t="";for(const s in e){const n=e[s];if(t.length+n.length+1<=Zo){t.length?t+=","+n:t+=n;continue}break}return t}const Yo=e=>(t,s)=>async n=>{var k,z,T,ae;const{request:a}=n;if(!he.isInstance(a))return t(n);const{headers:u}=a,p=((k=s==null?void 0:s.userAgent)==null?void 0:k.map($e))||[],d=(await e.defaultUserAgentProvider()).map($e);await qo(s,e,n);const m=s;d.push(`m/${Xo(Object.assign({},(z=s.__smithy_context)==null?void 0:z.features,(T=m.__aws_sdk_context)==null?void 0:T.features))}`);const S=((ae=e==null?void 0:e.customUserAgent)==null?void 0:ae.map($e))||[],R=await e.userAgentAppId();R&&d.push($e([`app/${R}`]));const C=[].concat([...d,...p,...S]).join(Ps),A=[...d.filter(ce=>ce.startsWith("aws-sdk-")),...S].join(Ps);return e.runtime!=="browser"?(A&&(u[pt]=u[pt]?`${u[vs]} ${A}`:A),u[vs]=C):u[pt]=C,t({...n,request:a})},$e=e=>{var p;const t=e[0].split(ht).map(d=>d.replace(Vo,Is)).join(ht),s=(p=e[1])==null?void 0:p.replace(Go,Is),n=t.indexOf(ht),a=t.substring(0,n);let u=t.substring(n+1);return a==="api"&&(u=u.toLowerCase()),[a,u,s].filter(d=>d&&d.length>0).reduce((d,m,S)=>{switch(S){case 0:return m;case 1:return`${d}/${m}`;default:return`${d}#${m}`}},"")},Qo={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Jo=e=>({applyToStack:t=>{t.add(Yo(e),Qo)}});class Qt{constructor(t){v(this,"sigv4aSigner");v(this,"sigv4Signer");v(this,"signerOptions");this.sigv4Signer=new go(t),this.signerOptions=t}static sigv4aDependency(){return"none"}async sign(t,s={}){return s.signingRegion==="*"?this.getSigv4aSigner().sign(t,s):this.sigv4Signer.sign(t,s)}async signWithCredentials(t,s,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(t,s,n)}async presign(t,s={}){if(s.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(t,s)}async presignWithCredentials(t,s,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,s,n)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Jt="required",r="type",l="rules",i="conditions",o="fn",c="argv",b="ref",P="assign",E="url",w="properties",Ae="backend",te="authSchemes",J="disableDoubleEncoding",ee="signingName",re="signingRegion",y="headers",es="signingRegionSet",ec=6,tc=!1,Se=!0,de="isSet",j="booleanEquals",f="error",Xe="aws.partition",M="stringEquals",F="getAttr",K="name",H="substring",Os="bucketSuffix",ts="parseURL",g="endpoint",h="tree",Ye="aws.isVirtualHostableS3Bucket",Qe="{url#scheme}://{Bucket}.{url#authority}{url#path}",we="not",Ds="accessPointSuffix",qe="{url#scheme}://{url#authority}{url#path}",Er="hardwareType",wr="regionPrefix",Ns="bucketAliasSuffix",Vt="outpostId",Ce="isValidHostLabel",ss="sigv4a",ze="s3-outposts",De="s3",yr="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",br="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Ts="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Rr="aws.parseArn",Ar="bucketArn",Cr="arnType",Je="",ns="s3-object-lambda",kr="accesspoint",rs="accessPointName",Ms="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Us="mrapPartition",Hs="outpostType",Bs="arnPrefix",xr="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Ls="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",zs="https://s3.{partitionResult#dnsSuffix}",xe={[Jt]:!1,[r]:"String"},_e={[Jt]:!0,default:!1,[r]:"Boolean"},Me={[Jt]:!1,[r]:"Boolean"},pe={[o]:j,[c]:[{[b]:"Accelerate"},!0]},L={[o]:j,[c]:[{[b]:"UseFIPS"},!0]},U={[o]:j,[c]:[{[b]:"UseDualStack"},!0]},$={[o]:de,[c]:[{[b]:"Endpoint"}]},_r={[o]:Xe,[c]:[{[b]:"Region"}],[P]:"partitionResult"},Fs={[o]:M,[c]:[{[o]:F,[c]:[{[b]:"partitionResult"},K]},"aws-cn"]},Le={[o]:de,[c]:[{[b]:"Bucket"}]},N={[b]:"Bucket"},$s={[i]:[U],[f]:"S3Express does not support Dual-stack.",[r]:f},Ks={[i]:[pe],[f]:"S3Express does not support S3 Accelerate.",[r]:f},js={[i]:[$,{[o]:ts,[c]:[{[b]:"Endpoint"}],[P]:"url"}],[l]:[{[i]:[{[o]:de,[c]:[{[b]:"DisableS3ExpressSessionAuth"}]},{[o]:j,[c]:[{[b]:"DisableS3ExpressSessionAuth"},!0]}],[l]:[{[i]:[{[o]:j,[c]:[{[o]:F,[c]:[{[b]:"url"},"isIp"]},!0]}],[l]:[{[i]:[{[o]:"uriEncode",[c]:[N],[P]:"uri_encoded_bucket"}],[l]:[{[g]:{[E]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g}],[r]:h}],[r]:h},{[i]:[{[o]:Ye,[c]:[N,!1]}],[l]:[{[g]:{[E]:Qe,[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g}],[r]:h},{[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f}],[r]:h},{[i]:[{[o]:j,[c]:[{[o]:F,[c]:[{[b]:"url"},"isIp"]},!0]}],[l]:[{[i]:[{[o]:"uriEncode",[c]:[N],[P]:"uri_encoded_bucket"}],[l]:[{[g]:{[E]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4-s3express",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g}],[r]:h}],[r]:h},{[i]:[{[o]:Ye,[c]:[N,!1]}],[l]:[{[g]:{[E]:Qe,[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4-s3express",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g}],[r]:h},{[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f}],[r]:h},ne={[o]:ts,[c]:[{[b]:"Endpoint"}],[P]:"url"},mt={[o]:j,[c]:[{[o]:F,[c]:[{[b]:"url"},"isIp"]},!0]},vr={[b]:"url"},Pr={[o]:"uriEncode",[c]:[N],[P]:"uri_encoded_bucket"},Re={[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4",[ee]:"s3express",[re]:"{Region}"}]},x={},Ir={[o]:Ye,[c]:[N,!1]},Ws={[f]:"S3Express bucket name is not a valid virtual hostable name.",[r]:f},qs={[o]:de,[c]:[{[b]:"UseS3ExpressControlEndpoint"}]},Vs={[o]:j,[c]:[{[b]:"UseS3ExpressControlEndpoint"},!0]},_={[o]:we,[c]:[$]},Ke={[f]:"Unrecognized S3Express bucket name format.",[r]:f},Gs={[o]:we,[c]:[Le]},Zs={[b]:Er},Xs={[i]:[_],[f]:"Expected a endpoint to be specified but no endpoint was found",[r]:f},je={[te]:[{[J]:!0,[K]:ss,[ee]:ze,[es]:["*"]},{[J]:!0,[K]:"sigv4",[ee]:ze,[re]:"{Region}"}]},gt={[o]:j,[c]:[{[b]:"ForcePathStyle"},!1]},sc={[b]:"ForcePathStyle"},W={[o]:j,[c]:[{[b]:"Accelerate"},!1]},G={[o]:M,[c]:[{[b]:"Region"},"aws-global"]},X={[te]:[{[J]:!0,[K]:"sigv4",[ee]:De,[re]:"us-east-1"}]},D={[o]:we,[c]:[G]},Y={[o]:j,[c]:[{[b]:"UseGlobalEndpoint"},!0]},Ys={[E]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[w]:{[te]:[{[J]:!0,[K]:"sigv4",[ee]:De,[re]:"{Region}"}]},[y]:{}},V={[te]:[{[J]:!0,[K]:"sigv4",[ee]:De,[re]:"{Region}"}]},Q={[o]:j,[c]:[{[b]:"UseGlobalEndpoint"},!1]},O={[o]:j,[c]:[{[b]:"UseDualStack"},!1]},Qs={[E]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},I={[o]:j,[c]:[{[b]:"UseFIPS"},!1]},Js={[E]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},en={[E]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},St={[o]:j,[c]:[{[o]:F,[c]:[vr,"isIp"]},!1]},ft={[E]:yr,[w]:V,[y]:{}},Gt={[E]:Qe,[w]:V,[y]:{}},tn={[g]:Gt,[r]:g},Et={[E]:br,[w]:V,[y]:{}},sn={[E]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},We={[f]:"Invalid region: region was not a valid DNS name.",[r]:f},oe={[b]:Ar},Or={[b]:Cr},wt={[o]:F,[c]:[oe,"service"]},is={[b]:rs},nn={[i]:[U],[f]:"S3 Object Lambda does not support Dual-stack",[r]:f},rn={[i]:[pe],[f]:"S3 Object Lambda does not support S3 Accelerate",[r]:f},an={[i]:[{[o]:de,[c]:[{[b]:"DisableAccessPoints"}]},{[o]:j,[c]:[{[b]:"DisableAccessPoints"},!0]}],[f]:"Access points are not supported for this operation",[r]:f},yt={[i]:[{[o]:de,[c]:[{[b]:"UseArnRegion"}]},{[o]:j,[c]:[{[b]:"UseArnRegion"},!1]},{[o]:we,[c]:[{[o]:M,[c]:[{[o]:F,[c]:[oe,"region"]},"{Region}"]}]}],[f]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[r]:f},Dr={[o]:F,[c]:[{[b]:"bucketPartition"},K]},Nr={[o]:F,[c]:[oe,"accountId"]},bt={[te]:[{[J]:!0,[K]:"sigv4",[ee]:ns,[re]:"{bucketArn#region}"}]},on={[f]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[r]:f},Rt={[f]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[r]:f},At={[f]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[r]:f},Ct={[f]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[r]:f},cn={[f]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[r]:f},dn={[f]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[r]:f},Ue={[te]:[{[J]:!0,[K]:"sigv4",[ee]:De,[re]:"{bucketArn#region}"}]},un={[te]:[{[J]:!0,[K]:ss,[ee]:ze,[es]:["*"]},{[J]:!0,[K]:"sigv4",[ee]:ze,[re]:"{bucketArn#region}"}]},ln={[o]:Rr,[c]:[N]},pn={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:V,[y]:{}},hn={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:V,[y]:{}},mn={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:V,[y]:{}},kt={[E]:xr,[w]:V,[y]:{}},gn={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:V,[y]:{}},Sn={[b]:"UseObjectLambdaEndpoint"},xt={[te]:[{[J]:!0,[K]:"sigv4",[ee]:ns,[re]:"{Region}"}]},fn={[E]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},En={[E]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},wn={[E]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},_t={[E]:qe,[w]:V,[y]:{}},yn={[E]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[w]:V,[y]:{}},vt=[{[b]:"Region"}],nc=[{[b]:"Endpoint"}],rc=[N],bn=[U],Pt=[pe],ve=[$,ne],Rn=[{[o]:de,[c]:[{[b]:"DisableS3ExpressSessionAuth"}]},{[o]:j,[c]:[{[b]:"DisableS3ExpressSessionAuth"},!0]}],ic=[Pr],An=[Ir],le=[_r],Pe=[L],Cn=[{[o]:H,[c]:[N,6,14,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,14,16,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],fe=[{[i]:[L],[g]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[w]:Re,[y]:{}},[r]:g},{[g]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[w]:Re,[y]:{}},[r]:g}],kn=[{[o]:H,[c]:[N,6,15,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,15,17,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],xn=[{[o]:H,[c]:[N,6,19,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,19,21,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],_n=[{[o]:H,[c]:[N,6,20,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,20,22,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],vn=[{[o]:H,[c]:[N,6,26,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,26,28,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Ee=[{[i]:[L],[g]:{[E]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4-s3express",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g},{[g]:{[E]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[w]:{[Ae]:"S3Express",[te]:[{[J]:!0,[K]:"sigv4-s3express",[ee]:"s3express",[re]:"{Region}"}]},[y]:{}},[r]:g}],Pn=[N,0,7,!0],In=[{[o]:H,[c]:[N,7,15,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,15,17,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],On=[{[o]:H,[c]:[N,7,16,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,16,18,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Dn=[{[o]:H,[c]:[N,7,20,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,20,22,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Nn=[{[o]:H,[c]:[N,7,21,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,21,23,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],Tn=[{[o]:H,[c]:[N,7,27,!0],[P]:"s3expressAvailabilityZoneId"},{[o]:H,[c]:[N,27,29,!0],[P]:"s3expressAvailabilityZoneDelim"},{[o]:M,[c]:[{[b]:"s3expressAvailabilityZoneDelim"},"--"]}],ac=[Le],Mn=[{[o]:Ce,[c]:[{[b]:Vt},!1]}],Un=[{[o]:M,[c]:[{[b]:wr},"beta"]}],oc=["*"],Hn=[{[o]:Ce,[c]:[{[b]:"Region"},!1]}],ye=[{[o]:M,[c]:[{[b]:"Region"},"us-east-1"]}],It=[{[o]:M,[c]:[Or,kr]}],Bn=[{[o]:F,[c]:[oe,"resourceId[1]"],[P]:rs},{[o]:we,[c]:[{[o]:M,[c]:[is,Je]}]}],cc=[oe,"resourceId[1]"],Ot=[{[o]:we,[c]:[{[o]:M,[c]:[{[o]:F,[c]:[oe,"region"]},Je]}]}],Ln=[{[o]:we,[c]:[{[o]:de,[c]:[{[o]:F,[c]:[oe,"resourceId[2]"]}]}]}],dc=[oe,"resourceId[2]"],Dt=[{[o]:Xe,[c]:[{[o]:F,[c]:[oe,"region"]}],[P]:"bucketPartition"}],zn=[{[o]:M,[c]:[Dr,{[o]:F,[c]:[{[b]:"partitionResult"},K]}]}],Nt=[{[o]:Ce,[c]:[{[o]:F,[c]:[oe,"region"]},!0]}],Tt=[{[o]:Ce,[c]:[Nr,!1]}],Fn=[{[o]:Ce,[c]:[is,!1]}],$n=[{[o]:Ce,[c]:[{[b]:"Region"},!0]}],uc={parameters:{Bucket:xe,Region:xe,UseFIPS:_e,UseDualStack:_e,Endpoint:xe,ForcePathStyle:_e,Accelerate:_e,UseGlobalEndpoint:_e,UseObjectLambdaEndpoint:Me,Key:xe,Prefix:xe,CopySource:xe,DisableAccessPoints:Me,DisableMultiRegionAccessPoints:_e,UseArnRegion:Me,UseS3ExpressControlEndpoint:Me,DisableS3ExpressSessionAuth:Me},[l]:[{[i]:[{[o]:de,[c]:vt}],[l]:[{[i]:[pe,L],error:"Accelerate cannot be used with FIPS",[r]:f},{[i]:[U,$],error:"Cannot set dual-stack in combination with a custom endpoint.",[r]:f},{[i]:[$,L],error:"A custom endpoint cannot be combined with FIPS",[r]:f},{[i]:[$,pe],error:"A custom endpoint cannot be combined with S3 Accelerate",[r]:f},{[i]:[L,_r,Fs],error:"Partition does not support FIPS",[r]:f},{[i]:[Le,{[o]:H,[c]:[N,0,ec,Se],[P]:Os},{[o]:M,[c]:[{[b]:Os},"--x-s3"]}],[l]:[$s,Ks,js,{[i]:[qs,Vs],[l]:[{[i]:le,[l]:[{[i]:[Pr,_],[l]:[{[i]:Pe,endpoint:{[E]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:Re,[y]:x},[r]:g},{endpoint:{[E]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:Re,[y]:x},[r]:g}],[r]:h}],[r]:h}],[r]:h},{[i]:An,[l]:[{[i]:le,[l]:[{[i]:Rn,[l]:[{[i]:Cn,[l]:fe,[r]:h},{[i]:kn,[l]:fe,[r]:h},{[i]:xn,[l]:fe,[r]:h},{[i]:_n,[l]:fe,[r]:h},{[i]:vn,[l]:fe,[r]:h},Ke],[r]:h},{[i]:Cn,[l]:Ee,[r]:h},{[i]:kn,[l]:Ee,[r]:h},{[i]:xn,[l]:Ee,[r]:h},{[i]:_n,[l]:Ee,[r]:h},{[i]:vn,[l]:Ee,[r]:h},Ke],[r]:h}],[r]:h},Ws],[r]:h},{[i]:[Le,{[o]:H,[c]:Pn,[P]:Ds},{[o]:M,[c]:[{[b]:Ds},"--xa-s3"]}],[l]:[$s,Ks,js,{[i]:An,[l]:[{[i]:le,[l]:[{[i]:Rn,[l]:[{[i]:In,[l]:fe,[r]:h},{[i]:On,[l]:fe,[r]:h},{[i]:Dn,[l]:fe,[r]:h},{[i]:Nn,[l]:fe,[r]:h},{[i]:Tn,[l]:fe,[r]:h},Ke],[r]:h},{[i]:In,[l]:Ee,[r]:h},{[i]:On,[l]:Ee,[r]:h},{[i]:Dn,[l]:Ee,[r]:h},{[i]:Nn,[l]:Ee,[r]:h},{[i]:Tn,[l]:Ee,[r]:h},Ke],[r]:h}],[r]:h},Ws],[r]:h},{[i]:[Gs,qs,Vs],[l]:[{[i]:le,[l]:[{[i]:ve,endpoint:{[E]:qe,[w]:Re,[y]:x},[r]:g},{[i]:Pe,endpoint:{[E]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[w]:Re,[y]:x},[r]:g},{endpoint:{[E]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[w]:Re,[y]:x},[r]:g}],[r]:h}],[r]:h},{[i]:[Le,{[o]:H,[c]:[N,49,50,Se],[P]:Er},{[o]:H,[c]:[N,8,12,Se],[P]:wr},{[o]:H,[c]:Pn,[P]:Ns},{[o]:H,[c]:[N,32,49,Se],[P]:Vt},{[o]:Xe,[c]:vt,[P]:"regionPartition"},{[o]:M,[c]:[{[b]:Ns},"--op-s3"]}],[l]:[{[i]:Mn,[l]:[{[i]:[{[o]:M,[c]:[Zs,"e"]}],[l]:[{[i]:Un,[l]:[Xs,{[i]:ve,endpoint:{[E]:"https://{Bucket}.ec2.{url#authority}",[w]:je,[y]:x},[r]:g}],[r]:h},{endpoint:{[E]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[w]:je,[y]:x},[r]:g}],[r]:h},{[i]:[{[o]:M,[c]:[Zs,"o"]}],[l]:[{[i]:Un,[l]:[Xs,{[i]:ve,endpoint:{[E]:"https://{Bucket}.op-{outpostId}.{url#authority}",[w]:je,[y]:x},[r]:g}],[r]:h},{endpoint:{[E]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[w]:je,[y]:x},[r]:g}],[r]:h},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[r]:f}],[r]:h},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[r]:f}],[r]:h},{[i]:ac,[l]:[{[i]:[$,{[o]:we,[c]:[{[o]:de,[c]:[{[o]:ts,[c]:nc}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[r]:f},{[i]:[gt,Ir],[l]:[{[i]:le,[l]:[{[i]:Hn,[l]:[{[i]:[pe,Fs],error:"S3 Accelerate cannot be used in this region",[r]:f},{[i]:[U,L,W,_,G],endpoint:{[E]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[U,L,W,_,D,Y],[l]:[{endpoint:Ys,[r]:g}],[r]:h},{[i]:[U,L,W,_,D,Q],endpoint:Ys,[r]:g},{[i]:[O,L,W,_,G],endpoint:{[E]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[O,L,W,_,D,Y],[l]:[{endpoint:Qs,[r]:g}],[r]:h},{[i]:[O,L,W,_,D,Q],endpoint:Qs,[r]:g},{[i]:[U,I,pe,_,G],endpoint:{[E]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[U,I,pe,_,D,Y],[l]:[{endpoint:Js,[r]:g}],[r]:h},{[i]:[U,I,pe,_,D,Q],endpoint:Js,[r]:g},{[i]:[U,I,W,_,G],endpoint:{[E]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[U,I,W,_,D,Y],[l]:[{endpoint:en,[r]:g}],[r]:h},{[i]:[U,I,W,_,D,Q],endpoint:en,[r]:g},{[i]:[O,I,W,$,ne,mt,G],endpoint:{[E]:yr,[w]:X,[y]:x},[r]:g},{[i]:[O,I,W,$,ne,St,G],endpoint:{[E]:Qe,[w]:X,[y]:x},[r]:g},{[i]:[O,I,W,$,ne,mt,D,Y],[l]:[{[i]:ye,endpoint:ft,[r]:g},{endpoint:ft,[r]:g}],[r]:h},{[i]:[O,I,W,$,ne,St,D,Y],[l]:[{[i]:ye,endpoint:Gt,[r]:g},tn],[r]:h},{[i]:[O,I,W,$,ne,mt,D,Q],endpoint:ft,[r]:g},{[i]:[O,I,W,$,ne,St,D,Q],endpoint:Gt,[r]:g},{[i]:[O,I,pe,_,G],endpoint:{[E]:br,[w]:X,[y]:x},[r]:g},{[i]:[O,I,pe,_,D,Y],[l]:[{[i]:ye,endpoint:Et,[r]:g},{endpoint:Et,[r]:g}],[r]:h},{[i]:[O,I,pe,_,D,Q],endpoint:Et,[r]:g},{[i]:[O,I,W,_,G],endpoint:{[E]:Ts,[w]:X,[y]:x},[r]:g},{[i]:[O,I,W,_,D,Y],[l]:[{[i]:ye,endpoint:{[E]:Ts,[w]:V,[y]:x},[r]:g},{endpoint:sn,[r]:g}],[r]:h},{[i]:[O,I,W,_,D,Q],endpoint:sn,[r]:g}],[r]:h},We],[r]:h}],[r]:h},{[i]:[$,ne,{[o]:M,[c]:[{[o]:F,[c]:[vr,"scheme"]},"http"]},{[o]:Ye,[c]:[N,Se]},gt,I,O,W],[l]:[{[i]:le,[l]:[{[i]:Hn,[l]:[tn],[r]:h},We],[r]:h}],[r]:h},{[i]:[gt,{[o]:Rr,[c]:rc,[P]:Ar}],[l]:[{[i]:[{[o]:F,[c]:[oe,"resourceId[0]"],[P]:Cr},{[o]:we,[c]:[{[o]:M,[c]:[Or,Je]}]}],[l]:[{[i]:[{[o]:M,[c]:[wt,ns]}],[l]:[{[i]:It,[l]:[{[i]:Bn,[l]:[nn,rn,{[i]:Ot,[l]:[an,{[i]:Ln,[l]:[yt,{[i]:Dt,[l]:[{[i]:le,[l]:[{[i]:zn,[l]:[{[i]:Nt,[l]:[{[i]:[{[o]:M,[c]:[Nr,Je]}],error:"Invalid ARN: Missing account id",[r]:f},{[i]:Tt,[l]:[{[i]:Fn,[l]:[{[i]:ve,endpoint:{[E]:Ms,[w]:bt,[y]:x},[r]:g},{[i]:Pe,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:bt,[y]:x},[r]:g},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:bt,[y]:x},[r]:g}],[r]:h},on],[r]:h},Rt],[r]:h},At],[r]:h},Ct],[r]:h}],[r]:h}],[r]:h},cn],[r]:h},{error:"Invalid ARN: bucket ARN is missing a region",[r]:f}],[r]:h},dn],[r]:h},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[r]:f}],[r]:h},{[i]:It,[l]:[{[i]:Bn,[l]:[{[i]:Ot,[l]:[{[i]:It,[l]:[{[i]:Ot,[l]:[an,{[i]:Ln,[l]:[yt,{[i]:Dt,[l]:[{[i]:le,[l]:[{[i]:[{[o]:M,[c]:[Dr,"{partitionResult#name}"]}],[l]:[{[i]:Nt,[l]:[{[i]:[{[o]:M,[c]:[wt,De]}],[l]:[{[i]:Tt,[l]:[{[i]:Fn,[l]:[{[i]:Pt,error:"Access Points do not support S3 Accelerate",[r]:f},{[i]:[L,U],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:Ue,[y]:x},[r]:g},{[i]:[L,O],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:Ue,[y]:x},[r]:g},{[i]:[I,U],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:Ue,[y]:x},[r]:g},{[i]:[I,O,$,ne],endpoint:{[E]:Ms,[w]:Ue,[y]:x},[r]:g},{[i]:[I,O],endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:Ue,[y]:x},[r]:g}],[r]:h},on],[r]:h},Rt],[r]:h},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[r]:f}],[r]:h},At],[r]:h},Ct],[r]:h}],[r]:h}],[r]:h},cn],[r]:h}],[r]:h}],[r]:h},{[i]:[{[o]:Ce,[c]:[is,Se]}],[l]:[{[i]:bn,error:"S3 MRAP does not support dual-stack",[r]:f},{[i]:Pe,error:"S3 MRAP does not support FIPS",[r]:f},{[i]:Pt,error:"S3 MRAP does not support S3 Accelerate",[r]:f},{[i]:[{[o]:j,[c]:[{[b]:"DisableMultiRegionAccessPoints"},Se]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[r]:f},{[i]:[{[o]:Xe,[c]:vt,[P]:Us}],[l]:[{[i]:[{[o]:M,[c]:[{[o]:F,[c]:[{[b]:Us},K]},{[o]:F,[c]:[oe,"partition"]}]}],[l]:[{endpoint:{[E]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[w]:{[te]:[{[J]:Se,name:ss,[ee]:De,[es]:oc}]},[y]:x},[r]:g}],[r]:h},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[r]:f}],[r]:h}],[r]:h},{error:"Invalid Access Point Name",[r]:f}],[r]:h},dn],[r]:h},{[i]:[{[o]:M,[c]:[wt,ze]}],[l]:[{[i]:bn,error:"S3 Outposts does not support Dual-stack",[r]:f},{[i]:Pe,error:"S3 Outposts does not support FIPS",[r]:f},{[i]:Pt,error:"S3 Outposts does not support S3 Accelerate",[r]:f},{[i]:[{[o]:de,[c]:[{[o]:F,[c]:[oe,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[r]:f},{[i]:[{[o]:F,[c]:cc,[P]:Vt}],[l]:[{[i]:Mn,[l]:[yt,{[i]:Dt,[l]:[{[i]:le,[l]:[{[i]:zn,[l]:[{[i]:Nt,[l]:[{[i]:Tt,[l]:[{[i]:[{[o]:F,[c]:dc,[P]:Hs}],[l]:[{[i]:[{[o]:F,[c]:[oe,"resourceId[3]"],[P]:rs}],[l]:[{[i]:[{[o]:M,[c]:[{[b]:Hs},kr]}],[l]:[{[i]:ve,endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[w]:un,[y]:x},[r]:g},{endpoint:{[E]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[w]:un,[y]:x},[r]:g}],[r]:h},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[r]:f}],[r]:h},{error:"Invalid ARN: expected an access point name",[r]:f}],[r]:h},{error:"Invalid ARN: Expected a 4-component resource",[r]:f}],[r]:h},Rt],[r]:h},At],[r]:h},Ct],[r]:h}],[r]:h}],[r]:h},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[r]:f}],[r]:h},{error:"Invalid ARN: The Outpost Id was not set",[r]:f}],[r]:h},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[r]:f}],[r]:h},{error:"Invalid ARN: No ARN type specified",[r]:f}],[r]:h},{[i]:[{[o]:H,[c]:[N,0,4,tc],[P]:Bs},{[o]:M,[c]:[{[b]:Bs},"arn:"]},{[o]:we,[c]:[{[o]:de,[c]:[ln]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[r]:f},{[i]:[{[o]:j,[c]:[sc,Se]},ln],error:"Path-style addressing cannot be used with ARN buckets",[r]:f},{[i]:ic,[l]:[{[i]:le,[l]:[{[i]:[W],[l]:[{[i]:[U,_,L,G],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:X,[y]:x},[r]:g},{[i]:[U,_,L,D,Y],[l]:[{endpoint:pn,[r]:g}],[r]:h},{[i]:[U,_,L,D,Q],endpoint:pn,[r]:g},{[i]:[O,_,L,G],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:X,[y]:x},[r]:g},{[i]:[O,_,L,D,Y],[l]:[{endpoint:hn,[r]:g}],[r]:h},{[i]:[O,_,L,D,Q],endpoint:hn,[r]:g},{[i]:[U,_,I,G],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[w]:X,[y]:x},[r]:g},{[i]:[U,_,I,D,Y],[l]:[{endpoint:mn,[r]:g}],[r]:h},{[i]:[U,_,I,D,Q],endpoint:mn,[r]:g},{[i]:[O,$,ne,I,G],endpoint:{[E]:xr,[w]:X,[y]:x},[r]:g},{[i]:[O,$,ne,I,D,Y],[l]:[{[i]:ye,endpoint:kt,[r]:g},{endpoint:kt,[r]:g}],[r]:h},{[i]:[O,$,ne,I,D,Q],endpoint:kt,[r]:g},{[i]:[O,_,I,G],endpoint:{[E]:Ls,[w]:X,[y]:x},[r]:g},{[i]:[O,_,I,D,Y],[l]:[{[i]:ye,endpoint:{[E]:Ls,[w]:V,[y]:x},[r]:g},{endpoint:gn,[r]:g}],[r]:h},{[i]:[O,_,I,D,Q],endpoint:gn,[r]:g}],[r]:h},{error:"Path-style addressing cannot be used with S3 Accelerate",[r]:f}],[r]:h}],[r]:h}],[r]:h},{[i]:[{[o]:de,[c]:[Sn]},{[o]:j,[c]:[Sn,Se]}],[l]:[{[i]:le,[l]:[{[i]:$n,[l]:[nn,rn,{[i]:ve,endpoint:{[E]:qe,[w]:xt,[y]:x},[r]:g},{[i]:Pe,endpoint:{[E]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[w]:xt,[y]:x},[r]:g},{endpoint:{[E]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[w]:xt,[y]:x},[r]:g}],[r]:h},We],[r]:h}],[r]:h},{[i]:[Gs],[l]:[{[i]:le,[l]:[{[i]:$n,[l]:[{[i]:[L,U,_,G],endpoint:{[E]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[L,U,_,D,Y],[l]:[{endpoint:fn,[r]:g}],[r]:h},{[i]:[L,U,_,D,Q],endpoint:fn,[r]:g},{[i]:[L,O,_,G],endpoint:{[E]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[L,O,_,D,Y],[l]:[{endpoint:En,[r]:g}],[r]:h},{[i]:[L,O,_,D,Q],endpoint:En,[r]:g},{[i]:[I,U,_,G],endpoint:{[E]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[w]:X,[y]:x},[r]:g},{[i]:[I,U,_,D,Y],[l]:[{endpoint:wn,[r]:g}],[r]:h},{[i]:[I,U,_,D,Q],endpoint:wn,[r]:g},{[i]:[I,O,$,ne,G],endpoint:{[E]:qe,[w]:X,[y]:x},[r]:g},{[i]:[I,O,$,ne,D,Y],[l]:[{[i]:ye,endpoint:_t,[r]:g},{endpoint:_t,[r]:g}],[r]:h},{[i]:[I,O,$,ne,D,Q],endpoint:_t,[r]:g},{[i]:[I,O,_,G],endpoint:{[E]:zs,[w]:X,[y]:x},[r]:g},{[i]:[I,O,_,D,Y],[l]:[{[i]:ye,endpoint:{[E]:zs,[w]:V,[y]:x},[r]:g},{endpoint:yn,[r]:g}],[r]:h},{[i]:[I,O,_,D,Q],endpoint:yn,[r]:g}],[r]:h},We],[r]:h}],[r]:h}],[r]:h},{error:"A region must be set when sending requests to S3.",[r]:f}]},lc=uc,pc=new gi({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Tr=(e,t={})=>pc.get(e,()=>Si(lc,{endpointParams:e,logger:t.logger}));tr.aws=fr;const hc=e=>async(t,s,n)=>{var d,m,S;if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const a=await e(t,s,n),u=(S=(m=(d=Zt(s))==null?void 0:d.commandInstance)==null?void 0:m.constructor)==null?void 0:S.getEndpointParameterInstructions;if(!u)throw new Error(`getEndpointParameterInstructions() is not defined on \`${s.commandName}\``);const p=await fi(n,{getEndpointParameterInstructions:u},t);return Object.assign(a,p)},mc=async(e,t,s)=>({operation:Zt(t).operation,region:await Ze(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),gc=hc(mc);function Mr(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}function Ur(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,s)=>({signingProperties:{config:t,context:s}})}}const Sc=(e,t,s)=>a=>{var m;const p=(m=e(a).properties)==null?void 0:m.authSchemes;if(!p)return t(a);const d=[];for(const S of p){const{name:R,properties:C={},...A}=S,k=R.toLowerCase();R!==k&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${R}\` to \`${k}\``);let z;if(k==="sigv4a"){z="aws.auth#sigv4a";const ce=p.find(ge=>{const ke=ge.name.toLowerCase();return ke!=="sigv4a"&&ke.startsWith("sigv4")});if(Qt.sigv4aDependency()==="none"&&ce)continue}else if(k.startsWith("sigv4"))z="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${k}\``);const T=s[z];if(!T)throw new Error(`Could not find HttpAuthOption create function for \`${z}\``);const ae=T(a);ae.schemeId=z,ae.signingProperties={...ae.signingProperties||{},...A,...C},d.push(ae)}return d},fc=e=>{const t=[];switch(e.operation){default:t.push(Mr(e)),t.push(Ur(e))}return t},Ec=Sc(Tr,fc,{"aws.auth#sigv4":Mr,"aws.auth#sigv4a":Ur}),wc=e=>{const t=Ra(e),s=ba(t);return Object.assign(s,{authSchemePreference:Ze(e.authSchemePreference??[])})},yc=e=>Object.assign(e,{useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),Hr={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class se extends Ei{constructor(t){super(t),Object.setPrototypeOf(this,se.prototype)}}class as extends se{constructor(s){super({name:"NoSuchUpload",$fault:"client",...s});v(this,"name","NoSuchUpload");v(this,"$fault","client");Object.setPrototypeOf(this,as.prototype)}}class os extends se{constructor(s){super({name:"ObjectNotInActiveTierError",$fault:"client",...s});v(this,"name","ObjectNotInActiveTierError");v(this,"$fault","client");Object.setPrototypeOf(this,os.prototype)}}class cs extends se{constructor(s){super({name:"BucketAlreadyExists",$fault:"client",...s});v(this,"name","BucketAlreadyExists");v(this,"$fault","client");Object.setPrototypeOf(this,cs.prototype)}}class ds extends se{constructor(s){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...s});v(this,"name","BucketAlreadyOwnedByYou");v(this,"$fault","client");Object.setPrototypeOf(this,ds.prototype)}}class us extends se{constructor(s){super({name:"NoSuchBucket",$fault:"client",...s});v(this,"name","NoSuchBucket");v(this,"$fault","client");Object.setPrototypeOf(this,us.prototype)}}var Kn;(function(e){e.visit=(t,s)=>t.Prefix!==void 0?s.Prefix(t.Prefix):t.Tag!==void 0?s.Tag(t.Tag):t.And!==void 0?s.And(t.And):s._(t.$unknown[0],t.$unknown[1])})(Kn||(Kn={}));var jn;(function(e){e.visit=(t,s)=>t.Prefix!==void 0?s.Prefix(t.Prefix):t.Tag!==void 0?s.Tag(t.Tag):t.AccessPointArn!==void 0?s.AccessPointArn(t.AccessPointArn):t.And!==void 0?s.And(t.And):s._(t.$unknown[0],t.$unknown[1])})(jn||(jn={}));class ls extends se{constructor(s){super({name:"InvalidObjectState",$fault:"client",...s});v(this,"name","InvalidObjectState");v(this,"$fault","client");v(this,"StorageClass");v(this,"AccessTier");Object.setPrototypeOf(this,ls.prototype),this.StorageClass=s.StorageClass,this.AccessTier=s.AccessTier}}class ps extends se{constructor(s){super({name:"NoSuchKey",$fault:"client",...s});v(this,"name","NoSuchKey");v(this,"$fault","client");Object.setPrototypeOf(this,ps.prototype)}}class hs extends se{constructor(s){super({name:"NotFound",$fault:"client",...s});v(this,"name","NotFound");v(this,"$fault","client");Object.setPrototypeOf(this,hs.prototype)}}const bc=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:me},...e.SessionToken&&{SessionToken:me}}),Rc=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:me},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:me},...e.Credentials&&{Credentials:bc(e.Credentials)}}),Ac=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:me},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:me}});class ms extends se{constructor(s){super({name:"EncryptionTypeMismatch",$fault:"client",...s});v(this,"name","EncryptionTypeMismatch");v(this,"$fault","client");Object.setPrototypeOf(this,ms.prototype)}}class gs extends se{constructor(s){super({name:"InvalidRequest",$fault:"client",...s});v(this,"name","InvalidRequest");v(this,"$fault","client");Object.setPrototypeOf(this,gs.prototype)}}class Ss extends se{constructor(s){super({name:"InvalidWriteOffset",$fault:"client",...s});v(this,"name","InvalidWriteOffset");v(this,"$fault","client");Object.setPrototypeOf(this,Ss.prototype)}}class fs extends se{constructor(s){super({name:"TooManyParts",$fault:"client",...s});v(this,"name","TooManyParts");v(this,"$fault","client");Object.setPrototypeOf(this,fs.prototype)}}class Es extends se{constructor(s){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...s});v(this,"name","ObjectAlreadyInActiveTierError");v(this,"$fault","client");Object.setPrototypeOf(this,Es.prototype)}}var Wn;(function(e){e.visit=(t,s)=>t.Records!==void 0?s.Records(t.Records):t.Stats!==void 0?s.Stats(t.Stats):t.Progress!==void 0?s.Progress(t.Progress):t.Cont!==void 0?s.Cont(t.Cont):t.End!==void 0?s.End(t.End):s._(t.$unknown[0],t.$unknown[1])})(Wn||(Wn={}));const Cc=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:me},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:me}}),kc=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:me},...e.SSEKMSKeyId&&{SSEKMSKeyId:me},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:me}}),xc=async(e,t)=>{const s=sr(e,t),n=Z({},be,{[Od]:e[pd],[it]:e[st],[at]:e[rt],[ot]:e[nt],[Te]:[()=>be(e[Ne]),()=>e[Ne].toString()]});s.bp("/"),s.p("Bucket",()=>e.Bucket,"{Bucket}",!1);const a=Z({[Pd]:[,""]});return s.m("GET").h(n).q(a).b(void 0),s.build()},_c=async(e,t)=>{const s=sr(e,t),n=Z({},be,{...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((d,m)=>(d[`x-amz-meta-${m.toLowerCase()}`]=e.Metadata[m],d),{}),[Cd]:e[Jc]||"application/octet-stream",[Id]:e[Wc],[Ed]:e[Vc],[wd]:e[Gc],[yd]:e[Zc],[bd]:e[Xc],[Rd]:[()=>be(e[qn]),()=>e[qn].toString()],[Ad]:e[Yc],[Wd]:e[qc],[qr]:e[Lr],[Vr]:e[zr],[Gr]:e[Fr],[Zr]:e[$r],[Xr]:e[Kr],[kd]:[()=>be(e[Vn]),()=>Ai(e[Vn]).toString()],[_d]:e[ad],[vd]:e[od],[Md]:e[sd],[Ud]:e[nd],[Hd]:e[rd],[Bd]:e[id],[Zd]:[()=>be(e[Zn]),()=>e[Zn].toString()],[it]:e[st],[jd]:e[Ge],[Xd]:e[fd],[Yr]:e[jr],[qd]:e[hd],[Qr]:e[Wr],[at]:e[rt],[ot]:e[nt],[Te]:[()=>be(e[Ne]),()=>e[Ne].toString()],[Kd]:e[ld],[Vd]:e[gd],[zd]:e[dd],[Fd]:[()=>be(e[Gn]),()=>Ri(e[Gn]).toString()],[Ld]:e[cd],[Td]:e[ed]});s.bp("/{Key+}"),s.p("Bucket",()=>e.Bucket,"{Bucket}",!1),s.p("Key",()=>e.Key,"{Key+}",!0);const a=Z({[Yd]:[,"PutObject"]});let u,p;return e.Body!==void 0&&(p=e.Body,u=p),s.m("PUT").h(n).q(a).b(u),s.build()},vc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Br(e,t);const s=Z({$metadata:ie(e),[st]:[,e.headers[it]],[rt]:[,e.headers[at]],[nt]:[,e.headers[ot]],[Ne]:[()=>e.headers[Te]!==void 0,()=>rr(e.headers[Te])]}),n=nr(yi(await ur(e.body,t)),"body");return n[Ht]!=null&&(s[Ht]=jc(n[Ht])),s},Pc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Br(e,t);const s=Z({$metadata:ie(e),[Ve]:[,e.headers[Nd]],[td]:[,e.headers[xd]],[Lr]:[,e.headers[qr]],[zr]:[,e.headers[Vr]],[Fr]:[,e.headers[Gr]],[$r]:[,e.headers[Zr]],[Kr]:[,e.headers[Xr]],[Qc]:[,e.headers[Dd]],[st]:[,e.headers[it]],[Sd]:[,e.headers[Gd]],[jr]:[,e.headers[Yr]],[Wr]:[,e.headers[Qr]],[rt]:[,e.headers[at]],[nt]:[,e.headers[ot]],[Ne]:[()=>e.headers[Te]!==void 0,()=>rr(e.headers[Te])],[md]:[()=>e.headers[Xn]!==void 0,()=>Ci(e.headers[Xn])],[ud]:[,e.headers[$d]]});return await Jn(e.body,t),s},Br=async(e,t)=>{const s={...e,body:await xa(e.body,t)},n=_a(e,s.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Lc(s);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await $c(s);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Oc(s);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await Dc(s);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Hc(s);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Tc(s);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Bc(s);case"NotFound":case"com.amazonaws.s3#NotFound":throw await zc(s);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await Nc(s);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await Mc(s);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await Uc(s);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await Kc(s);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await Fc(s);default:const a=s.body;return Ic({output:e,parsedBody:a,errorCode:n})}},Ic=wi(se),Oc=async(e,t)=>{const s=Z({});e.body;const n=new cs({$metadata:ie(e),...s});return ue(n,e.body)},Dc=async(e,t)=>{const s=Z({});e.body;const n=new ds({$metadata:ie(e),...s});return ue(n,e.body)},Nc=async(e,t)=>{const s=Z({});e.body;const n=new ms({$metadata:ie(e),...s});return ue(n,e.body)},Tc=async(e,t)=>{const s=Z({}),n=e.body;n[Ut]!=null&&(s[Ut]=He(n[Ut])),n[Ge]!=null&&(s[Ge]=He(n[Ge]));const a=new ls({$metadata:ie(e),...s});return ue(a,e.body)},Mc=async(e,t)=>{const s=Z({});e.body;const n=new gs({$metadata:ie(e),...s});return ue(n,e.body)},Uc=async(e,t)=>{const s=Z({});e.body;const n=new Ss({$metadata:ie(e),...s});return ue(n,e.body)},Hc=async(e,t)=>{const s=Z({});e.body;const n=new us({$metadata:ie(e),...s});return ue(n,e.body)},Bc=async(e,t)=>{const s=Z({});e.body;const n=new ps({$metadata:ie(e),...s});return ue(n,e.body)},Lc=async(e,t)=>{const s=Z({});e.body;const n=new as({$metadata:ie(e),...s});return ue(n,e.body)},zc=async(e,t)=>{const s=Z({});e.body;const n=new hs({$metadata:ie(e),...s});return ue(n,e.body)},Fc=async(e,t)=>{const s=Z({});e.body;const n=new Es({$metadata:ie(e),...s});return ue(n,e.body)},$c=async(e,t)=>{const s=Z({});e.body;const n=new os({$metadata:ie(e),...s});return ue(n,e.body)},Kc=async(e,t)=>{const s=Z({});e.body;const n=new fs({$metadata:ie(e),...s});return ue(n,e.body)},jc=(e,t)=>{const s={};return e[Mt]!=null&&(s[Mt]=He(e[Mt])),e[Bt]!=null&&(s[Bt]=He(e[Bt])),e[Lt]!=null&&(s[Lt]=He(e[Lt])),e[Ve]!=null&&(s[Ve]=nr(bi(e[Ve]))),s},ie=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Wc="ACL",Mt="AccessKeyId",Ut="AccessTier",Ne="BucketKeyEnabled",Ht="Credentials",qc="ChecksumAlgorithm",Vc="CacheControl",Lr="ChecksumCRC32",zr="ChecksumCRC32C",Fr="ChecksumCRC64NVME",Gc="ContentDisposition",Zc="ContentEncoding",Xc="ContentLanguage",qn="ContentLength",Yc="ContentMD5",$r="ChecksumSHA1",Kr="ChecksumSHA256",Qc="ChecksumType",Jc="ContentType",Vn="Expires",ed="ExpectedBucketOwner",td="ETag",Ve="Expiration",sd="GrantFullControl",nd="GrantRead",rd="GrantReadACP",id="GrantWriteACP",ad="IfMatch",od="IfNoneMatch",cd="ObjectLockLegalHoldStatus",dd="ObjectLockMode",Gn="ObjectLockRetainUntilDate",ud="RequestCharged",ld="RequestPayer",Bt="SecretAccessKey",Ge="StorageClass",pd="SessionMode",st="ServerSideEncryption",jr="SSECustomerAlgorithm",hd="SSECustomerKey",Wr="SSECustomerKeyMD5",nt="SSEKMSEncryptionContext",rt="SSEKMSKeyId",Lt="SessionToken",md="Size",gd="Tagging",Sd="VersionId",Zn="WriteOffsetBytes",fd="WebsiteRedirectLocation",Ed="cache-control",wd="content-disposition",yd="content-encoding",bd="content-language",Rd="content-length",Ad="content-md5",Cd="content-type",kd="expires",xd="etag",_d="if-match",vd="if-none-match",Pd="session",Id="x-amz-acl",qr="x-amz-checksum-crc32",Vr="x-amz-checksum-crc32c",Gr="x-amz-checksum-crc64nvme",Zr="x-amz-checksum-sha1",Xr="x-amz-checksum-sha256",Od="x-amz-create-session-mode",Dd="x-amz-checksum-type",Nd="x-amz-expiration",Td="x-amz-expected-bucket-owner",Md="x-amz-grant-full-control",Ud="x-amz-grant-read",Hd="x-amz-grant-read-acp",Bd="x-amz-grant-write-acp",Ld="x-amz-object-lock-legal-hold",zd="x-amz-object-lock-mode",Fd="x-amz-object-lock-retain-until-date",Xn="x-amz-object-size",$d="x-amz-request-charged",Kd="x-amz-request-payer",jd="x-amz-storage-class",Wd="x-amz-sdk-checksum-algorithm",it="x-amz-server-side-encryption",at="x-amz-server-side-encryption-aws-kms-key-id",Te="x-amz-server-side-encryption-bucket-key-enabled",ot="x-amz-server-side-encryption-context",Yr="x-amz-server-side-encryption-customer-algorithm",qd="x-amz-server-side-encryption-customer-key",Qr="x-amz-server-side-encryption-customer-key-md5",Vd="x-amz-tagging",Gd="x-amz-version-id",Zd="x-amz-write-offset-bytes",Xd="x-amz-website-redirect-location",Yd="x-id";class Qd extends ir.classBuilder().ep({...Hr,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,s,n,a){return[ar(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),gr(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(Ac,Rc).ser(xc).de(vc).build(){}const Jd="3.828.0",eu={version:Jd},tu={};function Au(){return typeof window<"u"?window:typeof self<"u"?self:tu}const su=({serviceId:e,clientVersion:t})=>async s=>{var p,d,m,S,R,C;const n=typeof window<"u"&&((p=window==null?void 0:window.navigator)!=null&&p.userAgent)?pa.parse(window.navigator.userAgent):void 0,a=[["aws-sdk-js",t],["ua","2.1"],[`os/${((d=n==null?void 0:n.os)==null?void 0:d.name)||"other"}`,(m=n==null?void 0:n.os)==null?void 0:m.version],["lang/js"],["md/browser",`${((S=n==null?void 0:n.browser)==null?void 0:S.name)??"unknown"}_${((R=n==null?void 0:n.browser)==null?void 0:R.version)??"unknown"}`]];e&&a.push([`api/${e}`,t]);const u=await((C=s==null?void 0:s.userAgentAppId)==null?void 0:C.call(s));return u&&a.push([`app/${u}`]),a},nu=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??Oi,base64Encoder:(e==null?void 0:e.base64Encoder)??Ii,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Tr,extensions:(e==null?void 0:e.extensions)??[],getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??Pi,httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Ec,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new dr},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new ya}],logger:(e==null?void 0:e.logger)??new er,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??vi,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??Qt,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??_i,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??xi,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ki}),ru=e=>{const t=Di(e),s=()=>t().then(ji),n=nu(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Fi,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(a=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??su({serviceId:n.serviceId,clientVersion:eu.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??zi,maxAttempts:(e==null?void 0:e.maxAttempts)??Li,md5:(e==null?void 0:e.md5)??Bi,region:(e==null?void 0:e.region)??Hi("Region is missing"),requestHandler:Ui.create((e==null?void 0:e.requestHandler)??s),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await s()).retryMode||Mi),sha1:(e==null?void 0:e.sha1)??la,sha256:(e==null?void 0:e.sha256)??ua,streamCollector:(e==null?void 0:e.streamCollector)??Ti,streamHasher:(e==null?void 0:e.streamHasher)??Ni,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Ki)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve($i))}},iu=e=>({setRegion(t){e.region=t},region(){return e.region}}),au=e=>({region:e.region()}),ou=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(a){const u=t.findIndex(p=>p.schemeId===a.schemeId);u===-1?t.push(a):t.splice(u,1,a)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(a){s=a},httpAuthSchemeProvider(){return s},setCredentials(a){n=a},credentials(){return n}}},cu=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),du=(e,t)=>{const s=Object.assign(iu(e),Wi(e),qi(e),ou(e));return t.forEach(n=>n.configure(s)),Object.assign(e,au(s),Vi(s),Gi(s),cu(s))};class Cu extends Zi{constructor(...[s]){const n=ru(s||{});super(n);v(this,"config");this.initConfig=n;const a=yc(n),u=Bo(a),p=Ka(u),d=Xi(p),m=Yi(d),S=m,R=Qi(S),C=Ji(R),A=wc(C),k=Co(A,{session:[()=>this,Qd]}),z=du(k,(s==null?void 0:s.extensions)||[]);this.config=z,this.middlewareStack.use(Jo(this.config)),this.middlewareStack.use(ea(this.config)),this.middlewareStack.use(ta(this.config)),this.middlewareStack.use(qa(this.config)),this.middlewareStack.use(Za(this.config)),this.middlewareStack.use(eo(this.config)),this.middlewareStack.use(sa(this.config,{httpAuthSchemeParametersProvider:gc,identityProviderConfigProvider:async T=>new ra({"aws.auth#sigv4":T.credentials,"aws.auth#sigv4a":T.credentials})})),this.middlewareStack.use(na(this.config)),this.middlewareStack.use(Mo(this.config)),this.middlewareStack.use(ga(this.config)),this.middlewareStack.use(lo(this.config)),this.middlewareStack.use(Eo(this.config)),this.middlewareStack.use(Ao(this.config))}destroy(){super.destroy()}}function uu(e){return t=>async s=>{const n={...s.input},a=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const u of a){const p=n[u.target];if(p){let d;typeof p=="string"?hu(p,e)?d=e.base64Decoder(p):(d=e.utf8Decoder(p),n[u.target]=e.base64Encoder(d)):(d=ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p),n[u.target]=e.base64Encoder(d));const m=new e.md5;m.update(d),n[u.hash]=e.base64Encoder(await m.digest())}}return t({...s,input:n})}}const lu={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},pu=e=>({applyToStack:t=>{t.add(uu(e),lu)}});function hu(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}class ku extends ir.classBuilder().ep({...Hr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,s,n,a){return[ar(n,this.serialize,this.deserialize),or(n,t.getEndpointParameterInstructions()),$a(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),io(),gr(n),pu(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(kc,Cc).ser(_c).de(Pc).build(){}function mu(e){const{port:t,query:s}=e;let{protocol:n,path:a,hostname:u}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(u+=`:${t}`),a&&a.charAt(0)!=="/"&&(a=`/${a}`);let p=s?ia(s):"";p&&p[0]!=="?"&&(p=`?${p}`);let d="";if(e.username!=null||e.password!=null){const S=e.username??"",R=e.password??"";d=`${S}:${R}@`}let m="";return e.fragment&&(m=`#${e.fragment}`),`${n}//${d}${u}${a}${p}${m}`}const gu="UNSIGNED-PAYLOAD",Su="X-Amz-Content-Sha256";class Yn{constructor(t){v(this,"signer");const s={service:t.signingName||t.service||"s3",uriEscapePath:t.uriEscapePath||!1,applyChecksum:t.applyChecksum||!1,...t};this.signer=new Qt(s)}presign(t,{unsignableHeaders:s=new Set,hoistableHeaders:n=new Set,unhoistableHeaders:a=new Set,...u}={}){return this.prepareRequest(t,{unsignableHeaders:s,unhoistableHeaders:a,hoistableHeaders:n}),this.signer.presign(t,{expiresIn:900,unsignableHeaders:s,unhoistableHeaders:a,...u})}presignWithCredentials(t,s,{unsignableHeaders:n=new Set,hoistableHeaders:a=new Set,unhoistableHeaders:u=new Set,...p}={}){return this.prepareRequest(t,{unsignableHeaders:n,unhoistableHeaders:u,hoistableHeaders:a}),this.signer.presignWithCredentials(t,s,{expiresIn:900,unsignableHeaders:n,unhoistableHeaders:u,...p})}prepareRequest(t,{unsignableHeaders:s=new Set,unhoistableHeaders:n=new Set,hoistableHeaders:a=new Set}={}){s.add("content-type"),Object.keys(t.headers).map(m=>m.toLowerCase()).filter(m=>m.startsWith("x-amz-server-side-encryption")).forEach(m=>{a.has(m)||n.add(m)}),t.headers[Su]=gu;const u=t.headers.host,p=t.port,d=`${t.hostname}${t.port!=null?":"+p:""}`;(!u||u===t.hostname&&t.port!=null)&&(t.headers.host=d)}}const xu=async(e,t,s={})=>{var C,A,k;let n,a;if(typeof e.config.endpointProvider=="function"){const T=(A=(C=(await aa(t.input,t.constructor,e.config)).properties)==null?void 0:C.authSchemes)==null?void 0:A[0];(T==null?void 0:T.name)==="sigv4a"?a=(k=T==null?void 0:T.signingRegionSet)==null?void 0:k.join(","):a=T==null?void 0:T.signingRegion,n=new Yn({...e.config,signingName:T==null?void 0:T.signingName,region:async()=>a})}else n=new Yn(e.config);const u=(z,T)=>async ae=>{const{request:ce}=ae;if(!he.isInstance(ce))throw new Error("Request to be presigned is not an valid HTTP request.");delete ce.headers["amz-sdk-invocation-id"],delete ce.headers["amz-sdk-request"],delete ce.headers["x-amz-user-agent"];let ge;const ke={...s,signingRegion:s.signingRegion??T.signing_region??a,signingService:s.signingService??T.signing_service};return T.s3ExpressIdentity?ge=await n.presignWithCredentials(ce,T.s3ExpressIdentity,ke):ge=await n.presign(ce,ke),{response:{},output:{$metadata:{httpStatusCode:200},presigned:ge}}},p="presignInterceptMiddleware",d=e.middlewareStack.clone();d.addRelativeTo(u,{name:p,relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});const m=t.resolveMiddleware(d,e.config,{}),{output:S}=await m({input:t.input}),{presigned:R}=S;return mu(R)};export{ku as P,Cu as S,xu as g,Au as l};
