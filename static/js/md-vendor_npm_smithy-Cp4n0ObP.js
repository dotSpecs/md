import{B as Ue}from"./md-vendor_vite-plugin-node-polyfills-D0A3AXVj.js";import{C as ot}from"./md-vendor_npm_aws-crypto-CcT2yfcI.js";import{B as _t}from"./md-vendor_bowser-Rsyu5S1p.js";const fi=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){var n;(n=t.httpHandler)==null||n.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),di=t=>({httpHandler:t.httpHandler()});var Me;(function(t){t.HEADER="header",t.QUERY="query"})(Me||(Me={}));var Oe;(function(t){t.HEADER="header",t.QUERY="query"})(Oe||(Oe={}));var Q;(function(t){t.HTTP="http",t.HTTPS="https"})(Q||(Q={}));var te;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(te||(te={}));var Ne;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(Ne||(Ne={}));const pe="__smithy_context";var ke;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(ke||(ke={}));var De;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(De||(De={}));class U{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new U({...e,headers:{...e.headers}});return r.query&&(r.query=Ht(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return U.clone(this)}}function Ht(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class re{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const ve=t=>t[pe]||(t[pe]={}),B=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},zt=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const n of e)for(const s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function Ft(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const qt=(t,e)=>(r,n)=>async s=>{var f;const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),a=t.authSchemePreference?await t.authSchemePreference():[],o=zt(i,a),c=Ft(t.httpAuthSchemes),u=ve(n),h=[];for(const l of o){const d=c.get(l.schemeId);if(!d){h.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}const g=d.identityProvider(await e.identityProviderConfigProvider(t));if(!g){h.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:w={},signingProperties:y={}}=((f=l.propertiesExtractor)==null?void 0:f.call(l,t,n))||{};l.identityProperties=Object.assign(l.identityProperties||{},w),l.signingProperties=Object.assign(l.signingProperties||{},y),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await g(l.identityProperties),signer:d.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(h.join(`
`));return r(s)},jt={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},li=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(qt(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),jt)}}),Gt=(t,e)=>(r,n)=>async s=>{var a,o,c,u;const{response:i}=await r(s);try{const h=await e(i,t);return{response:i,output:h}}catch(h){if(Object.defineProperty(h,"$response",{value:i}),!("$metadata"in h)){const f="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{h.message+=`
  `+f}catch{!n.logger||((o=(a=n.logger)==null?void 0:a.constructor)==null?void 0:o.name)==="NoOpLogger"?console.warn(f):(u=(c=n.logger)==null?void 0:c.warn)==null||u.call(c,f)}typeof h.$responseBodyText<"u"&&h.$response&&(h.$response.body=h.$responseBodyText);try{if(re.isInstance(i)){const{headers:l={}}=i,d=Object.entries(l);h.$metadata={httpStatusCode:i.statusCode,requestId:ue(/^x-[\w-]+-request-?id$/,d),extendedRequestId:ue(/^x-[\w-]+-id-2$/,d),cfId:ue(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw h}},ue=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],Vt=(t,e)=>(r,n)=>async s=>{var c;const i=t,a=(c=n.endpointV2)!=null&&c.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!a)throw new Error("No valid endpoint provider available.");const o=await e(s.input,{...t,endpoint:a});return r({...s,request:o})},Wt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ce={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function hi(t,e,r){return{applyToStack:n=>{n.add(Gt(t,r),Wt),n.add(Vt(t,e),Ce)}}}Ce.name;const Xt=t=>e=>{throw e},Kt=(t,e)=>{},Qt=t=>(e,r)=>async n=>{if(!U.isInstance(n.request))return e(n);const i=ve(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:a={}},identity:o,signer:c}=i,u=await e({...n,request:await c.sign(n.request,o,a)}).catch((c.errorHandler||Xt)(a));return(c.successHandler||Kt)(u.response,a),u},Zt={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},yi=t=>({applyToStack:e=>{e.addRelativeTo(Qt(),Zt)}}),gi=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},k={},j=new Array(64);for(let t=0,e=65,r=90;t+e<=r;t++){const n=String.fromCharCode(t+e);k[n]=t,j[t]=n}for(let t=0,e=97,r=122;t+e<=r;t++){const n=String.fromCharCode(t+e),s=t+26;k[n]=s,j[s]=n}for(let t=0;t<10;t++){k[t.toString(10)]=t+52;const e=t.toString(10),r=t+52;k[e]=r,j[r]=e}k["+"]=62;j[62]="+";k["/"]=63;j[63]="/";const z=6,V=8,Jt=63,ct=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let s=0;s<t.length;s+=4){let i=0,a=0;for(let u=s,h=s+3;u<=h;u++)if(t[u]!=="="){if(!(t[u]in k))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=k[t[u]]<<(h-u)*z,a+=z}else i>>=z;const o=s/4*3;i>>=a%V;const c=Math.floor(a/V);for(let u=0;u<c;u++){const h=(c-u-1)*V;n.setUint8(o+u,(i&255<<h)>>h)}}return new Uint8Array(r)},F=t=>new TextEncoder().encode(t),Z=t=>typeof t=="string"?F(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),ut=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function xe(t){let e;typeof t=="string"?e=F(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let a=0,o=0;for(let u=i,h=Math.min(i+3,e.length);u<h;u++)a|=e[u]<<(h-u-1)*V,o+=V;const c=Math.ceil(o/z);a<<=c*z-o;for(let u=1;u<=c;u++){const h=(c-u)*z;s+=j[(a&Jt<<h)>>h]}s+="==".slice(0,4-c)}return s}function Yt(t,e="utf-8"){return e==="base64"?xe(t):ut(t)}function er(t,e){return e==="base64"?_.mutate(ct(t)):_.mutate(F(t))}class _ extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return er(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,_.prototype),e}transformToString(e="utf-8"){return Yt(this,e)}}const tr=typeof ReadableStream=="function"?ReadableStream:function(){};class rr extends tr{}const we=t=>{var e;return typeof ReadableStream=="function"&&(((e=t==null?void 0:t.constructor)==null?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)},mi=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{var c;if(!we(r))throw new Error(`@smithy/util-stream: unsupported source type ${((c=r==null?void 0:r.constructor)==null?void 0:c.name)??r} in ChecksumStream.`);const i=s??xe;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const a=new TransformStream({start(){},async transform(u,h){e.update(u),h.enqueue(u)},async flush(u){const h=await e.digest(),f=i(h);if(t!==f){const l=new Error(`Checksum mismatch: expected "${t}" but received "${f}" in response header "${n}".`);u.error(l)}else u.terminate()}});r.pipeThrough(a);const o=a.readable;return Object.setPrototypeOf(o,rr.prototype),o};class nr{constructor(e){this.allocByteArray=e,this.byteLength=0,this.byteArrays=[]}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const n=this.byteArrays[0];return this.reset(),n}const e=this.allocByteArray(this.byteLength);let r=0;for(let n=0;n<this.byteArrays.length;++n){const s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function sr(t,e,r){const n=t.getReader();let s=!1,i=0;const a=["",new nr(u=>new Uint8Array(u))];let o=-1;const c=async u=>{const{value:h,done:f}=await n.read(),l=h;if(f){if(o!==-1){const d=fe(a,o);W(d)>0&&u.enqueue(d)}u.close()}else{const d=ar(l,!1);if(o!==d&&(o>=0&&u.enqueue(fe(a,o)),o=d),o===-1){u.enqueue(l);return}const g=W(l);i+=g;const w=W(a[o]);if(g>=e&&w===0)u.enqueue(l);else{const y=ir(a,o,l);!s&&i>e*2&&(s=!0,r==null||r.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${e}, automatically buffering.`)),y>=e?u.enqueue(fe(a,o)):await c(u)}}};return new ReadableStream({pull:c})}const pi=sr;function ir(t,e,r){switch(e){case 0:return t[0]+=r,W(t[0]);case 1:case 2:return t[e].push(r),W(t[e])}}function fe(t,e){switch(e){case 0:const r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function W(t){return(t==null?void 0:t.byteLength)??(t==null?void 0:t.length)??0}function ar(t,e=!0){return e&&typeof Ue<"u"&&t instanceof Ue?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const wi=(t,e)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:a}=e,o=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&a!==void 0,c=o?a(s,t):void 0,u=t.getReader();return new ReadableStream({async pull(h){const{value:f,done:l}=await u.read();if(l){if(h.enqueue(`0\r
`),o){const d=r(await c);h.enqueue(`${i}:${d}\r
`),h.enqueue(`\r
`)}h.close()}else h.enqueue(`${(n(f)||0).toString(16)}\r
${f}\r
`)}})};async function bi(t,e){let r=0;const n=[],s=t.getReader();let i=!1;for(;!i;){const{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=(u==null?void 0:u.byteLength)??0),r>=e)break;i=c}s.releaseLock();const a=new Uint8Array(Math.min(e,r));let o=0;for(const c of n){if(c.byteLength>a.byteLength-o){a.set(c.subarray(0,a.byteLength-o),o);break}else a.set(c,o);o+=c.length}return a}const H=t=>encodeURIComponent(t).replace(/[!'()*]/g,or),or=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function cr(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=H(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${H(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${H(n)}`),e.push(s)}}return e.join("&")}function Le(t,e){return new Request(t,e)}function ur(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const de={supported:void 0};class ft{static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new ft(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),de.supported===void 0&&(de.supported=typeof Request<"u"&&"keepalive"in Le("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r}={}){var m;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r!=null&&r.aborted){const p=new Error("Request aborted");return p.name="AbortError",Promise.reject(p)}let a=e.path;const o=cr(e.query||{});o&&(a+=`?${o}`),e.fragment&&(a+=`#${e.fragment}`);let c="";if(e.username!=null||e.password!=null){const p=e.username??"",R=e.password??"";c=`${p}:${R}@`}const{port:u,method:h}=e,f=`${e.protocol}//${c}${e.hostname}${u?`:${u}`:""}${a}`,l=h==="GET"||h==="HEAD"?void 0:e.body,d={body:l,headers:new Headers(e.headers),method:h,credentials:i};(m=this.config)!=null&&m.cache&&(d.cache=this.config.cache),l&&(d.duplex="half"),typeof AbortController<"u"&&(d.signal=r),de.supported&&(d.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(d,this.config.requestInit(e));let g=()=>{};const w=Le(f,d),y=[fetch(w).then(p=>{const R=p.headers,b={};for(const I of R.entries())b[I[0]]=I[1];return p.body!=null?{response:new re({headers:b,reason:p.statusText,statusCode:p.status,body:p.body})}:p.blob().then(I=>({response:new re({headers:b,reason:p.statusText,statusCode:p.status,body:I})}))}),ur(n)];return r&&y.push(new Promise((p,R)=>{const b=()=>{const $=new Error("Request aborted");$.name="AbortError",R($)};if(typeof r.addEventListener=="function"){const $=r;$.addEventListener("abort",b,{once:!0}),g=()=>$.removeEventListener("abort",b)}else r.onabort=b})),Promise.race(y).finally(g)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const fr=async t=>{var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):dr(t):lr(t)};async function dr(t){const e=await hr(t),r=ct(e);return new Uint8Array(r)}async function lr(t){const e=[],r=t.getReader();let n=!1,s=0;for(;!n;){const{done:o,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=o}const i=new Uint8Array(s);let a=0;for(const o of e)i.set(o,a),a+=o.length;return i}function hr(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),a=i>-1?i+1:s.length;e(s.substring(a))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const dt={},be={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),dt[t]=e,be[e]=t}function lt(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in be)e[r/2]=be[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function C(t){let e="";for(let r=0;r<t.byteLength;r++)e+=dt[t[r]];return e}const Pe="The stream has already been transformed.",Ri=t=>{var s,i;if(!Be(t)&&!we(t)){const a=((i=(s=t==null?void 0:t.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${a}`)}let e=!1;const r=async()=>{if(e)throw new Error(Pe);return e=!0,await fr(t)},n=a=>{if(typeof a.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return a.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async a=>{const o=await r();if(a==="base64")return xe(o);if(a==="hex")return C(o);if(a===void 0||a==="utf8"||a==="utf-8")return ut(o);if(typeof TextDecoder=="function")return new TextDecoder(a).decode(o);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(Pe);if(e=!0,Be(t))return n(t);if(we(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Be=t=>typeof Blob=="function"&&t instanceof Blob;async function Si(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const Ti=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return _.mutate(t);if(!t)return _.mutate(new Uint8Array);const r=e.streamCollector(t);return _.mutate(await r)};function _e(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Ei=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},yr=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&gt.warn(yt(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},gr=Math.ceil(2**127*(2-2**-23)),He=t=>{const e=yr(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>gr)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Re=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},ze=t=>ht(t,16),Fe=t=>ht(t,8),ht=(t,e)=>{const r=Re(t);if(r!==void 0&&mr(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},mr=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Ai=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},vi=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},Ci=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return gt.warn(yt(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},pr=t=>He(typeof t=="string"?se(t):t),wr=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,se=t=>{const e=t.match(wr);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},xi=t=>Re(typeof t=="string"?se(t):t),br=t=>ze(typeof t=="string"?se(t):t),Rr=t=>Fe(typeof t=="string"?se(t):t),yt=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),gt={warn:console.warn},Sr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],mt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $i(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,h=a<10?`0${a}`:`${a}`,f=o<10?`0${o}`:`${o}`;return`${Sr[n]}, ${c} ${mt[r]} ${e} ${u}:${h}:${f} GMT`}const Tr=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Ii=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=Tr.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,a,o,c,u,h]=e,f=br(pt(n)),l=X(s,"month",1,12),d=X(i,"day",1,31),g=Er(f,l,d,{hours:a,minutes:o,seconds:c,fractionalMilliseconds:u});return h.toUpperCase()!="Z"&&g.setTime(g.getTime()-$r(h)),g},Er=(t,e,r,n)=>{const s=e-1;return vr(t,s,r),new Date(Date.UTC(t,s,r,X(n.hours,"hour",0,23),X(n.minutes,"minute",0,59),X(n.seconds,"seconds",0,60),xr(n.fractionalMilliseconds)))},Ar=[31,28,31,30,31,30,31,31,30,31,30,31],vr=(t,e,r)=>{let n=Ar[e];if(e===1&&Cr(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${mt[e]} in ${t}: ${r}`)},Cr=t=>t%4===0&&(t%100!==0||t%400===0),X=(t,e,r,n)=>{const s=Rr(pt(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},xr=t=>t==null?0:pr("0."+t)*1e3,$r=t=>{const e=t[0];let r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},pt=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},Ir=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){const a=n();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?a.split("/").map(o=>_e(o)).join("/"):_e(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return t};function Ui(t,e){return new Ur(t,e)}class Ur{constructor(e,r){this.input=e,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new U({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=Ir(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}function Mr(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Mi{constructor(e){this.authSchemes=new Map;for(const[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}const Or=t=>e=>kr(e)&&e.expiration.getTime()-Date.now()<t,Nr=3e5,Oi=Or(Nr),kr=t=>t.expiration!==void 0,Ni=(t,e,r)=>{if(t===void 0)return;const n=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,a,o=!1;const c=async u=>{i||(i=n(u));try{s=await i,a=!0,o=!1}finally{i=void 0}return s};return e===void 0?async u=>((!a||u!=null&&u.forceRefresh)&&(s=await c(u)),s):async u=>((!a||u!=null&&u.forceRefresh)&&(s=await c(u)),o?s:r(s)?(e(s)&&await c(u),s):(o=!0,s))},Dr=(t,e,r)=>{let n,s,i,a=!1;const o=async()=>{s||(s=t());try{n=await s,i=!0,a=!1}finally{s=void 0}return n};return async c=>((!i||c!=null&&c.forceRefresh)&&(n=await o()),n)},Lr="X-Amz-Algorithm",Pr="X-Amz-Credential",wt="X-Amz-Date",Br="X-Amz-SignedHeaders",_r="X-Amz-Expires",bt="X-Amz-Signature",Rt="X-Amz-Security-Token",St="authorization",Tt=wt.toLowerCase(),Hr="date",zr=[St,Tt,Hr],Fr=bt.toLowerCase(),Se="x-amz-content-sha256",qr=Rt.toLowerCase(),jr={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Gr=/^proxy-/,Vr=/^sec-/,le="AWS4-HMAC-SHA256",Wr="AWS4-HMAC-SHA256-PAYLOAD",Xr="UNSIGNED-PAYLOAD",Kr=50,Et="aws4_request",Qr=60*60*24*7,Y={},he=[],ye=(t,e,r)=>`${t}/${e}/${r}/${Et}`,Zr=async(t,e,r,n,s)=>{const i=await qe(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${n}:${s}:${C(i)}:${e.sessionToken}`;if(a in Y)return Y[a];for(he.push(a);he.length>Kr;)delete Y[he.shift()];let o=`AWS4${e.secretAccessKey}`;for(const c of[r,n,s,Et])o=await qe(t,o,c);return Y[a]=o},qe=(t,e,r)=>{const n=new t(e);return n.update(Z(r)),n.digest()},je=({headers:t},e,r)=>{const n={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in jr||e!=null&&e.has(i)||Gr.test(i)||Vr.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},Jr=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",ge=async({headers:t,body:e},r)=>{for(const n of Object.keys(t))if(n.toLowerCase()===Se)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Jr(e)){const n=new r;return n.update(Z(e)),C(await n.digest())}return Xr};class Yr{format(e){const r=[];for(const i of Object.keys(e)){const a=F(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=F(e.value),c=new DataView(new ArrayBuffer(3+o.byteLength));c.setUint8(0,7),c.setUint16(1,o.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(o,3),u;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set(tn.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!en.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const f=new Uint8Array(17);return f[0]=9,f.set(lt(e.value.replace(/\-/g,"")),1),f}}}var Ge;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Ge||(Ge={}));const en=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let tn=class At{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Ve(r),new At(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Ve(e),parseInt(C(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Ve(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const rn=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},nn=(t,e={})=>{var s,i;const{headers:r,query:n={}}=U.clone(t);for(const a of Object.keys(r)){const o=a.toLowerCase();(o.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(o))||(i=e.hoistableHeaders)!=null&&i.has(o))&&(n[a]=r[a],delete r[a])}return{...t,headers:r,query:n}},We=t=>{t=U.clone(t);for(const e of Object.keys(t.headers))zr.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},sn=({query:t={}})=>{const e=[],r={};for(const n of Object.keys(t)){if(n.toLowerCase()===Fr)continue;const s=H(n);e.push(s);const i=t[n];typeof i=="string"?r[s]=`${s}=${H(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((a,o)=>a.concat([`${s}=${H(o)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},an=t=>on(t).toISOString().replace(/\.\d{3}Z$/,"Z"),on=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class cn{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a=!0}){this.service=s,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=B(n),this.credentialProvider=B(r)}createCanonicalRequest(e,r,n){const s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${sn(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){const i=new this.sha256;i.update(Z(n));const a=await i.digest();return`${s}
${e}
${r}
${C(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${e!=null&&e.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return H(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=an(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class ki extends cn{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a}),this.headerFormatter=new Yr}async presign(e,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:c,signingRegion:u,signingService:h}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);const l=u??await this.regionProvider(),{longDate:d,shortDate:g}=this.formatDate(n);if(s>Qr)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const w=ye(g,l,h??this.service),y=nn(We(e),{unhoistableHeaders:a,hoistableHeaders:c});f.sessionToken&&(y.query[Rt]=f.sessionToken),y.query[Lr]=le,y.query[Pr]=`${f.accessKeyId}/${w}`,y.query[wt]=d,y.query[_r]=s.toString(10);const m=je(y,i,o);return y.query[Br]=this.getCanonicalHeaderList(m),y.query[bt]=await this.getSignature(d,w,this.getSigningKey(f,l,g,h),this.createCanonicalRequest(y,m,await ge(e,this.sha256))),y}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:a}){const o=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),h=ye(c,o,a??this.service),f=await ge({headers:{},body:r},this.sha256),l=new this.sha256;l.update(e);const d=C(await l.digest()),g=[Wr,u,h,s,d,f].join(`
`);return this.signString(g,{signingDate:n,signingRegion:o,signingService:a})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const a=n??await this.regionProvider(),{shortDate:o}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,a,o,s));return c.update(Z(e)),C(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:a}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const c=i??await this.regionProvider(),u=We(e),{longDate:h,shortDate:f}=this.formatDate(r),l=ye(f,c,a??this.service);u.headers[Tt]=h,o.sessionToken&&(u.headers[qr]=o.sessionToken);const d=await ge(u,this.sha256);!rn(Se,u.headers)&&this.applyChecksum&&(u.headers[Se]=d);const g=je(u,s,n),w=await this.getSignature(h,l,this.getSigningKey(o,c,f,a),this.createCanonicalRequest(u,g,d));return u.headers[St]=`${le} Credential=${o.accessKeyId}/${l}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${w}`,u}async getSignature(e,r,n,s){const i=await this.createStringToSign(e,r,s,le),a=new this.sha256(await n);return a.update(Z(i)),C(await a.digest())}getSigningKey(e,r,n,s){return Zr(this.sha256,e,n,r,s||this.service)}}const Xe=typeof TextEncoder=="function"?new TextEncoder:null,Di=t=>{if(typeof t=="string"){if(Xe)return Xe.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},L=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const n of e)r.push(n);return r},M=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,ne=()=>{let t=[],e=[],r=!1;const n=new Set,s=f=>f.sort((l,d)=>Ke[d.step]-Ke[l.step]||Qe[d.priority||"normal"]-Qe[l.priority||"normal"]),i=f=>{let l=!1;const d=g=>{const w=L(g.name,g.aliases);if(w.includes(f)){l=!0;for(const y of w)n.delete(y);return!1}return!0};return t=t.filter(d),e=e.filter(d),l},a=f=>{let l=!1;const d=g=>{if(g.middleware===f){l=!0;for(const w of L(g.name,g.aliases))n.delete(w);return!1}return!0};return t=t.filter(d),e=e.filter(d),l},o=f=>{var l;return t.forEach(d=>{f.add(d.middleware,{...d})}),e.forEach(d=>{f.addRelativeTo(d.middleware,{...d})}),(l=f.identifyOnResolve)==null||l.call(f,h.identifyOnResolve()),f},c=f=>{const l=[];return f.before.forEach(d=>{d.before.length===0&&d.after.length===0?l.push(d):l.push(...c(d))}),l.push(f),f.after.reverse().forEach(d=>{d.before.length===0&&d.after.length===0?l.push(d):l.push(...c(d))}),l},u=(f=!1)=>{const l=[],d=[],g={};return t.forEach(y=>{const m={...y,before:[],after:[]};for(const p of L(m.name,m.aliases))g[p]=m;l.push(m)}),e.forEach(y=>{const m={...y,before:[],after:[]};for(const p of L(m.name,m.aliases))g[p]=m;d.push(m)}),d.forEach(y=>{if(y.toMiddleware){const m=g[y.toMiddleware];if(m===void 0){if(f)return;throw new Error(`${y.toMiddleware} is not found when adding ${M(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&m.after.push(y),y.relation==="before"&&m.before.push(y)}}),s(l).map(c).reduce((y,m)=>(y.push(...m),y),[])},h={add:(f,l={})=>{const{name:d,override:g,aliases:w}=l,y={step:"initialize",priority:"normal",middleware:f,...l},m=L(d,w);if(m.length>0){if(m.some(p=>n.has(p))){if(!g)throw new Error(`Duplicate middleware name '${M(d,w)}'`);for(const p of m){const R=t.findIndex($=>{var I;return $.name===p||((I=$.aliases)==null?void 0:I.some(ce=>ce===p))});if(R===-1)continue;const b=t[R];if(b.step!==y.step||y.priority!==b.priority)throw new Error(`"${M(b.name,b.aliases)}" middleware with ${b.priority} priority in ${b.step} step cannot be overridden by "${M(d,w)}" middleware with ${y.priority} priority in ${y.step} step.`);t.splice(R,1)}}for(const p of m)n.add(p)}t.push(y)},addRelativeTo:(f,l)=>{const{name:d,override:g,aliases:w}=l,y={middleware:f,...l},m=L(d,w);if(m.length>0){if(m.some(p=>n.has(p))){if(!g)throw new Error(`Duplicate middleware name '${M(d,w)}'`);for(const p of m){const R=e.findIndex($=>{var I;return $.name===p||((I=$.aliases)==null?void 0:I.some(ce=>ce===p))});if(R===-1)continue;const b=e[R];if(b.toMiddleware!==y.toMiddleware||b.relation!==y.relation)throw new Error(`"${M(b.name,b.aliases)}" middleware ${b.relation} "${b.toMiddleware}" middleware cannot be overridden by "${M(d,w)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);e.splice(R,1)}}for(const p of m)n.add(p)}e.push(y)},clone:()=>o(ne()),use:f=>{f.applyToStack(h)},remove:f=>typeof f=="string"?i(f):a(f),removeByTag:f=>{let l=!1;const d=g=>{const{tags:w,name:y,aliases:m}=g;if(w&&w.includes(f)){const p=L(y,m);for(const R of p)n.delete(R);return l=!0,!1}return!0};return t=t.filter(d),e=e.filter(d),l},concat:f=>{var d;const l=o(ne());return l.use(f),l.identifyOnResolve(r||l.identifyOnResolve()||(((d=f.identifyOnResolve)==null?void 0:d.call(f))??!1)),l},applyToStack:o,identify:()=>u(!0).map(f=>{const l=f.step??f.relation+" "+f.toMiddleware;return M(f.name,f.aliases)+" - "+l}),identifyOnResolve(f){return typeof f=="boolean"&&(r=f),r},resolve:(f,l)=>{for(const d of u().map(g=>g.middleware).reverse())f=d(f,l);return r&&console.log(h.identify()),f}};return h},Ke={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Qe={high:3,normal:2,low:1};class Li{constructor(e){this.config=e,this.middlewareStack=ne()}send(e,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,a=s===void 0&&this.config.cacheMiddleware===!0;let o;if(a){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?o=c.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return o(e).then(c=>c.output)}destroy(){var e,r,n;(n=(r=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}}class un{constructor(){this.middlewareStack=ne()}static classBuilder(){return new fn}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:h,CommandCtor:f}){for(const y of s.bind(this)(f,e,r,n))this.middlewareStack.use(y);const l=e.concat(this.middlewareStack),{logger:d}=r,g={logger:d,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,[pe]:{commandInstance:this,...u},...h},{requestHandler:w}=r;return l.resolve(y=>w.handle(y.request,n||{}),g)}}class fn{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends un{static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const Pi="***SensitiveInformation***";class G extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return G.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===G?G.isInstance(e):G.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const dn=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},ln=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{const s=hn(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new r({name:(e==null?void 0:e.code)||(e==null?void 0:e.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw dn(a,e)},Bi=t=>({output:e,parsedBody:r,errorCode:n})=>{ln({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},hn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),_i=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},yn=t=>{const e=[];for(const r in te){const n=te[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},gn=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},mn=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),pn=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Hi=t=>Object.assign(yn(t),mn(t)),zi=t=>Object.assign(gn(t),pn(t)),wn=t=>{const e="#text";for(const r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=wn(t[r]));return t},Fi=t=>t!=null;class bn{trace(){}debug(){}info(){}warn(){}error(){}}function Rn(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,Sn(n,s,i);i=e}for(const a of Object.keys(i)){if(!Array.isArray(i[a])){n[a]=i[a];continue}Tn(n,null,i,a)}return n}const Sn=(t,e,r)=>Rn(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),Tn=(t,e,r,n)=>{let[s,i]=r[n];if(typeof i=="function"){let a;const o=s===void 0&&(a=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;o?t[n]=a:c&&(t[n]=i())}else{const a=s===void 0&&i!=null,o=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(a||o)&&(t[n]=i)}},qi=t=>t.toISOString().replace(".000Z","Z");var Ze;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Ze||(Ze={}));class ji{constructor({size:e,params:r}){this.data=new Map,this.parameters=[],this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:a,done:o}=s.next();if(this.data.delete(a),o||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const En=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),An=t=>En.test(t)||t.startsWith("[")&&t.endsWith("]"),vn=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),vt=(t,e=!1)=>{if(!e)return vn.test(t);const r=t.split(".");for(const n of r)if(!vt(n))return!1;return!0},Je={},J="endpoints";function D(t){return typeof t!="object"||t==null?t:"ref"in t?`$${D(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(D).join(", ")})`:JSON.stringify(t,null,2)}class x extends Error{constructor(e){super(e),this.name="EndpointError"}}const Cn=(t,e)=>t===e,xn=t=>{const e=t.split("."),r=[];for(const n of e){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new x(`Path: '${t}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new x(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},Ct=(t,e)=>xn(e).reduce((r,n)=>{if(typeof r!="object")throw new x(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),$n=t=>t!=null,In=t=>!t,me={[Q.HTTP]:80,[Q.HTTPS]:443},Un=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:l,port:d,protocol:g="",path:w="",query:y={}}=t,m=new URL(`${g}//${l}${d?`:${d}`:""}${w}`);return m.search=Object.entries(y).map(([p,R])=>`${p}=${R}`).join("&"),m}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:n,hostname:s,pathname:i,protocol:a,search:o}=e;if(o)return null;const c=a.slice(0,-1);if(!Object.values(Q).includes(c))return null;const u=An(s),h=r.includes(`${n}:${me[c]}`)||typeof t=="string"&&t.includes(`${n}:${me[c]}`),f=`${n}${h?`:${me[c]}`:""}`;return{scheme:c,authority:f,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},Mn=(t,e)=>t===e,On=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),Nn=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),kn={booleanEquals:Cn,getAttr:Ct,isSet:$n,isValidHostLabel:vt,not:In,parseURL:Un,stringEquals:Mn,substring:On,uriEncode:Nn},xt=(t,e)=>{const r=[],n={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));const a=t.indexOf("}",i);if(a===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(i+1,a)),s=a+2);const o=t.substring(i+1,a);if(o.includes("#")){const[c,u]=o.split("#");r.push(Ct(n[c],u))}else r.push(n[o]);s=a+1}return r.join("")},Dn=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],ie=(t,e,r)=>{if(typeof t=="string")return xt(t,r);if(t.fn)return $t(t,r);if(t.ref)return Dn(t,r);throw new x(`'${e}': ${String(t)} is not a string, function or reference.`)},$t=({fn:t,argv:e},r)=>{const n=e.map(i=>["boolean","number"].includes(typeof i)?i:ie(i,"arg",r)),s=t.split(".");return s[0]in Je&&s[1]!=null?Je[s[0]][s[1]](...n):kn[t](...n)},Ln=({assign:t,...e},r)=>{var s,i;if(t&&t in r.referenceRecord)throw new x(`'${t}' is already defined in Reference Record.`);const n=$t(e,r);return(i=(s=r.logger)==null?void 0:s.debug)==null||i.call(s,`${J} evaluateCondition: ${D(e)} = ${D(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},$e=(t=[],e)=>{var n,s;const r={};for(const i of t){const{result:a,toAssign:o}=Ln(i,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!a)return{result:a};o&&(r[o.name]=o.value,(s=(n=e.logger)==null?void 0:n.debug)==null||s.call(n,`${J} assign: ${o.name} := ${D(o.value)}`))}return{result:!0,referenceRecord:r}},Pn=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const a=ie(i,"Header value entry",e);if(typeof a!="string")throw new x(`Header '${n}' value '${a}' is not a string`);return a})}),{}),It=(t,e)=>{if(Array.isArray(t))return t.map(r=>It(r,e));switch(typeof t){case"string":return xt(t,e);case"object":if(t===null)throw new x(`Unexpected endpoint property: ${t}`);return Ut(t,e);case"boolean":return t;default:throw new x(`Unexpected endpoint property type: ${typeof t}`)}},Ut=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:It(s,e)}),{}),Bn=(t,e)=>{const r=ie(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new x(`Endpoint URL must be a string, got ${typeof r}`)},_n=(t,e)=>{var h,f;const{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=$e(r,e);if(!s)return;const a={...e,referenceRecord:{...e.referenceRecord,...i}},{url:o,properties:c,headers:u}=n;return(f=(h=e.logger)==null?void 0:h.debug)==null||f.call(h,`${J} Resolving endpoint from template: ${D(n)}`),{...u!=null&&{headers:Pn(u,a)},...c!=null&&{properties:Ut(c,a)},url:Bn(o,a)}},Hn=(t,e)=>{const{conditions:r,error:n}=t,{result:s,referenceRecord:i}=$e(r,e);if(s)throw new x(ie(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},zn=(t,e)=>{const{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=$e(r,e);if(s)return Mt(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},Mt=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const n=_n(r,e);if(n)return n}else if(r.type==="error")Hn(r,e);else if(r.type==="tree"){const n=zn(r,e);if(n)return n}else throw new x(`Unknown endpoint rule: ${r}`);throw new x("Rules evaluation failed")},Gi=(t,e)=>{var u,h,f,l;const{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;(h=(u=e.logger)==null?void 0:u.debug)==null||h.call(u,`${J} Initial EndpointParams: ${D(r)}`);const a=Object.entries(s).filter(([,d])=>d.default!=null).map(([d,g])=>[d,g.default]);if(a.length>0)for(const[d,g]of a)r[d]=r[d]??g;const o=Object.entries(s).filter(([,d])=>d.required).map(([d])=>d);for(const d of o)if(r[d]==null)throw new x(`Missing required parameter: '${d}'`);const c=Mt(i,{endpointParams:r,logger:n,referenceRecord:{}});return(l=(f=e.logger)==null?void 0:f.debug)==null||l.call(f,`${J} Resolved endpoint: ${D(c)}`),c},Vi=!1,Wi=!1,Ot=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Ye=t=>Ot(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Xi=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{if(typeof e=="string")return Ye(e);const n=await e();return Ye(n)},useFipsEndpoint:async()=>{const n=typeof e=="string"?e:await e();return Ot(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Ki=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),et="content-length";function Fn(t){return e=>async r=>{const n=r.request;if(U.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(a=>a.toLowerCase()).indexOf(et)===-1)try{const a=t(s);n.headers={...n.headers,[et]:String(a)}}catch{}}return e({...r,request:n})}}const qn={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Qi=t=>({applyToStack:e=>{e.add(Fn(t.bodyLengthChecker),qn)}}),jn=async t=>{const e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Kn(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Xn(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Gn=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Vn=/(\d+\.){3}\d+/,Wn=/\.\./,Xn=t=>Gn.test(t)&&!Vn.test(t)&&!Wn.test(t),Kn=t=>{const[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,a=!!(i&&r&&n&&s);if(i&&!a)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return a},Qn=(t,e,r)=>{const n=async()=>{const s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:t==="endpoint"||e==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:a,port:o,path:c}=s;return`${i}//${a}${o?":"+o:""}${c}`}}return s}:n},Nt=async t=>{};function Zn(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}const Te=t=>{if(typeof t=="string")return Te(new URL(t));const{hostname:e,pathname:r,port:n,protocol:s,search:i}=t;let a;return i&&(a=Zn(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:a}},kt=t=>typeof t=="object"?"url"in t?Te(t.url):t:Te(t),Jn=async(t,e,r,n)=>{if(!r.endpoint){let a;r.serviceConfiguredEndpoint?a=await r.serviceConfiguredEndpoint():a=await Nt(r.serviceId),a&&(r.endpoint=()=>Promise.resolve(kt(a)))}const s=await Yn(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Yn=async(t,e,r)=>{var i;const n={},s=((i=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:i.call(e))||{};for(const[a,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[a]=o.value;break;case"contextParams":n[a]=t[o.name];break;case"clientContextParams":case"builtInParams":n[a]=await Qn(o.name,a,r)();break;case"operationContextParams":n[a]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await jn(n),n},es=({config:t,instructions:e})=>(r,n)=>async s=>{var o,c,u;t.endpoint&&Mr(n,"ENDPOINT_OVERRIDE","N");const i=await Jn(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=(o=i.properties)==null?void 0:o.authSchemes;const a=(c=n.authSchemes)==null?void 0:c[0];if(a){n.signing_region=a.signingRegion,n.signing_service=a.signingName;const h=ve(n),f=(u=h==null?void 0:h.selectedHttpAuthScheme)==null?void 0:u.httpAuthOption;f&&(f.signingProperties=Object.assign(f.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...s})},ts={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ce.name},Zi=(t,e)=>({applyToStack:r=>{r.addRelativeTo(es({config:t,instructions:e}),ts)}}),Ji=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>kt(await B(r)()):void 0,o=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:B(n??!1),useFipsEndpoint:B(s??!1)});let c;return o.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Nt(t.serviceId)),c),o};var q;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(q||(q={}));const Ee=3,Yi=q.STANDARD,rs=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ns=["TimeoutError","RequestTimeout","RequestTimeoutException"],ss=[500,502,503,504],is=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],as=t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},os=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Dt=t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||rs.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},Ie=(t,e=0)=>{var r;return as(t)||ns.includes(t.name)||is.includes((t==null?void 0:t.code)||"")||ss.includes(((r=t.$metadata)==null?void 0:r.httpStatusCode)||0)||os(t)||t.cause!==void 0&&e<=10&&Ie(t.cause,e+1)},cs=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){const r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Ie(t)}return!1};class ae{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>ae.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Dt(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}ae.setTimeoutFn=setTimeout;const Ae=100,Lt=20*1e3,us=500,tt=500,fs=5,ds=10,ls=1,hs="amz-sdk-invocation-id",ys="amz-sdk-request",gs=()=>{let t=Ae;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Lt,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},rt=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Lt,t),getRetryCost:()=>r});class Pt{constructor(e){this.maxAttempts=e,this.mode=q.STANDARD,this.capacity=tt,this.retryBackoffStrategy=gs(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return rt({retryDelay:Ae,retryCount:0})}async refreshRetryTokenForRetry(e,r){const n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?us:Ae);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,o=this.getCapacityCost(s);return this.capacity-=o,rt({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(tt,this.capacity+(e.getRetryCost()??ls))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ee}`),Ee}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?ds:fs}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class ms{constructor(e,r){this.maxAttemptsProvider=e,this.mode=q.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new ae,this.standardRetryStrategy=new Pt(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let ee;const ps=new Uint8Array(16);function ws(){if(!ee&&(ee=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ee(ps)}const S=[];for(let t=0;t<256;++t)S.push((t+256).toString(16).slice(1));function bs(t,e=0){return S[t[e+0]]+S[t[e+1]]+S[t[e+2]]+S[t[e+3]]+"-"+S[t[e+4]]+S[t[e+5]]+"-"+S[t[e+6]]+S[t[e+7]]+"-"+S[t[e+8]]+S[t[e+9]]+"-"+S[t[e+10]]+S[t[e+11]]+S[t[e+12]]+S[t[e+13]]+S[t[e+14]]+S[t[e+15]]}const Rs=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nt={randomUUID:Rs};function Ss(t,e,r){if(nt.randomUUID&&!t)return nt.randomUUID();t=t||{};const n=t.random||(t.rng||ws)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,bs(n)}const Ts=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),ea=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=B(n??Ee);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await B(r)()===q.ADAPTIVE?new ms(s):new Pt(s))})},Es=t=>(t==null?void 0:t.body)instanceof ReadableStream,As=t=>(e,r)=>async n=>{var a;let s=await t.retryStrategy();const i=await t.maxAttempts();if(vs(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),c=new Error,u=0,h=0;const{request:f}=n,l=U.isInstance(f);for(l&&(f.headers[hs]=Ss());;)try{l&&(f.headers[ys]=`attempt=${u+1}; max=${i}`);const{response:d,output:g}=await e(n);return s.recordSuccess(o),g.$metadata.attempts=u+1,g.$metadata.totalRetryDelay=h,{response:d,output:g}}catch(d){const g=Cs(d);if(c=Ts(d),l&&Es(f))throw(a=r.logger instanceof bn?console:r.logger)==null||a.warn("An error was encountered in a non-retryable streaming request."),c;try{o=await s.refreshRetryTokenForRetry(o,g)}catch{throw c.$metadata||(c.$metadata={}),c.$metadata.attempts=u+1,c.$metadata.totalRetryDelay=h,c}u=o.getRetryCount();const w=o.getRetryDelay();h+=w,await new Promise(y=>setTimeout(y,w))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},vs=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Cs=t=>{const e={error:t,errorType:xs(t)},r=Is(t.$response);return r&&(e.retryAfterHint=r),e},xs=t=>Dt(t)?"THROTTLING":Ie(t)?"TRANSIENT":cs(t)?"SERVER_ERROR":"CLIENT_ERROR",$s={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ta=t=>({applyToStack:e=>{e.add(As(t),$s)}}),Is=t=>{if(!re.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};class K{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&st(r),new K(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&st(e),parseInt(C(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function st(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class Us{constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){const r=[];for(const i of Object.keys(e)){const a=this.fromUtf8(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+o.byteLength));c.setUint8(0,7),c.setUint16(1,o.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(o,3),u;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set(K.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!_s.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const f=new Uint8Array(17);return f[0]=9,f.set(lt(e.value.replace(/\-/g,"")),1),f}}parse(e){const r={};let n=0;for(;n<e.byteLength;){const s=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[i]={type:at,value:!0};break;case 1:r[i]={type:at,value:!1};break;case 2:r[i]={type:Ms,value:e.getInt8(n++)};break;case 3:r[i]={type:Os,value:e.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:Ns,value:e.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:ks,value:new K(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const a=e.getUint16(n,!1);n+=2,r[i]={type:Ds,value:new Uint8Array(e.buffer,e.byteOffset+n,a)},n+=a;break;case 7:const o=e.getUint16(n,!1);n+=2,r[i]={type:Ls,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o))},n+=o;break;case 8:r[i]={type:Ps,value:new Date(new K(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[i]={type:Bs,value:`${C(c.subarray(0,4))}-${C(c.subarray(4,6))}-${C(c.subarray(6,8))}-${C(c.subarray(8,10))}-${C(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var it;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(it||(it={}));const at="boolean",Ms="byte",Os="short",Ns="integer",ks="long",Ds="binary",Ls="string",Ps="timestamp",Bs="uuid",_s=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Bt=4,N=Bt*2,P=4,Hs=N+P*2;function zs({byteLength:t,byteOffset:e,buffer:r}){if(t<Hs)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(Bt,!1),a=n.getUint32(N,!1),o=n.getUint32(t-P,!1),c=new ot().update(new Uint8Array(r,e,N));if(a!==c.digest())throw new Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,e+N,t-(N+P))),o!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${o}`);return{headers:new DataView(r,e+N+P,i),body:new Uint8Array(r,e+N+P+i,s-i-(N+P+P))}}class Fs{constructor(e,r){this.headerMarshaller=new Us(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){const n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),a=new DataView(i.buffer,i.byteOffset,i.byteLength),o=new ot;return a.setUint32(0,s,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,o.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),a.setUint32(s-4,o.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:r,body:n}=zs(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}}class qs{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class js{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class Gs{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const r=await this.options.deserializer(e);r!==void 0&&(yield r)}}}class Vs{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function Ws(t){let e=0,r=0,n=null,s=null;const i=o=>{if(typeof o!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+o);e=o,r=4,n=new Uint8Array(o),new DataView(n.buffer).setUint32(0,o,!1)},a=async function*(){const o=t[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await o.next();if(u){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}const h=c.length;let f=0;for(;f<h;){if(!n){const d=h-f;s||(s=new Uint8Array(4));const g=Math.min(4-r,d);if(s.set(c.slice(f,f+g),r),r+=g,f+=g,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const l=Math.min(e-r,h-f);n.set(c.slice(f,f+l),r),r+=l,f+=l,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:a}}function Xs(t,e){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},a=await t(i);if(a.$unknown){const o=new Error(e(r.body));throw o.name=s,o}throw a[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let Ks=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new Fs(e,r),this.utfEncoder=e}deserialize(e,r){const n=Ws(e);return new Gs({messageStream:new qs({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Xs(r,this.utfEncoder)})}serialize(e,r){return new js({messageStream:new Vs({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const Qs=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}}),Zs=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await e.next();if(n)return r.close();r.enqueue(s)}})};class Js{constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new Ks({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){const n=Ys(e)?Qs(e):e;return this.universalMarshaller.deserialize(n,r)}serialize(e,r){const n=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?Zs(n):n}}const Ys=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,na=t=>new Js(t);async function ei(t,e,r=1024*1024){const n=t.size;let s=0;for(;s<n;){const i=t.slice(s,Math.min(n,s+r));e(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const sa=async function(e,r){const n=new e;return await ei(r,s=>{n.update(s)}),n.digest()},ia=t=>()=>Promise.reject(t),O=64,ti=16,ri=[1732584193,4023233417,2562383102,271733878];class aa{constructor(){this.reset()}update(e){if(ni(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=si(e);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===O&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%O>=O-8){for(let a=this.bufferLength;a<O;a++)r.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(let a=this.bufferLength;a<O-8;a++)r.setUint8(a,0);r.setUint32(O-8,i>>>0,!0),r.setUint32(O-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(ti));for(let r=0;r<4;r++)e.setUint32(r*4,this.state[r],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:r}=this;let n=r[0],s=r[1],i=r[2],a=r[3];n=T(n,s,i,a,e.getUint32(0,!0),7,3614090360),a=T(a,n,s,i,e.getUint32(4,!0),12,3905402710),i=T(i,a,n,s,e.getUint32(8,!0),17,606105819),s=T(s,i,a,n,e.getUint32(12,!0),22,3250441966),n=T(n,s,i,a,e.getUint32(16,!0),7,4118548399),a=T(a,n,s,i,e.getUint32(20,!0),12,1200080426),i=T(i,a,n,s,e.getUint32(24,!0),17,2821735955),s=T(s,i,a,n,e.getUint32(28,!0),22,4249261313),n=T(n,s,i,a,e.getUint32(32,!0),7,1770035416),a=T(a,n,s,i,e.getUint32(36,!0),12,2336552879),i=T(i,a,n,s,e.getUint32(40,!0),17,4294925233),s=T(s,i,a,n,e.getUint32(44,!0),22,2304563134),n=T(n,s,i,a,e.getUint32(48,!0),7,1804603682),a=T(a,n,s,i,e.getUint32(52,!0),12,4254626195),i=T(i,a,n,s,e.getUint32(56,!0),17,2792965006),s=T(s,i,a,n,e.getUint32(60,!0),22,1236535329),n=E(n,s,i,a,e.getUint32(4,!0),5,4129170786),a=E(a,n,s,i,e.getUint32(24,!0),9,3225465664),i=E(i,a,n,s,e.getUint32(44,!0),14,643717713),s=E(s,i,a,n,e.getUint32(0,!0),20,3921069994),n=E(n,s,i,a,e.getUint32(20,!0),5,3593408605),a=E(a,n,s,i,e.getUint32(40,!0),9,38016083),i=E(i,a,n,s,e.getUint32(60,!0),14,3634488961),s=E(s,i,a,n,e.getUint32(16,!0),20,3889429448),n=E(n,s,i,a,e.getUint32(36,!0),5,568446438),a=E(a,n,s,i,e.getUint32(56,!0),9,3275163606),i=E(i,a,n,s,e.getUint32(12,!0),14,4107603335),s=E(s,i,a,n,e.getUint32(32,!0),20,1163531501),n=E(n,s,i,a,e.getUint32(52,!0),5,2850285829),a=E(a,n,s,i,e.getUint32(8,!0),9,4243563512),i=E(i,a,n,s,e.getUint32(28,!0),14,1735328473),s=E(s,i,a,n,e.getUint32(48,!0),20,2368359562),n=A(n,s,i,a,e.getUint32(20,!0),4,4294588738),a=A(a,n,s,i,e.getUint32(32,!0),11,2272392833),i=A(i,a,n,s,e.getUint32(44,!0),16,1839030562),s=A(s,i,a,n,e.getUint32(56,!0),23,4259657740),n=A(n,s,i,a,e.getUint32(4,!0),4,2763975236),a=A(a,n,s,i,e.getUint32(16,!0),11,1272893353),i=A(i,a,n,s,e.getUint32(28,!0),16,4139469664),s=A(s,i,a,n,e.getUint32(40,!0),23,3200236656),n=A(n,s,i,a,e.getUint32(52,!0),4,681279174),a=A(a,n,s,i,e.getUint32(0,!0),11,3936430074),i=A(i,a,n,s,e.getUint32(12,!0),16,3572445317),s=A(s,i,a,n,e.getUint32(24,!0),23,76029189),n=A(n,s,i,a,e.getUint32(36,!0),4,3654602809),a=A(a,n,s,i,e.getUint32(48,!0),11,3873151461),i=A(i,a,n,s,e.getUint32(60,!0),16,530742520),s=A(s,i,a,n,e.getUint32(8,!0),23,3299628645),n=v(n,s,i,a,e.getUint32(0,!0),6,4096336452),a=v(a,n,s,i,e.getUint32(28,!0),10,1126891415),i=v(i,a,n,s,e.getUint32(56,!0),15,2878612391),s=v(s,i,a,n,e.getUint32(20,!0),21,4237533241),n=v(n,s,i,a,e.getUint32(48,!0),6,1700485571),a=v(a,n,s,i,e.getUint32(12,!0),10,2399980690),i=v(i,a,n,s,e.getUint32(40,!0),15,4293915773),s=v(s,i,a,n,e.getUint32(4,!0),21,2240044497),n=v(n,s,i,a,e.getUint32(32,!0),6,1873313359),a=v(a,n,s,i,e.getUint32(60,!0),10,4264355552),i=v(i,a,n,s,e.getUint32(24,!0),15,2734768916),s=v(s,i,a,n,e.getUint32(52,!0),21,1309151649),n=v(n,s,i,a,e.getUint32(16,!0),6,4149444226),a=v(a,n,s,i,e.getUint32(44,!0),10,3174756917),i=v(i,a,n,s,e.getUint32(8,!0),15,718787259),s=v(s,i,a,n,e.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=a+r[3]&4294967295}reset(){this.state=Uint32Array.from(ri),this.buffer=new DataView(new ArrayBuffer(O)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function oe(t,e,r,n,s,i){return e=(e+t&4294967295)+(n+i&4294967295)&4294967295,(e<<s|e>>>32-s)+r&4294967295}function T(t,e,r,n,s,i,a){return oe(e&r|~e&n,t,e,s,i,a)}function E(t,e,r,n,s,i,a){return oe(e&n|r&~n,t,e,s,i,a)}function A(t,e,r,n,s,i,a){return oe(e^r^n,t,e,s,i,a)}function v(t,e,r,n,s,i,a){return oe(r^(e|~n),t,e,s,i,a)}function ni(t){return typeof t=="string"?t.length===0:t.byteLength===0}function si(t){return typeof t=="string"?F(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const ii=["in-region","cross-region","mobile","standard","legacy"],oa=({defaultsMode:t}={})=>Dr(async()=>{const e=typeof t=="function"?await t():t;switch(e==null?void 0:e.toLowerCase()){case"auto":return Promise.resolve(ai()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e==null?void 0:e.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${ii.join(", ")}, got ${e}`)}}),ai=()=>{var r,n;const t=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?_t.parse(window.navigator.userAgent):void 0,e=(n=t==null?void 0:t.platform)==null?void 0:n.type;return e==="tablet"||e==="mobile"};export{Yi as $,Bi as A,Ai as B,vi as C,dn as D,ji as E,Ci as F,Ii as G,U as H,qi as I,$i as J,Ei as K,xi as L,un as M,bn as N,hi as O,Zi as P,ut as Q,F as R,ki as S,Te as T,Ri as U,wi as V,xe as W,ct as X,oa as Y,sa as Z,fr as _,re as a,ft as a0,ia as a1,aa as a2,Ee as a3,na as a4,Di as a5,Wi as a6,Vi as a7,_i as a8,Hi as a9,fi as aa,zi as ab,di as ac,Li as ad,ea as ae,Xi as af,Ji as ag,Ki as ah,ta as ai,Qi as aj,li as ak,yi as al,Mi as am,cr as an,Jn as ao,Jr as b,Ti as c,kr as d,pi as e,mi as f,wn as g,B as h,Oi as i,Zt as j,ve as k,bi as l,Ni as m,gi as n,vt as o,An as p,Je as q,Gi as r,Si as s,Z as t,Yn as u,G as v,Pi as w,Rn as x,Fi as y,Ui as z};
